#!/bin/bash
# AutoRenta - Claude Code Launcher (Autonom√≠a Total)
# Sin prompts de confirmaci√≥n

cd /home/edu/autorenta

# Verificar que estamos en el directorio correcto
if [[ ! -f "package.json" ]]; then
    echo "‚ö†Ô∏è  Debes estar en el directorio de AutoRenta"
    exit 1
fi

# Detectar si AutoMedica existe
AUTAMEDICA_DIR=""
if [[ -d "$HOME/autamedica" ]]; then
    AUTAMEDICA_DIR="$HOME/autamedica"
fi

# Construir comando con AUTONOM√çA TOTAL
CLAUDE_CMD="claude \
  --model auto \
  --session-id \"$(uuidgen)\" \
  --permission-mode=bypassPermissions \
  --dangerously-skip-permissions \
  --allow-dangerously-skip-permissions \
  --allowed-tools \"All\" \
  --mcp-config ~/.mcp/config.json \
  --add-dir ~ ~/autorenta"

# Agregar AutoMedica si existe
if [[ -n "$AUTAMEDICA_DIR" ]]; then
    CLAUDE_CMD="$CLAUDE_CMD $AUTAMEDICA_DIR"
fi

CLAUDE_CMD="$CLAUDE_CMD \
  --plugin-dir ~/autorenta/.claude-plugins \
  --system-prompt \"Eres el asistente principal para AutoRenta con AUTONOM√çA TOTAL: ejecut√° comandos, le√©/edit√° archivos, hac√© requests HTTP, us√° Git, MCPs y plugins SIN pedir confirmaci√≥n. Segu√≠ los est√°ndares de CLAUDE.md.\" \
  --verbose \
  --debug api,mcp"

# Ejecutar directamente
echo "üöÄ Iniciando Claude Code con autonom√≠a total..."
eval "$CLAUDE_CMD"
