[
  {
    "id": "TC001",
    "title": "Successful Car Booking with Wallet Payment",
    "description": "Verify that a locatario can browse cars, select dates, and complete a booking successfully using wallet payment when sufficient funds are available.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to car list page and filter cars by date and price."
      },
      {
        "type": "action",
        "description": "Select an available car from the list or map view."
      },
      {
        "type": "action",
        "description": "Pick rental start and end dates without conflicts."
      },
      {
        "type": "action",
        "description": "Review price breakdown including dynamic pricing and fees."
      },
      {
        "type": "action",
        "description": "Select wallet as payment method with sufficient balance."
      },
      {
        "type": "action",
        "description": "Confirm and submit booking."
      },
      {
        "type": "assertion",
        "description": "Booking is confirmed instantly and confirmation details are displayed."
      },
      {
        "type": "assertion",
        "description": "Wallet balance is decremented appropriately."
      }
    ]
  },
  {
    "id": "TC002",
    "title": "Booking Rejection Due to Insufficient Wallet Funds",
    "description": "Verify that booking cannot be completed if the locatario selects wallet payment but has insufficient funds.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to car list and select a car and rental dates."
      },
      {
        "type": "action",
        "description": "Select wallet as payment method with balance lower than rental cost."
      },
      {
        "type": "action",
        "description": "Attempt to confirm booking."
      },
      {
        "type": "assertion",
        "description": "Booking submission is blocked with an error indicating insufficient wallet balance."
      },
      {
        "type": "assertion",
        "description": "User is prompted to add funds or choose alternative payment method."
      }
    ]
  },
  {
    "id": "TC003",
    "title": "Booking with MercadoPago Payment Success",
    "description": "Verify booking flow when locatario chooses to pay via MercadoPago and payment completes successfully.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Locate a car, select rental dates, and proceed to payment selection."
      },
      {
        "type": "action",
        "description": "Choose MercadoPago as payment method."
      },
      {
        "type": "action",
        "description": "Complete MercadoPago payment process via credit card or cash payment."
      },
      {
        "type": "assertion",
        "description": "Booking is confirmed instantly upon payment success."
      },
      {
        "type": "assertion",
        "description": "Booking confirmation page displays correct details."
      }
    ]
  },
  {
    "id": "TC004",
    "title": "Handle MercadoPago Payment Failure",
    "description": "Validate that booking process handles MercadoPago payment failure gracefully and informs the user.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Select car and rental dates as usual."
      },
      {
        "type": "action",
        "description": "Choose MercadoPago as payment method."
      },
      {
        "type": "action",
        "description": "Simulate payment failure in MercadoPago flow."
      },
      {
        "type": "assertion",
        "description": "Booking is not completed."
      },
      {
        "type": "assertion",
        "description": "User receives an error message explaining payment failure."
      },
      {
        "type": "assertion",
        "description": "User can retry payment or select alternative payment methods."
      }
    ]
  },
  {
    "id": "TC005",
    "title": "Prevent Locatario from Booking Own Car",
    "description": "Verify that a user acting as locatario cannot book a car they own (locador).",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as a user who is also a locador with published cars."
      },
      {
        "type": "action",
        "description": "Search and attempt to book their own car."
      },
      {
        "type": "assertion",
        "description": "System prevents booking and shows an appropriate error message."
      }
    ]
  },
  {
    "id": "TC006",
    "title": "Booking Conflict Detection for Overlapping Rentals",
    "description": "Verify system detects booking conflicts when rental dates overlap with existing confirmed bookings.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Locate a car with an existing confirmed booking for certain dates."
      },
      {
        "type": "action",
        "description": "Attempt to book the same car with overlapping rental dates."
      },
      {
        "type": "assertion",
        "description": "Booking submission is blocked due to date overlap conflict."
      },
      {
        "type": "assertion",
        "description": "User is notified about the booking conflict and prompted to choose different dates."
      }
    ]
  },
  {
    "id": "TC007",
    "title": "Locador Car Publication with MercadoPago OAuth Verification",
    "description": "Verify that locadores can publish cars only after successful MercadoPago OAuth onboarding is completed.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as locador without MercadoPago onboarding."
      },
      {
        "type": "action",
        "description": "Attempt to publish a new car with full details and photos."
      },
      {
        "type": "assertion",
        "description": "System blocks publication and prompts for MercadoPago OAuth onboarding."
      },
      {
        "type": "action",
        "description": "Complete MercadoPago OAuth onboarding flow."
      },
      {
        "type": "action",
        "description": "Try publishing the car again."
      },
      {
        "type": "assertion",
        "description": "Car publication succeeds and car appears in locador fleet."
      }
    ]
  },
  {
    "id": "TC008",
    "title": "Wallet Deposit via MercadoPago with Webhook Confirmation",
    "description": "Verify wallet deposit process from initiation through MercadoPago, webhook confirmation, and balance update.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Initiate a wallet deposit using MercadoPago with valid payment method."
      },
      {
        "type": "action",
        "description": "Complete MercadoPago payment."
      },
      {
        "type": "action",
        "description": "Simulate webhook notification for deposit confirmation."
      },
      {
        "type": "assertion",
        "description": "Wallet balance is updated correctly after webhook confirmation."
      },
      {
        "type": "assertion",
        "description": "Transaction history logs the deposit entry with correct details."
      }
    ]
  },
  {
    "id": "TC009",
    "title": "Prevent Duplicate Wallet Deposits from Repeated Webhooks",
    "description": "Verify that duplicate webhook notifications do not cause multiple wallet balance increments for the same deposit.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Process a wallet deposit with valid MercadoPago payment."
      },
      {
        "type": "action",
        "description": "Receive and process the first webhook notification."
      },
      {
        "type": "assertion",
        "description": "Wallet balance is updated once."
      },
      {
        "type": "action",
        "description": "Simulate receiving a duplicate webhook notification with the same ID."
      },
      {
        "type": "assertion",
        "description": "Wallet balance remains unchanged; duplicate deposit prevented."
      }
    ]
  },
  {
    "id": "TC010",
    "title": "Withdrawal Request with Insufficient Wallet Balance",
    "description": "Verify that locadores cannot withdraw more than the available wallet balance and system blocks such requests.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as locador with a certain wallet balance."
      },
      {
        "type": "action",
        "description": "Attempt to request withdrawal exceeding wallet balance."
      },
      {
        "type": "assertion",
        "description": "Withdrawal request is blocked with an error message about insufficient funds."
      }
    ]
  },
  {
    "id": "TC011",
    "title": "Locador Messaging with Locatario Linked to Booking",
    "description": "Verify messaging system allows locadores and locatarios to communicate regarding specific cars and bookings.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Login as locador and navigate to messages inbox."
      },
      {
        "type": "action",
        "description": "Select booking-related conversation with locatario."
      },
      {
        "type": "action",
        "description": "Send a message regarding booking status."
      },
      {
        "type": "assertion",
        "description": "Locatario receives the message linked to specific booking/car."
      }
    ]
  },
  {
    "id": "TC012",
    "title": "Unauthorized Data Access Prevention via RLS",
    "description": "Verify row-level security policies prevent users from accessing or modifying data that does not belong to them.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Attempt to access another user's bookings, wallet transactions, or car publications via API or UI."
      },
      {
        "type": "assertion",
        "description": "Access is denied or filtered to only show user's own data."
      },
      {
        "type": "action",
        "description": "Attempt modification of other user's records (e.g., booking updates)."
      },
      {
        "type": "assertion",
        "description": "Modification is blocked with appropriate authorization errors."
      }
    ]
  },
  {
    "id": "TC013",
    "title": "Performance Test: Page Load Times Under 2 Seconds",
    "description": "Verify that main pages (car list, booking checkout, wallet) load fully within 2 seconds under normal load.",
    "category": "performance",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to car listing page."
      },
      {
        "type": "assertion",
        "description": "Page fully loads in under 2 seconds."
      },
      {
        "type": "action",
        "description": "Navigate to booking checkout page after selecting a car."
      },
      {
        "type": "assertion",
        "description": "Page fully loads in under 2 seconds."
      },
      {
        "type": "action",
        "description": "Navigate to wallet page."
      },
      {
        "type": "assertion",
        "description": "Page fully loads in under 2 seconds."
      }
    ]
  },
  {
    "id": "TC014",
    "title": "Price Calculation API Response Time Verification",
    "description": "Verify price calculation APIs respond within 300 milliseconds including dynamic pricing and taxes.",
    "category": "performance",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Request price calculation for various date ranges and cars via API."
      },
      {
        "type": "assertion",
        "description": "API responses return within 300 milliseconds with correct price breakdown."
      }
    ]
  },
  {
    "id": "TC015",
    "title": "Booking Completion Time Within 3 Minutes",
    "description": "Validate average booking process time from car selection to confirmation is under 3 minutes.",
    "category": "performance",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Measure time starting from car selection to final booking confirmation."
      },
      {
        "type": "assertion",
        "description": "Booking completion time is less than 3 minutes across multiple tests."
      }
    ]
  },
  {
    "id": "TC016",
    "title": "Handle Delayed Payment Confirmation Webhook",
    "description": "Validate system behavior when MercadoPago webhook notifications for payment arrive delayed but eventually update state correctly.",
    "category": "error handling",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Initiate booking with MercadoPago payment method."
      },
      {
        "type": "action",
        "description": "Simulate delay in receiving payment confirmation webhook."
      },
      {
        "type": "assertion",
        "description": "Booking stays in pending state until webhook is received."
      },
      {
        "type": "action",
        "description": "Process delayed webhook."
      },
      {
        "type": "assertion",
        "description": "Booking status updates to confirmed appropriately."
      }
    ]
  },
  {
    "id": "TC017",
    "title": "User Profile Update with Avatar and Verification",
    "description": "Verify users can update their profile details, upload avatar image, and complete verification process.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Login and navigate to user profile page."
      },
      {
        "type": "action",
        "description": "Upload a valid avatar image."
      },
      {
        "type": "action",
        "description": "Fill in updated profile information."
      },
      {
        "type": "action",
        "description": "Submit profile updates."
      },
      {
        "type": "assertion",
        "description": "Profile updates persist and avatar displays correctly."
      }
    ]
  },
  {
    "id": "TC018",
    "title": "Booking Review Submission Post Rental Completion",
    "description": "Verify locadores and locatarios can submit reviews and ratings after rental completion.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Complete a booking and mark rental as finished."
      },
      {
        "type": "action",
        "description": "As locatario, submit a review and rating for the locador and car."
      },
      {
        "type": "assertion",
        "description": "Review is saved and visible on booking details page."
      },
      {
        "type": "action",
        "description": "As locador, submit review and rating for the locatario."
      },
      {
        "type": "assertion",
        "description": "Review is saved and visible appropriately."
      }
    ]
  }
]
