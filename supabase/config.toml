[functions.mercadopago-webhook]
# Disable JWT verification for webhook (needs to be public for MercadoPago)
verify_jwt = false

[functions.mercadopago-create-preference]
# This one needs JWT verification (user must be authenticated)
verify_jwt = true

[functions.update-exchange-rates]
# Disable JWT verification (called by cron workflow + pg_cron)
verify_jwt = false

[functions.mp-create-preauth]
# Requires JWT verification (user must be authenticated)
verify_jwt = true

[functions.mercadopago-oauth-callback]
# Disable JWT verification for MP OAuth callback (MP no envía el token del usuario)
# Seguridad se asegura con el parámetro state y validaciones en la función.
verify_jwt = false

[functions.sitemap]
# Sitemap must be public for Google Bot
verify_jwt = false

[functions.passkeys-registration-options]
# Passkey registration options - requires authentication
verify_jwt = true

[functions.passkeys-registration-verify]
# Passkey registration verification - requires authentication
verify_jwt = true

[functions.passkeys-authentication-options]
# Passkey authentication options - public (before login)
verify_jwt = false

[functions.passkeys-authentication-verify]
# Passkey authentication verification - public (creates session)
verify_jwt = false

[functions.tiktok-events]
# TikTok Events API - public for analytics tracking (anonymous users too)
verify_jwt = false

[functions.tiktok-leadgen-webhook]
# TikTok Lead Gen Webhook - public endpoint for Instant Form leads
verify_jwt = false

[functions.github-webhook-handler]
# GitHub webhook handler - public for receiving GitHub Actions events
# Security: Validates webhook signature via X-Hub-Signature-256 header
verify_jwt = false

[functions.send-whatsapp-otp]
# OTP via WhatsApp - disable middleware JWT verification
# Function handles authentication manually for better error handling
# This allows us to provide user-friendly error messages on auth failures
verify_jwt = false

[functions.lead-welcome-notification]
enabled = true
verify_jwt = true
import_map = "./functions/lead-welcome-notification/deno.json"
# Uncomment to specify a custom file path to the entrypoint.
# Supported file extensions are: .ts, .js, .mjs, .jsx, .tsx
entrypoint = "./functions/lead-welcome-notification/index.ts"
# Specifies static files to be bundled with the function. Supports glob patterns.
# For example, if you want to serve static HTML pages in your function:
# static_files = [ "./functions/lead-welcome-notification/*.html" ]

[functions.create-fragment-preference]
# Gateway JWT verification is disabled because this function validates user tokens
# manually with supabase.auth.getUser() and returns controlled auth errors.
verify_jwt = false

[functions.fragment-purchase-webhook]
# Public webhook endpoint for MercadoPago notifications.
# Security is enforced by HMAC validation (x-signature + x-request-id).
verify_jwt = false

[functions.verify-document]
# Disable gateway JWT verification. The function validates user tokens internally
# with requireAuth() and enforces ownership using the authenticated user id.
verify_jwt = false

[functions.verify-user-docs]
# Disable gateway JWT verification. This function validates user tokens internally
# and needs to support Supabase Auth ES256 user JWTs passed from the web app.
verify_jwt = false

[functions.manual-identity-review]
# Public action links from email (SI/NO) must work without user session.
# Security is enforced by signed token + expiry + one-time status transition in DB.
verify_jwt = false
