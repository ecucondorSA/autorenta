<!DOCTYPE html>
<html>
<head>
  <title>Test region_id</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <h1>Testing region_id in Supabase response</h1>
  <button onclick="testQuery()">Test Query</button>
  <pre id="output"></pre>

  <script>
    const { createClient } = supabase;

    const supabaseClient = createClient(
      'https://obxvffplochgeiclibng.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ieHZmZnBsb2NoZ2VpY2xpYm5nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjkwMjA4MzIsImV4cCI6MjA0NDU5NjgzMn0.j2z3-HYZDKy8mQJL-9d6hKTg5W1C0s5xvI8hfR8L6qA'
    );

    async function testQuery() {
      const output = document.getElementById('output');
      output.textContent = 'Loading...';

      try {
        // Test 1: Simple query with *
        const { data: cars1, error: error1 } = await supabaseClient
          .from('cars')
          .select('*')
          .eq('id', '4b3c5aed-8e3b-463e-8f3a-909a92e072e0')
          .single();

        if (error1) throw error1;

        // Test 2: Explicit columns
        const { data: cars2, error: error2 } = await supabaseClient
          .from('cars')
          .select('id, title, price_per_day, region_id, currency')
          .eq('id', '4b3c5aed-8e3b-463e-8f3a-909a92e072e0')
          .single();

        if (error2) throw error2;

        const result = {
          test1_select_star: {
            has_region_id: 'region_id' in cars1,
            region_id_value: cars1.region_id,
            all_keys: Object.keys(cars1).sort()
          },
          test2_explicit_columns: {
            has_region_id: 'region_id' in cars2,
            region_id_value: cars2.region_id,
            all_keys: Object.keys(cars2).sort()
          }
        };

        output.textContent = JSON.stringify(result, null, 2);
      } catch (error) {
        output.textContent = 'Error: ' + error.message;
      }
    }
  </script>
</body>
</html>
