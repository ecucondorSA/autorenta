    <div class="container mx-auto px-4 py-8">
      <div class="mb-6">
        <h1 class="text-2xl font-bold text-gray-900">Logs de Auditoría</h1>
        <p class="mt-2 text-sm text-gray-600">
          Revisa los logs de auditoría del sistema contable.
        </p>
      </div>

      <div class="mb-4 rounded-lg border border-gray-200 bg-white p-4">
        <div class="grid grid-cols-1 gap-4 md:grid-cols-4">
          <div>
            <label class="block text-sm font-medium text-gray-700">Severidad</label>
            <select
              [(ngModel)]="filters.severity"
              (change)="loadLogs()"
              class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm"
            >
              <option value="">Todas</option>
              <option value="low">Baja</option>
              <option value="medium">Media</option>
              <option value="high">Alta</option>
              <option value="critical">Crítica</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Tipo</label>
            <select
              [(ngModel)]="filters.auditType"
              (change)="loadLogs()"
              class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm"
            >
              <option value="">Todos</option>
              <option value="balance_check">Verificación de Balance</option>
              <option value="reconciliation">Conciliación</option>
              <option value="provision">Provisiones</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Estado</label>
            <select
              [(ngModel)]="filters.resolutionStatus"
              (change)="loadLogs()"
              class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm"
            >
              <option value="">Todos</option>
              <option value="open">Abierto</option>
              <option value="resolved">Resuelto</option>
            </select>
          </div>
          <div class="flex items-end">
            <button
              (click)="loadLogs()"
              class="w-full rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700"
            >
              Filtrar
            </button>
          </div>
        </div>
      </div>

      @if (loading()) {
        <div class="flex items-center justify-center py-12">
          <div class="h-8 w-8 animate-spin rounded-full border-4 border-blue-500 border-t-transparent"></div>
        </div>
      } @else if (logs().data.length === 0) {
        <div class="rounded-lg border border-gray-200 bg-gray-50 p-8 text-center">
          <p class="text-gray-600">No hay logs de auditoría disponibles.</p>
        </div>
      } @else {
        <div class="space-y-4">
          @for (log of logs().data; track log.id) {
            <div
              class="rounded-lg border p-4"
              [class.bg-red-50]="log.severity === 'critical'"
              [class.bg-orange-50]="log.severity === 'high'"
              [class.bg-yellow-50]="log.severity === 'medium'"
              [class.bg-blue-50]="log.severity === 'low'"
            >
              <div class="flex items-start justify-between">
                <div class="flex-1">
                  <div class="mb-2 flex items-center gap-2">
                    <span
                      class="rounded-full px-2 py-1 text-xs font-medium"
                      [class.bg-red-100]="log.severity === 'critical'"
                      [class.text-red-800]="log.severity === 'critical'"
                      [class.bg-orange-100]="log.severity === 'high'"
                      [class.text-orange-800]="log.severity === 'high'"
                      [class.bg-yellow-100]="log.severity === 'medium'"
                      [class.text-yellow-800]="log.severity === 'medium'"
                      [class.bg-blue-100]="log.severity === 'low'"
                      [class.text-blue-800]="log.severity === 'low'"
                    >
                      {{ log.severity }}
                    </span>
                    <span class="text-xs text-gray-500">{{ log.audit_type }}</span>
                  </div>
                  <p class="text-sm font-medium text-gray-900">{{ log.description }}</p>
                  @if (log.variance !== null && log.variance !== undefined) {
                    <p class="mt-1 text-xs text-gray-600">
                      Diferencia: ${{ log.variance | number: '1.2-2' }}
                    </p>
                  }
                  <p class="mt-1 text-xs text-gray-500">
                    {{ log.created_at | date: 'short' }}
                  </p>
                </div>
                <span
                  class="rounded-full px-2 py-1 text-xs font-medium"
                  [class.bg-green-100]="log.resolution_status === 'resolved'"
                  [class.text-green-800]="log.resolution_status === 'resolved'"
                  [class.bg-gray-100]="log.resolution_status === 'open'"
                  [class.text-gray-800]="log.resolution_status === 'open'"
                >
                  {{ log.resolution_status }}
                </span>
              </div>
            </div>
          }

          <!-- Paginación -->
          @if (logs().totalPages > 1) {
            <div class="flex items-center justify-between rounded-lg border border-gray-200 bg-white p-4">
              <button
                (click)="previousPage()"
                [disabled]="currentPage() === 1"
                class="rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50"
              >
                Anterior
              </button>
              <span class="text-sm text-gray-600">
                Página {{ currentPage() }} de {{ logs().totalPages }}
              </span>
              <button
                (click)="nextPage()"
                [disabled]="currentPage() === logs().totalPages"
                class="rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50"
              >
                Siguiente
              </button>
            </div>
          }
        </div>
      }
    </div>
