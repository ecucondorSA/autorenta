<div class="max-w-7xl mx-auto py-8 px-4">
  <!-- Loading State -->
  <div *ngIf="loading()" class="text-center py-12">
    <p class="text-text-secondary dark:text-text-secondary">Cargando reserva...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error() && !loading()" class="bg-error-bg border border-error-border rounded-xl p-6">
    <p class="text-error-strong">{{ error() }}</p>
    <button
      routerLink="/bookings"
      class="mt-4 px-4 py-2 bg-error-600 text-text-inverse rounded-xl hover:bg-error-700"
    >
      Volver a mis reservas
    </button>
  </div>

  <!-- Booking Detail -->
  <div *ngIf="booking() && !loading()" class="space-y-4 sm:space-y-6">
    <!-- Back Button -->
    <button
      routerLink="/bookings"
      class="inline-flex items-center gap-2 text-sm font-medium text-cta-default hover:text-warning-light transition-base mb-2"
    >
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M10 19l-7-7m0 0l7-7m-7 7h18"
        />
      </svg>
      Volver a mis reservas
    </button>

    <!-- Booking Flow Progress -->
    <div
      class="rounded-2xl border border-border-default dark:border-border-muted bg-surface-raised dark:bg-surface-secondary p-4 sm:p-6 shadow-sm"
    >
      <div class="flex items-center justify-between">
        <div>
          <p
            class="text-xs font-semibold uppercase tracking-wide text-text-muted dark:text-text-secondary/70"
          >
            Estado del flujo
          </p>
          <p class="text-sm text-text-secondary dark:text-text-secondary/80">
            Seguimiento paso a paso de tu reserva
          </p>
        </div>
        <span class="text-xs font-medium text-cta-default">
          Paso {{ currentBookingStageIndex() + 1 }} / {{ bookingFlowSteps.length }}
        </span>
      </div>

      <div class="mt-5 flex flex-col gap-4 sm:flex-row sm:items-center sm:gap-0">
        <ng-container *ngFor="let step of bookingFlowSteps; let i = index">
          <div class="flex flex-1 items-start gap-3 p-2">
            <div
              class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full border text-sm font-semibold transition-colors"
              [ngClass]="{
                'bg-cta-default text-cta-text border-cta-default shadow-md shadow-accent-petrol/30':
                  isStepCompleted(i) || isStepCurrent(i),
                'bg-surface-raised text-text-muted border-ash-gray/40 dark:bg-surface-secondary/60 dark:text-text-secondary/50 dark:border-pearl-light/20':
                  isStepUpcoming(i),
              }"
            >
              <svg
                *ngIf="isStepCompleted(i)"
                class="h-5 w-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                />
              </svg>
              <span *ngIf="!isStepCompleted(i)">{{ i + 1 }}</span>
            </div>
            <div>
              <p
                class="text-sm font-semibold"
                [ngClass]="{
                  'text-text-primary dark:text-text-inverse':
                    isStepCompleted(i) || isStepCurrent(i),
                  'text-text-muted dark:text-text-secondary/60': isStepUpcoming(i),
                }"
              >
                {{ step.label }}
              </p>
              <p class="text-xs text-text-muted dark:text-text-secondary/70">
                {{ step.description }}
              </p>
            </div>
          </div>

          <div
            *ngIf="i < bookingFlowSteps.length - 1"
            class="hidden sm:block h-0.5 flex-1 bg-gradient-to-r from-ash-gray/10 via-ash-gray/40 to-ash-gray/10"
          ></div>
        </ng-container>
      </div>
    </div>

    <!-- Two Column Layout for Desktop -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Left Column: Booking Info -->
      <div class="space-y-4 sm:space-y-6">
        <!-- Compact Hero Section -->
        <div
          class="relative overflow-hidden rounded-lg border border-border-default dark:border-border-muted bg-gradient-to-r from-gray-50 to-gray-100 dark:border-border-muted dark:from-gray-800 dark:to-gray-900"
        >
          <div class="flex items-center gap-4 p-4">
            <!-- Status Badge -->
            <div class="flex flex-col gap-2">
              <app-booking-status [booking]="booking()!"></app-booking-status>
              <app-deposit-status-badge
                *ngIf="booking()?.deposit_status"
                [status]="booking()!.deposit_status!"
              ></app-deposit-status-badge>
            </div>

            <!-- Distance Risk Tier Badge -->
            <app-distance-risk-tier-badge
              *ngIf="booking()?.distance_risk_tier && booking()?.delivery_required"
              [tier]="booking()!.distance_risk_tier!"
            ></app-distance-risk-tier-badge>

            <!-- Car Info -->
            <div class="flex-1 min-w-0">
              <div class="flex items-start justify-between gap-2">
                <div class="flex-1 min-w-0">
                  <h1 class="text-lg font-bold text-text-primary dark:text-text-inverse truncate">
                    {{ booking()?.car_title }}
                  </h1>
                  <p
                    class="text-sm text-text-secondary dark:text-text-secondary dark:text-text-secondary"
                  >
                    {{ booking()?.car_brand }} {{ booking()?.car_model }} ({{
                      booking()?.car_year
                    }})
                  </p>
                  <p
                    class="text-xs text-text-secondary dark:text-text-secondary dark:text-text-secondary"
                    *ngIf="booking()?.car_city"
                  >
                    üìç {{ booking()?.car_city }}
                  </p>
                </div>
                <app-share-button
                  type="booking"
                  [bookingId]="booking()?.id || ''"
                  [bookingDetails]="getBookingDetailsText()"
                  label=""
                  buttonClass="inline-flex items-center gap-1 px-2 py-1.5 rounded-lg border border-border-muted bg-surface-raised text-text-primary hover:bg-surface-base transition-colors"
                  ariaLabel="Compartir reserva"
                ></app-share-button>
              </div>
            </div>

            <!-- ID Badge -->
            <div class="hidden sm:block">
              <p class="text-xs text-text-secondary dark:text-text-secondary font-mono">
                ID: {{ booking()?.id | slice: 0 : 8 }}
              </p>
            </div>
          </div>
        </div>

        <div class="booking-detail-layout">
          <section class="booking-detail-main">
            <!-- Compact Dates Card -->
            <div
              class="rounded-lg border border-border-default dark:border-border-muted bg-surface-raised dark:bg-surface-secondary p-3 shadow-sm dark:border-border-muted dark:bg-surface-base"
              id="tour-booking-dates"
            >
              <h3 class="mb-2 text-sm font-semibold text-text-primary dark:text-text-secondary">
                üìÖ Fechas de la Reserva
              </h3>
              <div class="flex items-center gap-4 text-sm">
                <div class="flex-1">
                  <p class="text-xs text-text-secondary dark:text-text-secondary">Inicio</p>
                  <p class="font-medium text-text-primary dark:text-text-inverse">
                    {{ formatDateTime(booking()!.start_at) }}
                  </p>
                </div>
                <div class="flex-1">
                  <p class="text-xs text-text-secondary dark:text-text-secondary">Fin</p>
                  <p class="font-medium text-text-primary dark:text-text-inverse">
                    {{ formatDateTime(booking()!.end_at) }}
                  </p>
                </div>
                <div class="flex-shrink-0" *ngIf="booking()?.days_count">
                  <p class="text-xs text-text-secondary dark:text-text-secondary">Duraci√≥n</p>
                  <p class="font-semibold text-text-primary dark:text-text-inverse">
                    {{ booking()?.days_count }}d
                  </p>
                </div>
              </div>
            </div>

            <!-- ‚úÖ NEW: Distance and Delivery Card -->
            @if (booking()?.pickup_location_lat && booking()?.dropoff_location_lat) {
              <div
                class="rounded-lg border border-border-default dark:border-border-muted bg-surface-raised dark:bg-surface-secondary p-3 shadow-sm"
              >
                <h3 class="mb-3 text-sm font-semibold text-text-primary dark:text-text-secondary">
                  üìç Ubicaciones de Retiro y Devoluci√≥n
                </h3>

                <!-- Distance Info -->
                @if (booking()?.delivery_distance_km) {
                  <div
                    class="mb-4 p-3 bg-cta-default/10 dark:bg-cta-default/30 rounded-lg border border-cta-default/40 dark:border-cta-default"
                  >
                    <div class="flex items-center justify-between">
                      <span class="text-sm text-text-primary dark:text-text-secondary"
                        >Distancia</span
                      >
                      <span class="font-semibold text-text-primary dark:text-text-inverse">
                        {{ booking()!.delivery_distance_km | number: '1.0-2' }} km
                      </span>
                    </div>
                    @if (booking()?.distance_risk_tier) {
                      <div class="text-xs text-text-secondary dark:text-text-muted mt-1">
                        Categor√≠a:
                        @switch (booking()?.distance_risk_tier) {
                          @case ('local') {
                            <span class="text-success-light dark:text-success-light font-medium"
                              >Local</span
                            >
                          }
                          @case ('regional') {
                            <span class="text-warning-text dark:text-warning-400 font-medium"
                              >Regional</span
                            >
                          }
                          @case ('long_distance') {
                            <span class="text-warning-light dark:text-warning-light font-medium"
                              >Larga distancia</span
                            >
                          }
                        }
                      </div>
                    }
                  </div>
                }

                <!-- Locations -->
                <div class="space-y-3">
                  <!-- Pickup Location -->
                  <div>
                    <p class="text-xs font-medium text-text-secondary dark:text-text-muted mb-1">
                      Retiro
                    </p>
                    <p class="text-sm text-text-primary dark:text-text-inverse">
                      {{ booking()!.pickup_location_lat | number: '1.0-4' }},
                      {{ booking()!.pickup_location_lng | number: '1.0-4' }}
                    </p>
                  </div>

                  <!-- Dropoff Location -->
                  <div>
                    <p class="text-xs font-medium text-text-secondary dark:text-text-muted mb-1">
                      Devoluci√≥n
                    </p>
                    <p class="text-sm text-text-primary dark:text-text-inverse">
                      {{ booking()!.dropoff_location_lat | number: '1.0-4' }},
                      {{ booking()!.dropoff_location_lng | number: '1.0-4' }}
                    </p>
                  </div>

                  <!-- Delivery Fee -->
                  @if (booking()?.delivery_required && booking()?.delivery_fee_cents) {
                    <div class="pt-3 border-t border-border-default dark:border-border-muted">
                      <div class="flex items-center justify-between">
                        <span class="text-sm font-medium text-text-primary dark:text-text-secondary"
                          >Tarifa de delivery</span
                        >
                        <span class="font-semibold text-text-primary dark:text-text-inverse">
                          ARS ${{ (booking()?.delivery_fee_cents ?? 0) / 100 | number: '1.2-2' }}
                        </span>
                      </div>
                    </div>
                  }
                </div>
              </div>
            }

            <!-- Requirements Card - Solo para reservas confirmadas o en progreso -->
            <div
              *ngIf="booking()?.status === 'confirmed' || booking()?.status === 'in_progress'"
              class="card-premium rounded-2xl p-4 sm:p-6 shadow-soft border-2 border-cta-default/20"
            >
              <div class="flex items-center gap-2 mb-4">
                <svg
                  class="w-6 h-6 text-cta-default"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
                <h3 class="h5">Requisitos para el Retiro</h3>
              </div>

              <p class="text-sm text-text-secondary dark:text-text-secondary mb-4">
                Asegurate de cumplir con estos requisitos el d√≠a del retiro del veh√≠culo:
              </p>

              <div class="space-y-3">
                <!-- Edad m√≠nima -->
                <div
                  class="flex items-start gap-3 p-3 rounded-lg bg-surface-secondary/50 dark:bg-surface-secondary/30"
                >
                  <svg
                    class="w-5 h-5 text-cta-default flex-shrink-0 mt-0.5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                    />
                  </svg>
                  <div class="flex-1">
                    <p class="text-sm font-semibold text-text-primary dark:text-text-inverse-pure">
                      Edad m√≠nima: 21 a√±os
                    </p>
                    <p class="text-xs text-text-secondary dark:text-text-secondary/70 mt-1">
                      Deber√°s presentar tu DNI o pasaporte para verificar tu edad.
                    </p>
                  </div>
                </div>

                <!-- Licencia de conducir -->
                <div
                  class="flex items-start gap-3 p-3 rounded-lg bg-surface-secondary/50 dark:bg-surface-secondary/30"
                >
                  <svg
                    class="w-5 h-5 text-cta-default flex-shrink-0 mt-0.5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
                    />
                  </svg>
                  <div class="flex-1">
                    <p class="text-sm font-semibold text-text-primary dark:text-text-inverse-pure">
                      Licencia de conducir v√°lida
                    </p>
                    <p class="text-xs text-text-secondary dark:text-text-secondary/70 mt-1">
                      Con antig√ºedad m√≠nima de 1 a√±o y vigente durante toda la reserva.
                    </p>
                  </div>
                </div>

                <!-- Documento de identidad -->
                <div
                  class="flex items-start gap-3 p-3 rounded-lg bg-surface-secondary/50 dark:bg-surface-secondary/30"
                >
                  <svg
                    class="w-5 h-5 text-cta-default flex-shrink-0 mt-0.5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"
                    />
                  </svg>
                  <div class="flex-1">
                    <p class="text-sm font-semibold text-text-primary dark:text-text-inverse-pure">
                      DNI o Pasaporte
                    </p>
                    <p class="text-xs text-text-secondary dark:text-text-secondary/70 mt-1">
                      Original y en vigencia. No se aceptan copias.
                    </p>
                  </div>
                </div>

                <!-- M√©todo de pago / Wallet -->
                <div
                  class="flex items-start gap-3 p-3 rounded-lg bg-surface-secondary/50 dark:bg-surface-secondary/30"
                >
                  <svg
                    class="w-5 h-5 text-cta-default flex-shrink-0 mt-0.5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"
                    />
                  </svg>
                  <div class="flex-1">
                    <p class="text-sm font-semibold text-text-primary dark:text-text-inverse-pure">
                      Dep√≥sito de garant√≠a pagado
                    </p>
                    <p class="text-xs text-text-secondary dark:text-text-secondary/70 mt-1">
                      <span *ngIf="booking()?.payment_method === 'wallet'"
                        >‚úÖ Pagado con Wallet ($250 USD bloqueados)</span
                      >
                      <span *ngIf="booking()?.payment_method !== 'wallet'"
                        >Tarjeta de cr√©dito o efectivo en el momento del retiro.</span
                      >
                    </p>
                  </div>
                </div>

                <!-- Verificaci√≥n de identidad -->
                <div
                  class="flex items-start gap-3 p-3 rounded-lg bg-surface-secondary/50 dark:bg-surface-secondary/30"
                >
                  <svg
                    class="w-5 h-5 text-cta-default flex-shrink-0 mt-0.5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
                    />
                  </svg>
                  <div class="flex-1">
                    <p class="text-sm font-semibold text-text-primary dark:text-text-inverse-pure">
                      Perfil verificado
                    </p>
                    <p class="text-xs text-text-secondary dark:text-text-secondary/70 mt-1">
                      Verific√° tu identidad en tu perfil antes del retiro para agilizar el proceso.
                    </p>
                  </div>
                </div>
              </div>

              <!-- Nota importante -->
              <div class="info-card-petrol p-4 mt-4">
                <div class="flex items-start gap-2">
                  <svg
                    class="w-5 h-5 text-cta-default flex-shrink-0 mt-0.5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                  <div class="text-sm text-text-secondary dark:text-text-secondary">
                    <p class="font-semibold text-text-primary dark:text-text-inverse-pure mb-1">
                      Importante
                    </p>
                    <p>
                      El anfitri√≥n puede rechazar la entrega si no cumpl√≠s con todos los requisitos.
                      Asegurate de tener todo listo antes de coordinar el retiro.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Pricing / Insurance cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <app-booking-pricing-breakdown
                *ngIf="pricingView()"
                [data]="pricingView()!"
              ></app-booking-pricing-breakdown>

              <app-booking-insurance-summary
                *ngIf="insuranceView()"
                [data]="insuranceView()!"
              ></app-booking-insurance-summary>
            </div>

            <!-- Check-in/Check-out Actions Card (for renters) -->
            <div
              *ngIf="isRenter() && (canPerformCheckIn() || canPerformCheckOut())"
              class="card-premium rounded-2xl p-4 sm:p-6 shadow-soft border-2 border-cta-default/20"
            >
              <h3 class="h5 mb-4">Acciones del Alquiler</h3>

              <!-- Check-in Button -->
              <div
                *ngIf="canPerformCheckIn()"
                class="mb-4 p-4 rounded-xl bg-cta-default/10 dark:bg-cta-default/20 border border-cta-default/40 dark:border-cta-default"
              >
                <div class="flex items-start gap-4">
                  <div class="flex-shrink-0">
                    <div
                      class="w-12 h-12 rounded-full bg-cta-default/20 dark:bg-cta-default/40 flex items-center justify-center"
                    >
                      <svg
                        class="w-6 h-6 text-cta-default dark:text-cta-default"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                        />
                      </svg>
                    </div>
                  </div>
                  <div class="flex-1">
                    <h4 class="font-semibold text-text-primary dark:text-text-inverse mb-1">
                      Check-in del Veh√≠culo
                    </h4>
                    <p
                      class="text-sm text-text-secondary dark:text-text-secondary dark:text-text-secondary mb-3"
                    >
                      Realiz√° la inspecci√≥n inicial del veh√≠culo antes de iniciar el alquiler.
                      Necesitar√°s tomar fotos, registrar el od√≥metro y el nivel de combustible.
                    </p>
                    <a
                      [routerLink]="['/bookings', booking()?.id, 'check-in']"
                      class="inline-flex items-center gap-2 px-4 py-2 bg-cta-default text-cta-text rounded-lg font-medium transition-colors shadow-sm"
                    >
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                        />
                      </svg>
                      Iniciar Check-in
                    </a>
                  </div>
                </div>
              </div>

              <!-- Check-out Button -->
              <div
                *ngIf="canPerformCheckOut()"
                class="p-4 rounded-xl bg-success-light/10 dark:bg-success-light/20 border border-success-light/40 dark:border-success-light"
              >
                <div class="flex items-start gap-4">
                  <div class="flex-shrink-0">
                    <div
                      class="w-12 h-12 rounded-full bg-success-light/20 dark:bg-success-light/40 flex items-center justify-center"
                    >
                      <svg
                        class="w-6 h-6 text-success-light dark:text-success-light"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"
                        />
                      </svg>
                    </div>
                  </div>
                  <div class="flex-1">
                    <h4 class="font-semibold text-text-primary dark:text-text-inverse mb-1">
                      Check-out del Veh√≠culo
                    </h4>
                    <p
                      class="text-sm text-text-secondary dark:text-text-secondary dark:text-text-secondary mb-3"
                    >
                      Realiz√° la inspecci√≥n final del veh√≠culo al devolver el auto. Compar√° el
                      estado con el check-in y report√° cualquier da√±o.
                    </p>
                    <a
                      [routerLink]="['/bookings', booking()?.id, 'check-out']"
                      class="inline-flex items-center gap-2 px-4 py-2 bg-success-light hover:bg-success-light text-text-primary rounded-lg font-medium transition-colors shadow-sm"
                    >
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"
                        />
                      </svg>
                      Iniciar Check-out
                    </a>
                  </div>
                </div>
              </div>
            </div>

            <!-- Check-in/Check-out Status (if completed) -->
            <div
              *ngIf="isRenter() && (hasCheckIn() || hasCheckOut())"
              class="card-premium rounded-2xl p-4 sm:p-6 shadow-soft"
            >
              <h3 class="h5 mb-4">Estado de Inspecciones</h3>
              <div class="space-y-3">
                <div
                  *ngIf="hasCheckIn()"
                  class="flex items-center gap-3 p-3 rounded-lg bg-success-light/10 dark:bg-success-light/20"
                >
                  <svg
                    class="w-5 h-5 text-success-light dark:text-success-light"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                  <span class="text-sm font-medium text-success-light dark:text-success-light"
                    >Check-in completado</span
                  >
                </div>
                <div
                  *ngIf="hasCheckOut()"
                  class="flex items-center gap-3 p-3 rounded-lg bg-success-light/10 dark:bg-success-light/20"
                >
                  <svg
                    class="w-5 h-5 text-success-light dark:text-success-light"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                  <span class="text-sm font-medium text-success-light dark:text-success-light"
                    >Check-out completado</span
                  >
                </div>
              </div>
            </div>

            <!-- Claims/Siniestros Section -->
            <div
              *ngIf="isRenter() && (canReportClaim() || hasClaim())"
              class="card-premium rounded-2xl p-4 sm:p-6 shadow-soft border-2 border-error-border/50 dark:border-error-900/30"
            >
              <h3 class="h5 mb-4 flex items-center gap-2">
                <svg
                  class="w-6 h-6 text-error-text"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                  />
                </svg>
                Siniestros / Da√±os
              </h3>

              <!-- Report Claim Button -->
              <div
                *ngIf="canReportClaim()"
                class="p-4 rounded-xl bg-error-bg dark:bg-error-900/20 border border-error-border dark:border-error-800"
              >
                <div class="flex items-start gap-4">
                  <div class="flex-shrink-0">
                    <div
                      class="w-12 h-12 rounded-full bg-error-bg-hover dark:bg-error-900/40 flex items-center justify-center"
                    >
                      <svg
                        class="w-6 h-6 text-error-text"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                        />
                      </svg>
                    </div>
                  </div>
                  <div class="flex-1">
                    <h4 class="font-semibold text-text-primary dark:text-text-inverse mb-1">
                      Reportar Siniestro o Da√±o
                    </h4>
                    <p class="text-sm text-text-secondary dark:text-text-secondary mb-3">
                      ¬øTuviste un accidente o detectaste un da√±o en el veh√≠culo? Reportalo
                      inmediatamente con fotos y detalles. La aseguradora se contactar√° contigo.
                    </p>
                    <a
                      [routerLink]="['/bookings', booking()?.id, 'report-claim']"
                      class="inline-flex items-center gap-2 px-4 py-2 bg-error-600 hover:bg-error-700 text-text-inverse rounded-lg font-medium transition-colors shadow-sm"
                    >
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                        />
                      </svg>
                      Reportar Siniestro
                    </a>
                  </div>
                </div>
              </div>

              <!-- Claim Status Display -->
              <div *ngIf="hasClaim() && latestClaim()" class="space-y-3">
                <div
                  class="p-4 rounded-xl border"
                  [ngClass]="{
                    'bg-warning-light/10 dark:bg-warning-light/20 border-warning-light/40 dark:border-warning-light':
                      getClaimStatusColor(latestClaim()!.status) === 'orange',
                    'bg-cta-default/10 dark:bg-cta-default/20 border-cta-default/40 dark:border-cta-default':
                      getClaimStatusColor(latestClaim()!.status) === 'blue',
                    'bg-success-light/10 dark:bg-success-light/20 border-success-light/40 dark:border-success-light':
                      getClaimStatusColor(latestClaim()!.status) === 'green',
                    'bg-error-bg dark:bg-error-900/20 border-error-border dark:border-error-800':
                      getClaimStatusColor(latestClaim()!.status) === 'red',
                    'bg-surface-base dark:bg-surface-raised/20 border-border-default dark:border-border-strong':
                      getClaimStatusColor(latestClaim()!.status) === 'gray',
                  }"
                >
                  <div class="flex items-start justify-between gap-4">
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-2">
                        <span
                          class="inline-flex items-center gap-1.5 px-2.5 py-1 text-xs font-semibold rounded-full"
                          [ngClass]="{
                            'bg-warning-light/20 text-warning-light dark:bg-warning-light/40 dark:text-warning-light':
                              getClaimStatusColor(latestClaim()!.status) === 'orange',
                            'bg-cta-default/20 text-cta-default dark:bg-cta-default/40 dark:text-cta-default':
                              getClaimStatusColor(latestClaim()!.status) === 'blue',
                            'bg-success-light/20 text-success-light dark:bg-success-light/40 dark:text-success-light':
                              getClaimStatusColor(latestClaim()!.status) === 'green',
                            'bg-error-bg-hover text-error-strong dark:bg-error-900/40 dark:text-error-200':
                              getClaimStatusColor(latestClaim()!.status) === 'red',
                            'bg-surface-raised text-text-primary dark:bg-surface-raised/40 dark:text-text-primary':
                              getClaimStatusColor(latestClaim()!.status) === 'gray',
                          }"
                        >
                          {{ getClaimStatusLabel(latestClaim()!.status) }}
                        </span>
                        <span class="text-xs text-text-secondary dark:text-text-muted font-mono">
                          #{{ latestClaim()!.id | slice: 0 : 8 }}
                        </span>
                      </div>
                      <p class="text-sm font-medium text-text-primary dark:text-text-inverse mb-1">
                        Siniestro reportado el {{ formatDate(latestClaim()!.created_at) }}
                      </p>
                      <p class="text-xs text-text-secondary dark:text-text-secondary line-clamp-2">
                        {{ latestClaim()!.description }}
                      </p>
                      <p
                        class="text-xs text-text-secondary dark:text-text-muted mt-2"
                        *ngIf="latestClaim()!.photos && latestClaim()!.photos!.length > 0"
                      >
                        üì∏ {{ latestClaim()!.photos!.length }} foto(s) de evidencia
                      </p>
                    </div>
                  </div>
                  <div class="mt-3 pt-3 border-t border-border-default dark:border-border-muted">
                    <p class="text-xs text-text-secondary dark:text-text-secondary">
                      <strong>¬øQu√© sigue?</strong>
                      <span *ngIf="latestClaim()!.status === 'reported'">
                        Un gestor de la aseguradora revisar√° tu reporte en las pr√≥ximas 2 horas.
                      </span>
                      <span *ngIf="latestClaim()!.status === 'under_review'">
                        Tu siniestro est√° siendo evaluado por la aseguradora.
                      </span>
                      <span *ngIf="latestClaim()!.status === 'approved'">
                        Tu siniestro fue aprobado. Se procesar√° el pago correspondiente.
                      </span>
                      <span *ngIf="latestClaim()!.status === 'rejected'">
                        Tu siniestro fue rechazado. Contact√° a soporte para m√°s informaci√≥n.
                      </span>
                      <span *ngIf="latestClaim()!.status === 'paid'">
                        El pago del siniestro fue procesado exitosamente.
                      </span>
                      <span *ngIf="latestClaim()!.status === 'closed'">
                        Este siniestro est√° cerrado.
                      </span>
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- ‚úÖ INSURANCE SUMMARY CARD - Removed loading state -->

            <!-- Pricing Breakdown Card -->
          </section>

          <!-- Removed: app-payment-actions component -->
        </div>

        <app-review-management [booking]="booking()!"></app-review-management>

        <!-- Disputes Section -->
        @if (canCreateDispute() || booking()?.status === 'completed') {
          <div class="card-premium rounded-2xl p-4 sm:p-6 shadow-soft">
            <app-disputes-list
              [bookingId]="booking()!.id"
              [showCreateButton]="canCreateDispute()"
              (createDispute)="showDisputeForm.set(true)"
            ></app-disputes-list>
          </div>
        }

        <!-- Refund Request Section -->
        @if (canRequestRefund()) {
          <div class="card-premium rounded-2xl p-4 sm:p-6 shadow-soft">
            <div class="flex items-center justify-between mb-4">
              <div>
                <h3 class="text-lg font-semibold text-text-primary dark:text-text-inverse mb-1">
                  Solicitar Reembolso
                </h3>
                <p class="text-sm text-text-secondary dark:text-text-secondary">
                  Si necesitas un reembolso para esta reserva, puedes solicitarlo aqu√≠.
                </p>
              </div>
              <button
                (click)="showRefundForm.set(true)"
                class="px-4 py-2 bg-cta-default text-cta-text rounded-lg hover:bg-cta-default transition-colors"
              >
                Solicitar Reembolso
              </button>
            </div>
          </div>
        }

        <!-- Dispute Form Modal -->
        <app-dispute-form
          [isOpen]="showDisputeForm()"
          [bookingId]="booking()!.id"
          (closeModal)="showDisputeForm.set(false)"
          (disputeCreated)="onDisputeCreated()"
        ></app-dispute-form>

        <!-- Refund Request Modal -->
        <app-refund-request
          [isOpen]="showRefundForm()"
          [bookingId]="booking()!.id"
          (closeModal)="showRefundForm.set(false)"
          (refundRequested)="onRefundRequested()"
        ></app-refund-request>

        <!-- Contract Section -->
        <div class="mt-6" *ngIf="booking()">
          <app-booking-contract [bookingId]="booking()!.id"></app-booking-contract>
        </div>

        <!-- Refund Status -->
        <div class="mt-6" *ngIf="booking()">
          <app-refund-status [bookingId]="booking()!.id"></app-refund-status>
        </div>

        <!-- Owner Damage Report Button -->
        <div
          *ngIf="canReportDamage()"
          class="card-premium p-4 rounded-2xl shadow-soft bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 border-l-4 border-error-border"
        >
          <div class="flex items-start gap-4">
            <div class="flex-shrink-0">
              <svg
                class="w-8 h-8 text-error-text"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                />
              </svg>
            </div>
            <div class="flex-1">
              <h3 class="text-lg font-semibold text-text-primary dark:text-text-inverse-pure mb-2">
                ¬øDetectaste da√±os en el veh√≠culo?
              </h3>
              <p class="text-sm text-text-secondary dark:text-text-secondary mb-4">
                Reporta cualquier da√±o detectado despu√©s de la devoluci√≥n del veh√≠culo. El monto
                ser√° deducido del dep√≥sito de garant√≠a del locatario.
              </p>
              <a
                [routerLink]="['/bookings', booking()?.id, 'owner-damage-report']"
                class="inline-flex items-center gap-2 px-4 py-2 bg-error-600 hover:bg-error-700 text-text-inverse rounded-xl font-medium transition-base shadow-sm"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                  />
                </svg>
                Reportar Da√±os
              </a>
            </div>
          </div>
        </div>

        <!-- Display Damage Report if already submitted -->
        <div
          *ngIf="isOwner() && booking()?.owner_reported_damages"
          class="card-premium p-4 rounded-2xl shadow-soft border-l-4 border-warning-border bg-warning-bg dark:bg-warning-900/20"
        >
          <div class="flex items-start gap-4">
            <div class="flex-shrink-0">
              <svg
                class="w-8 h-8 text-warning-text dark:text-warning-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
            </div>
            <div class="flex-1">
              <h3 class="text-lg font-semibold text-warning-strong dark:text-warning-200 mb-2">
                Reporte de Da√±os Enviado
              </h3>
              <div class="space-y-2">
                <div class="flex justify-between items-center">
                  <span class="text-sm text-warning-strong dark:text-warning-300"
                    >Monto del da√±o:</span
                  >
                  <span class="font-semibold text-warning-strong dark:text-warning-100">
                    ${{ (booking()?.owner_damage_amount ?? 0) / 100 }} USD
                  </span>
                </div>
                <div
                  *ngIf="booking()?.owner_damage_description"
                  class="pt-2 border-t border-warning-border dark:border-warning-700"
                >
                  <p class="text-xs text-warning-strong dark:text-warning-300 font-medium mb-1">
                    Descripci√≥n:
                  </p>
                  <p class="text-sm text-warning-strong dark:text-warning-100">
                    {{ booking()?.owner_damage_description }}
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Bilateral Confirmation Section -->
        <div *ngIf="showConfirmationSection()" class="space-y-4">
          <!-- Timeline Component -->
          <div
            id="booking-confirmation-timeline"
            class="rounded-2xl border border-border-default dark:border-border-muted bg-surface-raised dark:bg-surface-secondary p-4 sm:p-6 shadow-sm"
          >
            <app-booking-confirmation-timeline
              [booking]="booking()!"
              [ownerName]="carOwnerName()"
              [renterName]="booking()?.renter_name ?? 'el locatario'"
              (confirmationRequested)="handleTimelineAction($event)"
            ></app-booking-confirmation-timeline>
          </div>

          <!-- Owner Confirmation Component -->
          <div *ngIf="isOwner()" id="owner-confirmation-section">
            <app-owner-confirmation
              [bookingId]="booking()!.id"
              [ownerConfirmed]="booking()?.owner_confirmed_delivery ?? false"
              [renterConfirmed]="booking()?.renter_confirmed_payment ?? false"
              (confirmed)="handleConfirmationSuccess($event)"
              (errorOccurred)="handleConfirmationError($event)"
            ></app-owner-confirmation>
          </div>

          <!-- Renter Confirmation Component -->
          <div *ngIf="isRenter()" id="renter-confirmation-section">
            <app-renter-confirmation
              [bookingId]="booking()!.id"
              [ownerConfirmed]="booking()?.owner_confirmed_delivery ?? false"
              [renterConfirmed]="booking()?.renter_confirmed_payment ?? false"
              [damageAmount]="booking()?.owner_damage_amount ?? null"
              [damageDescription]="booking()?.owner_damage_description ?? null"
              [depositAmount]="(booking()?.deposit_amount_cents ?? 25000) / 100"
              (confirmed)="handleConfirmationSuccess($event)"
              (errorOccurred)="handleConfirmationError($event)"
            ></app-renter-confirmation>
          </div>
        </div>

        <!-- ‚úÖ REPORT CLAIM BUTTON -->
        <div
          *ngIf="booking()?.status === 'confirmed' || booking()?.status === 'in_progress'"
          class="card-premium p-4 rounded-2xl shadow-soft bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 border-l-4 border-error-border"
        >
          <div class="flex items-start gap-4">
            <div class="flex-shrink-0">
              <svg
                class="w-8 h-8 text-error-text"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                />
              </svg>
            </div>
            <div class="flex-1">
              <h3 class="text-lg font-semibold text-text-primary dark:text-text-inverse-pure mb-2">
                ¬øTuviste un accidente o da√±o?
              </h3>
              <p class="text-sm text-text-secondary dark:text-text-secondary mb-4">
                Reporta cualquier incidente inmediatamente para activar tu cobertura de seguro.
              </p>
              <a
                [routerLink]="['/bookings', booking()?.id, 'report-claim']"
                class="inline-flex items-center gap-2 px-4 py-2 bg-error-600 hover:bg-error-700 text-text-inverse rounded-xl font-medium transition-base shadow-sm"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                  />
                </svg>
                Reportar Siniestro/Da√±o
              </a>
            </div>
          </div>
        </div>
        <!-- End Left Column -->

        <!-- Right Column: Chat or Payment Reminder -->
        <div *ngIf="carOwnerId()" id="tour-booking-chat" class="lg:sticky lg:top-4 lg:self-start">
          <!-- ‚úÖ Show chat for confirmed/active bookings -->
          <div
            *ngIf="
              booking()?.status === 'confirmed' ||
              booking()?.status === 'in_progress' ||
              booking()?.status === 'pending' ||
              showConfirmationSection()
            "
          >
            <h2 class="mb-4 text-xl font-bold text-text-primary dark:text-text-primary">
              Chat con el anfitri√≥n
            </h2>
            <app-booking-chat
              [bookingId]="booking()!.id"
              [recipientId]="carOwnerId()!"
              [recipientName]="carOwnerName()"
            ></app-booking-chat>
          </div>

          <!-- ‚úÖ Show payment reminder for pending payment -->
          <div *ngIf="booking()?.status === 'pending_payment'" class="space-y-4">
            <div
              class="bg-cta-default/10 dark:bg-cta-default/20 border border-cta-default/40 dark:border-cta-default/60 rounded-xl p-6"
            >
              <div class="flex items-start gap-3">
                <svg
                  class="w-6 h-6 text-cta-default flex-shrink-0 mt-0.5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
                <div>
                  <h3 class="text-lg font-semibold text-cta-default dark:text-cta-default mb-2">
                    Reserva pendiente de pago
                  </h3>
                  <p class="text-sm text-cta-default dark:text-cta-default mb-4">
                    Para poder chatear con el anfitri√≥n, primero deb√©s completar el pago de tu
                    reserva.
                  </p>
                  <a
                    [routerLink]="['/bookings', booking()?.id, 'payment']"
                    class="inline-flex items-center gap-2 px-4 py-2 bg-cta-default text-cta-text rounded-lg font-medium transition-colors"
                  >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
                      />
                    </svg>
                    Completar pago
                  </a>
                </div>
              </div>
            </div>

            <!-- FAQ Section for Pending Payment -->
            <div
              class="bg-surface-base dark:bg-surface-base/50 border border-border-default dark:border-border-muted rounded-xl p-4"
            >
              <h4 class="font-medium text-text-primary dark:text-text-primary mb-3">
                Preguntas frecuentes
              </h4>
              <div class="space-y-3 text-sm">
                <div>
                  <p class="font-medium text-text-primary dark:text-text-primary">
                    ¬øCu√°nto tiempo tengo para pagar?
                  </p>
                  <p class="text-text-secondary dark:text-text-secondary dark:text-text-secondary">
                    Ten√©s 24 horas para completar el pago antes de que expire la reserva.
                  </p>
                </div>
                <div>
                  <p class="font-medium text-text-primary dark:text-text-primary">
                    ¬øPuedo hacer preguntas al anfitri√≥n?
                  </p>
                  <p class="text-text-secondary dark:text-text-secondary dark:text-text-secondary">
                    S√≠, pero primero complet√° el pago para activar el chat.
                  </p>
                </div>
                <div>
                  <p class="font-medium text-text-primary dark:text-text-primary">
                    ¬øQu√© m√©todos de pago aceptan?
                  </p>
                  <p class="text-text-secondary dark:text-text-secondary dark:text-text-secondary">
                    Tarjeta de cr√©dito/d√©bito o saldo en tu wallet AutoRenta.
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- Operaciones & Tracking -->
          <div class="mt-6 space-y-4">
            <app-booking-ops-timeline
              [data]="{
                payment_note: paymentView()
                  ? paymentView()!.method + ' ¬∑ ' + paymentView()!.status
                  : null,
                payment_date: paymentView()?.date ?? null,
                pickup_confirmed_at: confirmation()?.pickup_confirmed_at ?? null,
                dropoff_confirmed_at: confirmation()?.dropoff_confirmed_at ?? null,
                owner_confirmation_at:
                  confirmation()?.owner_confirmation_at ?? booking()?.owner_confirmation_at,
                renter_confirmation_at:
                  confirmation()?.renter_confirmation_at ?? booking()?.renter_confirmation_at,
                returned_at: confirmation()?.returned_at ?? booking()?.returned_at,
                funds_released_at:
                  confirmation()?.funds_released_at ?? booking()?.funds_released_at,
                cancellation_reason:
                  cancellation()?.cancellation_reason ?? booking()?.cancellation_reason,
                cancellation_fee_cents:
                  cancellation()?.cancellation_fee_cents ??
                  booking()?.cancellation_fee_cents ??
                  null,
                cancelled_at: cancellation()?.cancelled_at ?? booking()?.cancelled_at,
              }"
            ></app-booking-ops-timeline>

            <app-booking-tracking
              [session]="
                tracking()
                  ? {
                      active: tracking()!.active,
                      started_at: tracking()!.started_at,
                      ended_at: tracking()!.ended_at,
                      points_count: tracking()!.points,
                    }
                  : null
              "
            ></app-booking-tracking>
          </div>
        </div>
        <!-- End Right Column -->
      </div>
      <!-- End Two Column Grid -->
    </div>
  </div>
</div>
