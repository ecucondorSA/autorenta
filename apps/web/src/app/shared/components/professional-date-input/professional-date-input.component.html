<div class="professional-date-input">
  <!-- Label -->
  <label
    *ngIf="label"
    class="mb-2 flex items-center gap-2 text-xs font-semibold text-text-primary dark:text-text-primary"
  >
    <svg
      *ngIf="showIcon"
      class="h-4 w-4 text-text-secondary dark:text-text-secondary/70"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
      />
    </svg>
    {{ label }}
  </label>

  <!-- Input Button -->
  <button
    type="button"
    (click)="openCalendar()"
    (keydown.enter)="openCalendar()"
    (keydown.space)="openCalendar()"
    [disabled]="disabled"
    [attr.aria-label]="hasSelection() ? 'Editar fechas seleccionadas' : placeholder"
    class="date-input-button"
    [class.has-selection]="hasSelection()"
    [class.disabled]="disabled"
  >
    <!-- Calendar Icon -->
    <svg
      class="calendar-icon"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
      [class.text-cta-default]="hasSelection()"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
      />
    </svg>

    <!-- Date Display -->
    <span class="date-display" [class.placeholder]="!hasSelection()">
      {{ displayText() }}
    </span>

    <!-- Days Badge (when selected) -->
    <span *ngIf="hasSelection() && selectedDays()" class="days-badge">
      {{ selectedDays() }} {{ selectedDays() === 1 ? 'día' : 'días' }}
    </span>

    <!-- Clear Button (when selected) -->
    <button
      *ngIf="hasSelection() && !disabled"
      type="button"
      (click)="clearSelection($event)"
      class="clear-button"
      aria-label="Limpiar fechas"
    >
      <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
    </button>

    <!-- Arrow Icon -->
    <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </button>

  <!-- Calendar Modal - Removido: componente de Ionic eliminado -->
</div>
