<!-- Smart Splash Screen: Intro + Loop while app initializes -->
@if (isVisible()) {
  <div
    class="splash-container"
    [class.fade-out]="isExiting()"
    role="status"
    aria-label="Cargando aplicaciÃ³n"
    aria-live="polite"
  >
    <!-- Intro Video (plays once) -->
    <video
      #splashVideo
      autoplay
      muted
      playsinline
      preload="auto"
      poster="assets/splash/splash-mobile-poster.webp"
      class="splash-video"
      [class.hidden]="showLoop()"
      (ended)="onIntroEnded()"
    >
      <source src="assets/splash/splash-mobile.webm" type="video/webm" />
      <source src="assets/splash/splash-mobile.mp4" type="video/mp4" />
    </video>

    <!-- Loop State: Shown when intro ends but app not ready -->
    @if (showLoop()) {
      <div class="splash-loop" aria-hidden="true">
        <!-- Animated background gradient -->
        <div class="loop-gradient"></div>

        <!-- Pulsing logo -->
        <div class="loop-logo-container">
          <img
            src="assets/images/autorentar-logo.png"
            alt=""
            class="loop-logo breathing"
          />
          <!-- Loading dots -->
          <div class="loading-dots">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    }

    <!-- Logo Branding Overlay (visible during intro) -->
    @if (showBranding() && !showLoop()) {
      <div class="splash-branding" aria-hidden="true">
        <img
          src="assets/images/autorentar-logo.png"
          alt=""
          class="splash-logo"
        />
      </div>
    }
  </div>
}
