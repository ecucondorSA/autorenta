<ion-modal [isOpen]="isOpen" (didDismiss)="dismiss()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Seleccion치 las fechas</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="dismiss()">Cerrar</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>

    <ion-content class="ion-padding">
      <!-- Loading overlay -->
      <div
        *ngIf="isCheckingAvailability()"
        class="absolute inset-0 bg-surface-raised dark:bg-surface-secondary/80 z-50 flex items-center justify-center"
      >
        <div class="flex flex-col items-center gap-3">
          <svg class="animate-spin h-8 w-8 text-cta-default" fill="none" viewBox="0 0 24 24">
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"
            ></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            ></path>
          </svg>
          <span class="text-sm text-text-secondary dark:text-text-secondary"
            >Verificando disponibilidad...</span
          >
        </div>
      </div>

      <!-- Calendario -->
      <ion-datetime
        presentation="date"
        [multiple]="true"
        [value]="initialValue"
        [isDateEnabled]="isDateEnabled"
        (ionChange)="onDateChange($event)"
        [showDefaultButtons]="false"
        [highlightedDates]="selectedRange()"
        class="w-full"
      >
      </ion-datetime>

      <!-- Instrucciones -->
      <div class="mt-4 px-2">
        <p class="text-xs text-text-secondary dark:text-text-secondary mb-2">
          游눠 <strong>Instrucciones:</strong>
        </p>
        <ul
          class="text-xs text-text-secondary dark:text-text-secondary space-y-1 list-disc list-inside"
        >
          <li>Seleccion치 la fecha de inicio</li>
          <li>Luego seleccion치 la fecha de fin</li>
          <li>Las fechas en gris est치n bloqueadas o no disponibles</li>
        </ul>
      </div>

      <!-- Leyenda -->
      <div class="mt-4 px-2 flex flex-wrap gap-3 text-xs">
        <div class="flex items-center gap-1.5">
          <div class="w-3 h-3 rounded-full bg-cta-default"></div>
          <span class="text-text-secondary dark:text-text-secondary">Disponible</span>
        </div>
        <div class="flex items-center gap-1.5">
          <div class="w-3 h-3 rounded-full bg-gray-300"></div>
          <span class="text-text-secondary dark:text-text-secondary">Bloqueado</span>
        </div>
      </div>
    </ion-content>
  </ng-template>
</ion-modal>
