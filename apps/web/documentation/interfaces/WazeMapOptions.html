<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>autorenta-web documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">autorenta-web documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">

















<ol class="breadcrumb">
  <li class="breadcrumb-item">Interfaces</li>
  <li class="breadcrumb-item"
  >
  WazeMapOptions</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/shared/components/waze-live-map/waze-live-map.component.ts</code>
        </p>




        <section data-compodoc="block-index">
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#lat" 
>
                                            lat
                                        </a>
                                </li>
                                <li>
                                        <a href="#lng" 
>
                                            lng
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#navigate" 
>
                                            navigate
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#showPin" 
>
                                            showPin
                                        </a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#zoom" 
>
                                            zoom
                                        </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section data-compodoc="block-properties">
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="lat"></a>
                                        <span class="name "><b>lat</b>
                                            <a href="#lat">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>lat:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="lng"></a>
                                        <span class="name "><b>lng</b>
                                            <a href="#lng">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>lng:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="navigate"></a>
                                        <span class="name "><b>navigate</b>
                                            <a href="#navigate">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>navigate:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="showPin"></a>
                                        <span class="name "><b>showPin</b>
                                            <a href="#showPin">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>showPin:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="zoom"></a>
                                        <span class="name "><b>zoom</b>
                                            <a href="#zoom">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>zoom:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {
  Component,
  Input,
  OnInit,
  OnChanges,
  SimpleChanges,
  inject,
  PLATFORM_ID,
  signal,
  computed,
} from &#x27;@angular/core&#x27;;
import { CommonModule, isPlatformBrowser } from &#x27;@angular/common&#x27;;
import { DomSanitizer, SafeResourceUrl } from &#x27;@angular/platform-browser&#x27;;

export interface WazeMapOptions {
  lat: number;
  lng: number;
  zoom?: number; // 1-20, default 12
  showPin?: boolean; // Show pin at location
  navigate?: boolean; // Auto-start navigation
}

/**
 * Waze Live Map Component
 *
 * Embeds Waze Live Map with real-time traffic data
 *
 * Features:
 * - Real-time traffic visualization
 * - Community-reported incidents (accidents, police, hazards)
 * - Road closures and construction
 * - Interactive map (zoom, pan)
 * - 100% FREE (no API key required)
 *
 * Benefits over Mapbox:
 * - Real-time traffic from Waze community
 * - Police/accident/hazard alerts
 * - More accurate traffic for Argentina
 * - Shows construction and road closures
 *
 * Usage:
 * &#x60;&#x60;&#x60;html
 * &lt;app-waze-live-map
 *   [lat]&#x3D;&quot;-34.6037&quot;
 *   [lng]&#x3D;&quot;-58.3816&quot;
 *   [zoom]&#x3D;&quot;14&quot;
 *   [showPin]&#x3D;&quot;true&quot;&gt;
 * &lt;/app-waze-live-map&gt;
 * &#x60;&#x60;&#x60;
 */
@Component({
  selector: &#x27;app-waze-live-map&#x27;,
  standalone: true,
  imports: [CommonModule],
  template: &#x60;
    &lt;div class&#x3D;&quot;waze-live-map-container relative w-full h-full&quot;&gt;
      &lt;!-- Loading State --&gt;
      &lt;div
        *ngIf&#x3D;&quot;isLoading()&quot;
        class&#x3D;&quot;absolute inset-0 flex items-center justify-center bg-surface-base z-10&quot;
      &gt;
        &lt;div class&#x3D;&quot;text-center space-y-3&quot;&gt;
          &lt;svg
            class&#x3D;&quot;animate-spin h-10 w-10 text-cta-default mx-auto&quot;
            fill&#x3D;&quot;none&quot;
            viewBox&#x3D;&quot;0 0 24 24&quot;
          &gt;
            &lt;circle
              class&#x3D;&quot;opacity-25&quot;
              cx&#x3D;&quot;12&quot;
              cy&#x3D;&quot;12&quot;
              r&#x3D;&quot;10&quot;
              stroke&#x3D;&quot;currentColor&quot;
              stroke-width&#x3D;&quot;4&quot;
            &gt;&lt;/circle&gt;
            &lt;path
              class&#x3D;&quot;opacity-75&quot;
              fill&#x3D;&quot;currentColor&quot;
              d&#x3D;&quot;M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z&quot;
            &gt;&lt;/path&gt;
          &lt;/svg&gt;
          &lt;p class&#x3D;&quot;text-text-secondary text-sm&quot;&gt;Cargando mapa de Waze...&lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;!-- Waze Live Map Iframe --&gt;
      &lt;iframe
        *ngIf&#x3D;&quot;wazeMapUrl()&quot;
        [src]&#x3D;&quot;wazeMapUrl()&quot;
        (load)&#x3D;&quot;onMapLoad()&quot;
        class&#x3D;&quot;w-full h-full border-0 rounded-lg&quot;
        [class.hidden]&#x3D;&quot;isLoading()&quot;
        title&#x3D;&quot;Mapa de tráfico en tiempo real - Waze&quot;
        allow&#x3D;&quot;geolocation&quot;
        loading&#x3D;&quot;lazy&quot;
      &gt;&lt;/iframe&gt;

      &lt;!-- Error State --&gt;
      &lt;div
        *ngIf&#x3D;&quot;hasError()&quot;
        class&#x3D;&quot;absolute inset-0 flex items-center justify-center bg-surface-base&quot;
      &gt;
        &lt;div class&#x3D;&quot;text-center space-y-3 p-6&quot;&gt;
          &lt;svg
            class&#x3D;&quot;h-12 w-12 text-error mx-auto&quot;
            fill&#x3D;&quot;none&quot;
            stroke&#x3D;&quot;currentColor&quot;
            viewBox&#x3D;&quot;0 0 24 24&quot;
          &gt;
            &lt;path
              stroke-linecap&#x3D;&quot;round&quot;
              stroke-linejoin&#x3D;&quot;round&quot;
              stroke-width&#x3D;&quot;2&quot;
              d&#x3D;&quot;M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z&quot;
            /&gt;
          &lt;/svg&gt;
          &lt;p class&#x3D;&quot;text-text-primary font-medium&quot;&gt;Error al cargar el mapa de Waze&lt;/p&gt;
          &lt;p class&#x3D;&quot;text-text-secondary text-sm&quot;&gt;
            Por favor, verifica tu conexión e intenta nuevamente
          &lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;!-- Waze Branding Badge --&gt;
      &lt;div
        class&#x3D;&quot;absolute bottom-4 left-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg px-3 py-2 flex items-center gap-2 z-20&quot;
      &gt;
        &lt;svg class&#x3D;&quot;w-5 h-5&quot; viewBox&#x3D;&quot;0 0 24 24&quot; fill&#x3D;&quot;#33CCFF&quot;&gt;
          &lt;path
            d&#x3D;&quot;M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.4 0-8-3.6-8-8s3.6-8 8-8 8 3.6 8 8-3.6 8-8 8z&quot;
          /&gt;
          &lt;path
            d&#x3D;&quot;M12 6c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zm0 10c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4z&quot;
          /&gt;
        &lt;/svg&gt;
        &lt;span class&#x3D;&quot;text-xs font-semibold text-text-primary&quot;&gt;Tráfico en tiempo real - Waze&lt;/span&gt;
      &lt;/div&gt;

      &lt;!-- Info Badge (optional) --&gt;
      &lt;div
        *ngIf&#x3D;&quot;showInfoBadge&quot;
        class&#x3D;&quot;absolute top-4 right-4 bg-cta-default text-cta-text rounded-lg shadow-lg px-3 py-2 text-xs font-medium z-20&quot;
      &gt;
        Datos de comunidad Waze
      &lt;/div&gt;
    &lt;/div&gt;
  &#x60;,
  styles: [
    &#x60;
      :host {
        display: block;
        width: 100%;
        height: 100%;
      }

      .waze-live-map-container {
        min-height: 400px;
      }

      iframe {
        display: block;
      }
    &#x60;,
  ],
})
export class WazeLiveMapComponent implements OnInit, OnChanges {
  @Input({ required: true }) lat!: number;
  @Input({ required: true }) lng!: number;
  @Input() zoom &#x3D; 14; // Default zoom level
  @Input() showPin &#x3D; true; // Show pin at location by default
  @Input() navigate &#x3D; false; // Don&#x27;t auto-navigate by default
  @Input() showInfoBadge &#x3D; false; // Show info badge

  private readonly platformId &#x3D; inject(PLATFORM_ID);
  private readonly sanitizer &#x3D; inject(DomSanitizer);
  private readonly isBrowser &#x3D; isPlatformBrowser(this.platformId);

  readonly isLoading &#x3D; signal(true);
  readonly hasError &#x3D; signal(false);

  readonly wazeMapUrl &#x3D; computed&lt;SafeResourceUrl | null&gt;(() &#x3D;&gt; {
    if (!this.isBrowser || !this.lat || !this.lng) {
      return null;
    }

    try {
      // Build Waze Live Map embed URL
      // Documentation: https://developers.google.com/waze/iframe
      const params &#x3D; new URLSearchParams({
        zoom: this.zoom.toString(),
        lat: this.lat.toString(),
        lon: this.lng.toString(), // Waze uses &#x27;lon&#x27; not &#x27;lng&#x27;
      });

      // Add pin if requested
      if (this.showPin) {
        params.append(&#x27;pin&#x27;, &#x27;1&#x27;);
      }

      // Add navigate if requested
      if (this.navigate) {
        params.append(&#x27;navigate&#x27;, &#x27;yes&#x27;);
      }

      const url &#x3D; &#x60;https://embed.waze.com/iframe?${params.toString()}&#x60;;

      return this.sanitizer.bypassSecurityTrustResourceUrl(url);
    } catch (error) {
      console.error(&#x27;[WazeLiveMap] Error building Waze URL:&#x27;, error);
      this.hasError.set(true);
      return null;
    }
  });

  ngOnInit(): void {
    if (!this.isBrowser) {
      this.isLoading.set(false);
      return;
    }

    // Validate inputs
    if (!this.lat || !this.lng) {
      console.warn(&#x27;[WazeLiveMap] Missing required lat/lng coordinates&#x27;);
      this.hasError.set(true);
      this.isLoading.set(false);
    }

    // Set timeout for loading state (fallback if iframe doesn&#x27;t load)
    setTimeout(() &#x3D;&gt; {
      if (this.isLoading()) {
        console.warn(&#x27;[WazeLiveMap] Map load timeout&#x27;);
        this.isLoading.set(false);
      }
    }, 10000); // 10 second timeout
  }

  ngOnChanges(changes: SimpleChanges): void {
    // Reset loading state when inputs change
    if (
      (changes[&#x27;lat&#x27;] &amp;&amp; !changes[&#x27;lat&#x27;].firstChange) ||
      (changes[&#x27;lng&#x27;] &amp;&amp; !changes[&#x27;lng&#x27;].firstChange) ||
      (changes[&#x27;zoom&#x27;] &amp;&amp; !changes[&#x27;zoom&#x27;].firstChange)
    ) {
      this.isLoading.set(true);
      this.hasError.set(false);
    }
  }

  onMapLoad(): void {
    this.isLoading.set(false);
    this.hasError.set(false);
    console.log(&#x27;[WazeLiveMap] Map loaded successfully&#x27;);
  }

  /**
   * Update map center coordinates
   * Useful for programmatic map updates
   */
  updateCenter(lat: number, lng: number): void {
    this.lat &#x3D; lat;
    this.lng &#x3D; lng;
    this.isLoading.set(true);
    this.hasError.set(false);
  }

  /**
   * Update zoom level
   */
  updateZoom(zoom: number): void {
    this.zoom &#x3D; Math.max(1, Math.min(20, zoom)); // Clamp between 1-20
    this.isLoading.set(true);
  }
}
</code></pre>
    </div>
</div>








                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'WazeMapOptions.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
