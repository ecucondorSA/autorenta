<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>autorenta-web documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">autorenta-web documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">












<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >NotificationsService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/core/services/user-notifications.service.ts</code>
        </p>





            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#authService" >authService</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#connectionStatus" >connectionStatus</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#isSubscribed" >isSubscribed</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#notifications" >notifications</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#realtimeChannel" >realtimeChannel</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#supabase" >supabase</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#unreadCount" >unreadCount</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#addNotification" >addNotification</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#createNotification" >createNotification</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#deleteAllRead" >deleteAllRead</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#deleteNotification" >deleteNotification</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#filterNotificationsByType" >filterNotificationsByType</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#initializeNotifications" >initializeNotifications</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#loadAllNotifications" >loadAllNotifications</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#loadNotifications" >loadNotifications</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#loadNotificationsInternal" >loadNotificationsInternal</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#mapNotification" >mapNotification</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#mapNotificationType" >mapNotificationType</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#mapNotificationWithDbType" >mapNotificationWithDbType</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#markAllAsRead" >markAllAsRead</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#markAsRead" >markAsRead</a>
                            </li>
                            <li>
                                <a href="#ngOnDestroy" >ngOnDestroy</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#notifyBookingCancelledForOwner" >notifyBookingCancelledForOwner</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#notifyBookingCancelledForRenter" >notifyBookingCancelledForRenter</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#notifyBookingCreated" >notifyBookingCreated</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#notifyGenericAnnouncement" >notifyGenericAnnouncement</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#notifyInspectionReminder" >notifyInspectionReminder</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#notifyNewBookingForOwner" >notifyNewBookingForOwner</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#notifyPaymentSuccessful" >notifyPaymentSuccessful</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#notifyPayoutSuccessful" >notifyPayoutSuccessful</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#reconnect" >reconnect</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#refresh" >refresh</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#requestNotificationPermission" >requestNotificationPermission</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#showBrowserNotification" >showBrowserNotification</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#subscribeToRealtime" >subscribeToRealtime</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#unsubscribe" >unsubscribe</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#updateUnreadCount" >updateUnreadCount</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor()</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="47" class="link-to-prism">src/app/core/services/user-notifications.service.ts:47</a></div>
                            </td>
                        </tr>

            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addNotification"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>addNotification</b></span>
                        <a href="#addNotification"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addNotification(notificationData: <a href="../interfaces/NotificationRow.html" target="_self">NotificationRow</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="236"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:236</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>notificationData</td>
                                            <td>
                                                            <code><a href="../interfaces/NotificationRow.html" target="_self" >NotificationRow</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createNotification"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>createNotification</b></span>
                        <a href="#createNotification"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createNotification(userId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, notification: <a href="../interfaces/NotificationItem.html" target="_self">Omit&lt;NotificationItem | &quot;id&quot; | &quot;read&quot; | &quot;createdAt&quot;&gt;</a>, dbType: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="378"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:378</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>userId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>notification</td>
                                            <td>
                                                            <code><a href="../interfaces/NotificationItem.html" target="_self" >Omit&lt;NotificationItem | &quot;id&quot; | &quot;read&quot; | &quot;createdAt&quot;&gt;</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>dbType</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteAllRead"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>deleteAllRead</b></span>
                        <a href="#deleteAllRead"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteAllRead()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="644"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:644</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteNotification"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>deleteNotification</b></span>
                        <a href="#deleteNotification"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteNotification(notificationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="627"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:627</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>notificationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="filterNotificationsByType"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>filterNotificationsByType</b></span>
                        <a href="#filterNotificationsByType"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>filterNotificationsByType(dbType?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="599"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:599</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>dbType</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="initializeNotifications"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>initializeNotifications</b></span>
                        <a href="#initializeNotifications"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>initializeNotifications()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="73"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:73</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Inicializa notificaciones cuando el usuario está autenticado</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadAllNotifications"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>loadAllNotifications</b></span>
                        <a href="#loadAllNotifications"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadAllNotifications(limit?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, offset?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="572"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:572</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>limit</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>offset</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadNotifications"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>loadNotifications</b></span>
                        <a href="#loadNotifications"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadNotifications()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="91"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:91</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Método público para cargar notificaciones</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadNotificationsInternal"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>loadNotificationsInternal</b></span>
                        <a href="#loadNotificationsInternal"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadNotificationsInternal()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="95"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:95</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mapNotification"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>mapNotification</b></span>
                        <a href="#mapNotification"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>mapNotification(notification: <a href="../interfaces/NotificationRow.html" target="_self">NotificationRow</a>, preserveReadState: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="247"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:247</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>notification</td>
                                            <td>
                                                            <code><a href="../interfaces/NotificationRow.html" target="_self" >NotificationRow</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>preserveReadState</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>true</code>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/NotificationItem.html" target="_self" >NotificationItem</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mapNotificationType"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>mapNotificationType</b></span>
                        <a href="#mapNotificationType"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>mapNotificationType(dbType: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="272"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:272</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>dbType</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>&quot;info&quot; | &quot;success&quot; | &quot;warning&quot; | &quot;error&quot;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mapNotificationWithDbType"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>mapNotificationWithDbType</b></span>
                        <a href="#mapNotificationWithDbType"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>mapNotificationWithDbType(notification: <a href="../interfaces/NotificationRow.html" target="_self">NotificationRow</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="264"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:264</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>notification</td>
                                            <td>
                                                            <code><a href="../interfaces/NotificationRow.html" target="_self" >NotificationRow</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../miscellaneous/typealiases.html#NotificationListItem" target="_self" >NotificationListItem</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="markAllAsRead"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>markAllAsRead</b></span>
                        <a href="#markAllAsRead"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>markAllAsRead()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="313"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:313</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="markAsRead"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>markAsRead</b></span>
                        <a href="#markAsRead"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>markAsRead(notificationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="294"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:294</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>notificationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnDestroy"></a>
                    <span class="name">
                        <span ><b>ngOnDestroy</b></span>
                        <a href="#ngOnDestroy"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnDestroy()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="66"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:66</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="notifyBookingCancelledForOwner"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>notifyBookingCancelledForOwner</b></span>
                        <a href="#notifyBookingCancelledForOwner"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>notifyBookingCancelledForOwner(bookingId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, carTitle: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, renterName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="448"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:448</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>bookingId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>carTitle</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>renterName</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="notifyBookingCancelledForRenter"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>notifyBookingCancelledForRenter</b></span>
                        <a href="#notifyBookingCancelledForRenter"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>notifyBookingCancelledForRenter(bookingId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, carTitle: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, ownerName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="467"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:467</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>bookingId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>carTitle</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>ownerName</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="notifyBookingCreated"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>notifyBookingCreated</b></span>
                        <a href="#notifyBookingCreated"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>notifyBookingCreated(bookingId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, carTitle: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="429"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:429</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>bookingId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>carTitle</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="notifyGenericAnnouncement"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>notifyGenericAnnouncement</b></span>
                        <a href="#notifyGenericAnnouncement"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>notifyGenericAnnouncement(title: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, message: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, actionUrl?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="552"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:552</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>title</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>message</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>actionUrl</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="notifyInspectionReminder"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>notifyInspectionReminder</b></span>
                        <a href="#notifyInspectionReminder"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>notifyInspectionReminder(bookingId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, carTitle: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, inspectionType: "pickup" | "return")</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="524"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:524</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>bookingId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>carTitle</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>inspectionType</td>
                                            <td>
                                                        <code>&quot;pickup&quot; | &quot;return&quot;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="notifyNewBookingForOwner"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>notifyNewBookingForOwner</b></span>
                        <a href="#notifyNewBookingForOwner"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>notifyNewBookingForOwner(bookingId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, carTitle: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, renterName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="410"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:410</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>bookingId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>carTitle</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>renterName</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="notifyPaymentSuccessful"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>notifyPaymentSuccessful</b></span>
                        <a href="#notifyPaymentSuccessful"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>notifyPaymentSuccessful(amount: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, currency: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, bookingId?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="486"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:486</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>amount</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>currency</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>&#x27;ARS&#x27;</code>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>bookingId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="notifyPayoutSuccessful"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>notifyPayoutSuccessful</b></span>
                        <a href="#notifyPayoutSuccessful"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>notifyPayoutSuccessful(amount: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, currency: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="505"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:505</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>amount</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>currency</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>&#x27;ARS&#x27;</code>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="reconnect"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>reconnect</b></span>
                        <a href="#reconnect"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>reconnect()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="230"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:230</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Reconectar manualmente a Realtime</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="refresh"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>refresh</b></span>
                        <a href="#refresh"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>refresh()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="84"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:84</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Método público para refrescar notificaciones manualmente</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="requestNotificationPermission"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>requestNotificationPermission</b></span>
                        <a href="#requestNotificationPermission"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>requestNotificationPermission()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="360"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:360</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showBrowserNotification"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>showBrowserNotification</b></span>
                        <a href="#showBrowserNotification"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>showBrowserNotification(notification: <a href="../interfaces/NotificationItem.html" target="_self">NotificationItem</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="339"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:339</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>notification</td>
                                            <td>
                                                            <code><a href="../interfaces/NotificationItem.html" target="_self" >NotificationItem</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="subscribeToRealtime"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>subscribeToRealtime</b></span>
                        <a href="#subscribeToRealtime"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>subscribeToRealtime()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="127"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:127</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Suscribirse a cambios en tiempo real de notificaciones
Maneja reconexión automática y estado de conexión</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="unsubscribe"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>unsubscribe</b></span>
                        <a href="#unsubscribe"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>unsubscribe()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="217"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:217</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Desuscribirse del channel de Realtime</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateUnreadCount"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>updateUnreadCount</b></span>
                        <a href="#updateUnreadCount"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateUnreadCount()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="289"
                                    class="link-to-prism">src/app/core/services/user-notifications.service.ts:289</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="authService"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>authService</b></span>
                        <a href="#authService"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(AuthService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="36" class="link-to-prism">src/app/core/services/user-notifications.service.ts:36</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="connectionStatus"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>connectionStatus</b></span>
                        <a href="#connectionStatus"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;&#x27;disconnected&#x27; | &#x27;connecting&#x27; | &#x27;connected&#x27; | &#x27;error&#x27;&gt;(
    &#x27;disconnected&#x27;,
  )</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="41" class="link-to-prism">src/app/core/services/user-notifications.service.ts:41</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isSubscribed"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>isSubscribed</b></span>
                        <a href="#isSubscribed"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="47" class="link-to-prism">src/app/core/services/user-notifications.service.ts:47</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="notifications"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>notifications</b></span>
                        <a href="#notifications"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;NotificationItem[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="39" class="link-to-prism">src/app/core/services/user-notifications.service.ts:39</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="realtimeChannel"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>realtimeChannel</b></span>
                        <a href="#realtimeChannel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>RealtimeChannel | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="46" class="link-to-prism">src/app/core/services/user-notifications.service.ts:46</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="supabase"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>supabase</b></span>
                        <a href="#supabase"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>injectSupabase()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="35" class="link-to-prism">src/app/core/services/user-notifications.service.ts:35</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="unreadCount"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>unreadCount</b></span>
                        <a href="#unreadCount"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(0)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="40" class="link-to-prism">src/app/core/services/user-notifications.service.ts:40</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable, signal, inject, OnDestroy, effect } from &#x27;@angular/core&#x27;;
import type { RealtimeChannel, RealtimePostgresInsertPayload } from &#x27;@supabase/supabase-js&#x27;;
import { injectSupabase } from &#x27;./supabase-client.service&#x27;;
import { AuthService } from &#x27;./auth.service&#x27;;

export interface NotificationItem {
  id: string;
  title: string;
  message: string;
  type: &#x27;info&#x27; | &#x27;success&#x27; | &#x27;warning&#x27; | &#x27;error&#x27;;
  read: boolean;
  createdAt: Date;
  actionUrl?: string;
  actionText?: string;
  metadata?: Record&lt;string, unknown&gt;;
}

interface NotificationRow {
  id: string;
  title: string;
  body: string;
  type: string;
  is_read: boolean;
  created_at: string;
  cta_link?: string | null;
  metadata?: Record&lt;string, unknown&gt; | null;
}

type NotificationListItem &#x3D; NotificationItem &amp; { dbType: string };

@Injectable({
  providedIn: &#x27;root&#x27;,
})
export class NotificationsService implements OnDestroy {
  private readonly supabase &#x3D; injectSupabase();
  private readonly authService &#x3D; inject(AuthService);

  // Estado reactivo
  readonly notifications &#x3D; signal&lt;NotificationItem[]&gt;([]);
  readonly unreadCount &#x3D; signal(0);
  readonly connectionStatus &#x3D; signal&lt;&#x27;disconnected&#x27; | &#x27;connecting&#x27; | &#x27;connected&#x27; | &#x27;error&#x27;&gt;(
    &#x27;disconnected&#x27;,
  );

  // Referencia al channel de Realtime para poder hacer cleanup
  private realtimeChannel: RealtimeChannel | null &#x3D; null;
  private isSubscribed &#x3D; false;

  constructor() {
    // Efecto reactivo: suscribirse cuando el usuario se autentica
    effect(() &#x3D;&gt; {
      const isAuthenticated &#x3D; this.authService.isAuthenticated();

      if (isAuthenticated) {
        // Usuario autenticado: cargar notificaciones y suscribirse
        void this.initializeNotifications();
      } else {
        // Usuario no autenticado: limpiar suscripción
        this.unsubscribe();
        this.notifications.set([]);
        this.unreadCount.set(0);
      }
    });
  }

  ngOnDestroy(): void {
    this.unsubscribe();
  }

  /**
   * Inicializa notificaciones cuando el usuario está autenticado
   */
  private async initializeNotifications(): Promise&lt;void&gt; {
    // Cargar notificaciones existentes
    await this.loadNotificationsInternal();

    // Suscribirse a cambios en tiempo real
    await this.subscribeToRealtime();
  }

  /**
   * Método público para refrescar notificaciones manualmente
   */
  async refresh(): Promise&lt;void&gt; {
    await this.loadNotifications();
  }

  /**
   * Método público para cargar notificaciones
   */
  async loadNotifications(): Promise&lt;void&gt; {
    await this.loadNotificationsInternal();
  }

  private async loadNotificationsInternal() {
    try {
      const {
        data: { user },
      } &#x3D; await this.supabase.auth.getUser();
      if (!user) return;

      const { data, error } &#x3D; await this.supabase
        .from(&#x27;notifications&#x27;)
        .select(&#x27;*&#x27;)
        .eq(&#x27;user_id&#x27;, user.id)
        .order(&#x27;created_at&#x27;, { ascending: false })
        .limit(50)
        .returns&lt;NotificationRow[]&gt;();

      if (error) throw error as Error;

      const notifications: NotificationItem[] &#x3D; (data || []).map((notification) &#x3D;&gt;
        this.mapNotification(notification),
      );

      this.notifications.set(notifications);
      this.updateUnreadCount();
    } catch (_error) {
      console.error(&#x27;Error loading notifications:&#x27;, _error);
    }
  }

  /**
   * Suscribirse a cambios en tiempo real de notificaciones
   * Maneja reconexión automática y estado de conexión
   */
  private async subscribeToRealtime(): Promise&lt;void&gt; {
    try {
      const {
        data: { user },
      } &#x3D; await this.supabase.auth.getUser();

      if (!user) {
        console.warn(&#x27;[NotificationsService] No user found, skipping Realtime subscription&#x27;);
        this.connectionStatus.set(&#x27;disconnected&#x27;);
        return;
      }

      // Limpiar suscripción anterior si existe
      if (this.realtimeChannel) {
        this.unsubscribe();
      }

      this.connectionStatus.set(&#x27;connecting&#x27;);
      console.log(
        &#x27;[NotificationsService] Subscribing to Realtime notifications for user:&#x27;,
        user.id,
      );

      // Crear nuevo channel
      this.realtimeChannel &#x3D; this.supabase
        .channel(&#x60;notifications:${user.id}&#x60;)
        .on(
          &#x27;postgres_changes&#x27;,
          {
            event: &#x27;INSERT&#x27;,
            schema: &#x27;public&#x27;,
            table: &#x27;notifications&#x27;,
            filter: &#x60;user_id&#x3D;eq.${user.id}&#x60;,
          },
          (payload: RealtimePostgresInsertPayload&lt;NotificationRow&gt;) &#x3D;&gt; {
            console.log(&#x27;[NotificationsService] New notification received via Realtime:&#x27;, payload);
            this.addNotification(payload.new);
          },
        )
        .subscribe((status) &#x3D;&gt; {
          console.log(&#x27;[NotificationsService] Realtime subscription status:&#x27;, status);

          if (status &#x3D;&#x3D;&#x3D; &#x27;SUBSCRIBED&#x27;) {
            this.connectionStatus.set(&#x27;connected&#x27;);
            this.isSubscribed &#x3D; true;
            console.log(
              &#x27;[NotificationsService] ✅ Successfully subscribed to Realtime notifications&#x27;,
            );
          } else if (status &#x3D;&#x3D;&#x3D; &#x27;CHANNEL_ERROR&#x27;) {
            this.connectionStatus.set(&#x27;error&#x27;);
            this.isSubscribed &#x3D; false;
            console.error(&#x27;[NotificationsService] ❌ Realtime channel error&#x27;);

            // Intentar reconectar después de 5 segundos
            setTimeout(() &#x3D;&gt; {
              console.log(&#x27;[NotificationsService] Attempting to reconnect...&#x27;);
              void this.subscribeToRealtime();
            }, 5000);
          } else if (status &#x3D;&#x3D;&#x3D; &#x27;TIMED_OUT&#x27;) {
            this.connectionStatus.set(&#x27;error&#x27;);
            this.isSubscribed &#x3D; false;
            console.warn(&#x27;[NotificationsService] ⚠️ Realtime subscription timed out&#x27;);

            // Intentar reconectar después de 5 segundos
            setTimeout(() &#x3D;&gt; {
              console.log(&#x27;[NotificationsService] Attempting to reconnect after timeout...&#x27;);
              void this.subscribeToRealtime();
            }, 5000);
          } else if (status &#x3D;&#x3D;&#x3D; &#x27;CLOSED&#x27;) {
            this.connectionStatus.set(&#x27;disconnected&#x27;);
            this.isSubscribed &#x3D; false;
            console.log(&#x27;[NotificationsService] Realtime channel closed&#x27;);
          }
        });
    } catch (error) {
      console.error(&#x27;[NotificationsService] Error subscribing to Realtime:&#x27;, error);
      this.connectionStatus.set(&#x27;error&#x27;);
      this.isSubscribed &#x3D; false;

      // Intentar reconectar después de 5 segundos
      setTimeout(() &#x3D;&gt; {
        console.log(&#x27;[NotificationsService] Attempting to reconnect after error...&#x27;);
        void this.subscribeToRealtime();
      }, 5000);
    }
  }

  /**
   * Desuscribirse del channel de Realtime
   */
  private unsubscribe(): void {
    if (this.realtimeChannel) {
      console.log(&#x27;[NotificationsService] Unsubscribing from Realtime notifications&#x27;);
      this.supabase.removeChannel(this.realtimeChannel);
      this.realtimeChannel &#x3D; null;
      this.isSubscribed &#x3D; false;
      this.connectionStatus.set(&#x27;disconnected&#x27;);
    }
  }

  /**
   * Reconectar manualmente a Realtime
   */
  async reconnect(): Promise&lt;void&gt; {
    console.log(&#x27;[NotificationsService] Manual reconnect requested&#x27;);
    this.unsubscribe();
    await this.subscribeToRealtime();
  }

  private addNotification(notificationData: NotificationRow) {
    const notification &#x3D; this.mapNotification(notificationData, false);

    const current &#x3D; this.notifications();
    this.notifications.set([notification, ...current]);
    this.updateUnreadCount();

    // Mostrar notificación push si está disponible
    this.showBrowserNotification(notification);
  }

  private mapNotification(
    notification: NotificationRow,
    preserveReadState: boolean &#x3D; true,
  ): NotificationItem {
    return {
      id: notification.id,
      title: notification.title,
      message: notification.body,
      type: this.mapNotificationType(notification.type),
      read: preserveReadState ? (notification.is_read ?? false) : false,
      createdAt: new Date(notification.created_at),
      actionUrl: notification.cta_link ?? undefined,
      actionText: &#x27;Ver detalles&#x27;,
      metadata: notification.metadata ?? undefined,
    };
  }

  private mapNotificationWithDbType(notification: NotificationRow): NotificationListItem {
    return {
      ...this.mapNotification(notification),
      dbType: notification.type,
    };
  }

  // Map database notification types to UI types
  private mapNotificationType(dbType: string): &#x27;info&#x27; | &#x27;success&#x27; | &#x27;warning&#x27; | &#x27;error&#x27; {
    switch (dbType) {
      case &#x27;new_booking_for_owner&#x27;:
      case &#x27;payment_successful&#x27;:
      case &#x27;payout_successful&#x27;:
        return &#x27;success&#x27;;
      case &#x27;booking_cancelled_for_owner&#x27;:
      case &#x27;booking_cancelled_for_renter&#x27;:
      case &#x27;inspection_reminder&#x27;:
        return &#x27;warning&#x27;;
      case &#x27;new_chat_message&#x27;:
      case &#x27;generic_announcement&#x27;:
      default:
        return &#x27;info&#x27;;
    }
  }

  private updateUnreadCount() {
    const unread &#x3D; this.notifications().filter((n) &#x3D;&gt; !n.read).length;
    this.unreadCount.set(unread);
  }

  async markAsRead(notificationId: string) {
    try {
      const { error } &#x3D; await this.supabase
        .from(&#x27;notifications&#x27;)
        .update({ is_read: true })
        .eq(&#x27;id&#x27;, notificationId);

      if (error) throw error as Error;

      // Actualizar estado local
      const current &#x3D; this.notifications();
      const updated &#x3D; current.map((n) &#x3D;&gt; (n.id &#x3D;&#x3D;&#x3D; notificationId ? { ...n, read: true } : n));
      this.notifications.set(updated);
      this.updateUnreadCount();
    } catch (_error) {
      console.error(&#x27;Error marking notification as read:&#x27;, _error);
    }
  }

  async markAllAsRead() {
    try {
      const {
        data: { user },
      } &#x3D; await this.supabase.auth.getUser();
      if (!user) return;

      const { error } &#x3D; await this.supabase
        .from(&#x27;notifications&#x27;)
        .update({ is_read: true })
        .eq(&#x27;user_id&#x27;, user.id)
        .eq(&#x27;is_read&#x27;, false);

      if (error) throw error as Error;

      // Actualizar estado local
      const current &#x3D; this.notifications();
      const updated &#x3D; current.map((n) &#x3D;&gt; ({ ...n, read: true }));
      this.notifications.set(updated);
      this.unreadCount.set(0);
    } catch (_error) {
      console.error(&#x27;Error marking all notifications as read:&#x27;, _error);
    }
  }

  // Notificaciones push del navegador
  private async showBrowserNotification(notification: NotificationItem) {
    if (&#x27;Notification&#x27; in window &amp;&amp; Notification.permission &#x3D;&#x3D;&#x3D; &#x27;granted&#x27;) {
      const browserNotification &#x3D; new Notification(notification.title, {
        body: notification.message,
        icon: &#x27;/assets/icons/icon-192x192.png&#x27;,
        badge: &#x27;/assets/icons/icon-192x192.png&#x27;,
        tag: notification.id,
      });

      browserNotification.onclick &#x3D; () &#x3D;&gt; {
        if (notification.actionUrl) {
          window.location.href &#x3D; notification.actionUrl;
        }
        browserNotification.close();
      };

      // Auto-close después de 5 segundos
      setTimeout(() &#x3D;&gt; browserNotification.close(), 5000);
    }
  }

  async requestNotificationPermission(): Promise&lt;boolean&gt; {
    if (!(&#x27;Notification&#x27; in window)) {
      return false;
    }

    if (Notification.permission &#x3D;&#x3D;&#x3D; &#x27;granted&#x27;) {
      return true;
    }

    if (Notification.permission &#x3D;&#x3D;&#x3D; &#x27;denied&#x27;) {
      return false;
    }

    const permission &#x3D; await Notification.requestPermission();
    return permission &#x3D;&#x3D;&#x3D; &#x27;granted&#x27;;
  }

  // Métodos para crear notificaciones (desde backend)
  async createNotification(
    userId: string,
    notification: Omit&lt;NotificationItem, &#x27;id&#x27; | &#x27;read&#x27; | &#x27;createdAt&#x27;&gt;,
    dbType: string,
  ) {
    try {
      const { data, error } &#x3D; await this.supabase
        .from(&#x27;notifications&#x27;)
        .insert({
          user_id: userId,
          title: notification.title,
          body: notification.message,
          type: dbType,
          is_read: false,
          cta_link: notification.actionUrl || null,
          metadata: notification.metadata || {},
        })
        .select(&#x27;*&#x27;)
        .single();

      if (error) throw error as Error;
      if (data) {
        this.addNotification(data as NotificationRow);
      }
      return data as NotificationRow;
    } catch (_error) {
      console.error(&#x27;Error creating notification:&#x27;, _error);
      throw _error as Error;
    }
  }

  // Notificaciones predefinidas
  async notifyNewBookingForOwner(bookingId: string, carTitle: string, renterName: string) {
    const {
      data: { user },
    } &#x3D; await this.supabase.auth.getUser();
    if (!user) return;

    return this.createNotification(
      user.id,
      {
        title: &#x27;Nueva reserva recibida&#x27;,
        message: &#x60;${renterName} solicitó reservar tu ${carTitle}&#x60;,
        type: &#x27;success&#x27;,
        actionUrl: &#x60;/bookings/${bookingId}&#x60;,
        metadata: { bookingId, renterName, carTitle },
      },
      &#x27;new_booking_for_owner&#x27;,
    );
  }

  async notifyBookingCreated(bookingId: string, carTitle: string) {
    const {
      data: { user },
    } &#x3D; await this.supabase.auth.getUser();
    if (!user) return;

    return this.createNotification(
      user.id,
      {
        title: &#x27;Reserva creada&#x27;,
        message: &#x60;Tu solicitud de reserva para ${carTitle} ha sido enviada&#x60;,
        type: &#x27;success&#x27;,
        actionUrl: &#x60;/bookings/${bookingId}&#x60;,
        metadata: { bookingId, carTitle },
      },
      &#x27;booking_created&#x27;,
    );
  }

  async notifyBookingCancelledForOwner(bookingId: string, carTitle: string, renterName: string) {
    const {
      data: { user },
    } &#x3D; await this.supabase.auth.getUser();
    if (!user) return;

    return this.createNotification(
      user.id,
      {
        title: &#x27;Reserva cancelada&#x27;,
        message: &#x60;${renterName} canceló la reserva de tu ${carTitle}&#x60;,
        type: &#x27;warning&#x27;,
        actionUrl: &#x60;/bookings/${bookingId}&#x60;,
        metadata: { bookingId, renterName, carTitle },
      },
      &#x27;booking_cancelled_for_owner&#x27;,
    );
  }

  async notifyBookingCancelledForRenter(bookingId: string, carTitle: string, ownerName: string) {
    const {
      data: { user },
    } &#x3D; await this.supabase.auth.getUser();
    if (!user) return;

    return this.createNotification(
      user.id,
      {
        title: &#x27;Reserva cancelada&#x27;,
        message: &#x60;El anfitrión ${ownerName} canceló tu reserva para ${carTitle}&#x60;,
        type: &#x27;warning&#x27;,
        actionUrl: &#x60;/bookings/${bookingId}&#x60;,
        metadata: { bookingId, ownerName, carTitle },
      },
      &#x27;booking_cancelled_for_renter&#x27;,
    );
  }

  async notifyPaymentSuccessful(amount: number, currency: string &#x3D; &#x27;ARS&#x27;, bookingId?: string) {
    const {
      data: { user },
    } &#x3D; await this.supabase.auth.getUser();
    if (!user) return;

    return this.createNotification(
      user.id,
      {
        title: &#x27;Pago exitoso&#x27;,
        message: &#x60;Tu pago de ${amount.toLocaleString()} ${currency} fue procesado correctamente&#x60;,
        type: &#x27;success&#x27;,
        actionUrl: bookingId ? &#x60;/bookings/${bookingId}&#x60; : &#x27;/wallet&#x27;,
        metadata: { amount, currency, bookingId },
      },
      &#x27;payment_successful&#x27;,
    );
  }

  async notifyPayoutSuccessful(amount: number, currency: string &#x3D; &#x27;ARS&#x27;) {
    const {
      data: { user },
    } &#x3D; await this.supabase.auth.getUser();
    if (!user) return;

    return this.createNotification(
      user.id,
      {
        title: &#x27;Pago recibido&#x27;,
        message: &#x60;Se acreditaron ${amount.toLocaleString()} ${currency} en tu wallet&#x60;,
        type: &#x27;success&#x27;,
        actionUrl: &#x27;/wallet&#x27;,
        metadata: { amount, currency },
      },
      &#x27;payout_successful&#x27;,
    );
  }

  async notifyInspectionReminder(
    bookingId: string,
    carTitle: string,
    inspectionType: &#x27;pickup&#x27; | &#x27;return&#x27;,
  ) {
    const {
      data: { user },
    } &#x3D; await this.supabase.auth.getUser();
    if (!user) return;

    const message &#x3D;
      inspectionType &#x3D;&#x3D;&#x3D; &#x27;pickup&#x27;
        ? &#x60;Recuerda realizar la inspección de recogida para ${carTitle}&#x60;
        : &#x60;Recuerda realizar la inspección de devolución para ${carTitle}&#x60;;

    return this.createNotification(
      user.id,
      {
        title: &#x27;Recordatorio de inspección&#x27;,
        message,
        type: &#x27;warning&#x27;,
        actionUrl: &#x60;/bookings/${bookingId}&#x60;,
        metadata: { bookingId, carTitle, inspectionType },
      },
      &#x27;inspection_reminder&#x27;,
    );
  }

  async notifyGenericAnnouncement(title: string, message: string, actionUrl?: string) {
    const {
      data: { user },
    } &#x3D; await this.supabase.auth.getUser();
    if (!user) return;

    return this.createNotification(
      user.id,
      {
        title,
        message,
        type: &#x27;info&#x27;,
        actionUrl,
        metadata: {},
      },
      &#x27;generic_announcement&#x27;,
    );
  }

  // Additional methods for notifications page
  async loadAllNotifications(limit?: number, offset?: number) {
    try {
      const {
        data: { user },
      } &#x3D; await this.supabase.auth.getUser();
      if (!user) return [];

      let query &#x3D; this.supabase
        .from(&#x27;notifications&#x27;)
        .select(&#x27;*&#x27;)
        .eq(&#x27;user_id&#x27;, user.id)
        .order(&#x27;created_at&#x27;, { ascending: false });

      if (limit) query &#x3D; query.limit(limit);
      if (offset) query &#x3D; query.range(offset, offset + (limit || 50) - 1);

      const { data, error } &#x3D; await query.returns&lt;NotificationRow[]&gt;();

      if (error) throw error as Error;

      return (data || []).map((notification) &#x3D;&gt; this.mapNotificationWithDbType(notification));
    } catch (_error) {
      console.error(&#x27;Error loading all notifications:&#x27;, _error);
      return [];
    }
  }

  async filterNotificationsByType(dbType?: string) {
    try {
      const {
        data: { user },
      } &#x3D; await this.supabase.auth.getUser();
      if (!user) return [];

      let query &#x3D; this.supabase
        .from(&#x27;notifications&#x27;)
        .select(&#x27;*&#x27;)
        .eq(&#x27;user_id&#x27;, user.id)
        .order(&#x27;created_at&#x27;, { ascending: false });

      if (dbType &amp;&amp; dbType !&#x3D;&#x3D; &#x27;all&#x27;) {
        query &#x3D; query.eq(&#x27;type&#x27;, dbType);
      }

      const { data, error } &#x3D; await query.returns&lt;NotificationRow[]&gt;();

      if (error) throw error as Error;

      return (data || []).map((notification) &#x3D;&gt; this.mapNotificationWithDbType(notification));
    } catch (_error) {
      console.error(&#x27;Error filtering notifications:&#x27;, _error);
      return [];
    }
  }

  async deleteNotification(notificationId: string) {
    try {
      const { error } &#x3D; await this.supabase.from(&#x27;notifications&#x27;).delete().eq(&#x27;id&#x27;, notificationId);

      if (error) throw error as Error;

      // Update local state
      const current &#x3D; this.notifications();
      const updated &#x3D; current.filter((n) &#x3D;&gt; n.id !&#x3D;&#x3D; notificationId);
      this.notifications.set(updated);
      this.updateUnreadCount();
    } catch (_error) {
      console.error(&#x27;Error deleting notification:&#x27;, _error);
      throw _error as Error;
    }
  }

  async deleteAllRead() {
    try {
      const {
        data: { user },
      } &#x3D; await this.supabase.auth.getUser();
      if (!user) return;

      const { error } &#x3D; await this.supabase
        .from(&#x27;notifications&#x27;)
        .delete()
        .eq(&#x27;user_id&#x27;, user.id)
        .eq(&#x27;is_read&#x27;, true);

      if (error) throw error as Error;

      // Update local state
      const current &#x3D; this.notifications();
      const updated &#x3D; current.filter((n) &#x3D;&gt; !n.read);
      this.notifications.set(updated);
    } catch (_error) {
      console.error(&#x27;Error deleting read notifications:&#x27;, _error);
      throw _error as Error;
    }
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'NotificationsService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
