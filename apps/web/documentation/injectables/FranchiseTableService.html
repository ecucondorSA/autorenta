<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>autorenta-web documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">autorenta-web documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">












<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >FranchiseTableService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/core/services/franchise-table.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Servicio de Tabla de Franquicias (Argentina)</p>
<p>Maneja las franquicias estándar y por vuelco (rollover) según el valor del auto.</p>
<p>Bandas de valor (USD):</p>
<ul>
<li>≤10,000: USD 500 estándar</li>
<li>10,001-20,000: USD 800 estándar</li>
<li>20,001-40,000: USD 1,200 estándar</li>
<li><blockquote>
<p>40,000: USD 1,800 estándar</p>
</blockquote>
</li>
</ul>
<p>Rollover: 2.0× de la franquicia estándar</p>
<p>Hold con tarjeta: max(min_bucket_ars, 0.35 × rollover_deductible_usd × FX)</p>

            </p>



            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#FRANCHISE_BANDS" >FRANCHISE_BANDS</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#HOLD_PERCENTAGE" >HOLD_PERCENTAGE</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#MIN_HOLD_ARS" >MIN_HOLD_ARS</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#ROLLOVER_MULTIPLIER" >ROLLOVER_MULTIPLIER</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#calculateHoldArs" >calculateHoldArs</a>
                            </li>
                            <li>
                                <a href="#formatArs" >formatArs</a>
                            </li>
                            <li>
                                <a href="#formatUsd" >formatUsd</a>
                            </li>
                            <li>
                                <a href="#getFranchiseInfo" >getFranchiseInfo</a>
                            </li>
                            <li>
                                <a href="#getRolloverFranchiseUsd" >getRolloverFranchiseUsd</a>
                            </li>
                            <li>
                                <a href="#getSecurityCreditUsd" >getSecurityCreditUsd</a>
                            </li>
                            <li>
                                <a href="#getStandardFranchiseUsd" >getStandardFranchiseUsd</a>
                            </li>
                            <li>
                                <a href="#shouldRevalidate" >shouldRevalidate</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>


            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="calculateHoldArs"></a>
                    <span class="name">
                        <span ><b>calculateHoldArs</b></span>
                        <a href="#calculateHoldArs"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>calculateHoldArs(carValueUsd: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, bucket: "economy" | "standard" | "premium" | "luxury" | "ultra-luxury", fxRate: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="78"
                                    class="link-to-prism">src/app/core/services/franchise-table.service.ts:78</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Calcula el hold estimado en ARS para una reserva con tarjeta</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>carValueUsd</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>Valor del auto en USD</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>bucket</td>
                                            <td>
                                                        <code>&quot;economy&quot; | &quot;standard&quot; | &quot;premium&quot; | &quot;luxury&quot; | &quot;ultra-luxury&quot;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>Bucket del auto (economy, standard, premium, luxury, ultra-luxury)</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>fxRate</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>Tasa de cambio USD → ARS</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                            <div class="io-description">
                                <p>Hold estimado en ARS</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="formatArs"></a>
                    <span class="name">
                        <span ><b>formatArs</b></span>
                        <a href="#formatArs"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>formatArs(amountArs: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="146"
                                    class="link-to-prism">src/app/core/services/franchise-table.service.ts:146</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Formatea un monto en ARS para mostrar en UI</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>amountArs</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="formatUsd"></a>
                    <span class="name">
                        <span ><b>formatUsd</b></span>
                        <a href="#formatUsd"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>formatUsd(amountUsd: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="158"
                                    class="link-to-prism">src/app/core/services/franchise-table.service.ts:158</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Formatea un monto en USD para mostrar en UI</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>amountUsd</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFranchiseInfo"></a>
                    <span class="name">
                        <span ><b>getFranchiseInfo</b></span>
                        <a href="#getFranchiseInfo"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getFranchiseInfo(carValueUsd: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, bucket: "economy" | "standard" | "premium" | "luxury" | "ultra-luxury", fxRate: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="107"
                                    class="link-to-prism">src/app/core/services/franchise-table.service.ts:107</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Obtiene información completa de franquicias para un auto</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>carValueUsd</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>bucket</td>
                                            <td>
                                                        <code>&quot;economy&quot; | &quot;standard&quot; | &quot;premium&quot; | &quot;luxury&quot; | &quot;ultra-luxury&quot;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>fxRate</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>literal type</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getRolloverFranchiseUsd"></a>
                    <span class="name">
                        <span ><b>getRolloverFranchiseUsd</b></span>
                        <a href="#getRolloverFranchiseUsd"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getRolloverFranchiseUsd(carValueUsd: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="65"
                                    class="link-to-prism">src/app/core/services/franchise-table.service.ts:65</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Obtiene la franquicia por vuelco (rollover) en USD</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>carValueUsd</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getSecurityCreditUsd"></a>
                    <span class="name">
                        <span ><b>getSecurityCreditUsd</b></span>
                        <a href="#getSecurityCreditUsd"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getSecurityCreditUsd(carValueUsd: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="96"
                                    class="link-to-prism">src/app/core/services/franchise-table.service.ts:96</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Obtiene el monto de Crédito de Seguridad en USD para reservas sin tarjeta</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>carValueUsd</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>Valor del auto en USD</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                            <div class="io-description">
                                <p>Crédito de Seguridad en USD</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getStandardFranchiseUsd"></a>
                    <span class="name">
                        <span ><b>getStandardFranchiseUsd</b></span>
                        <a href="#getStandardFranchiseUsd"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getStandardFranchiseUsd(carValueUsd: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="57"
                                    class="link-to-prism">src/app/core/services/franchise-table.service.ts:57</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Obtiene la franquicia estándar en USD según el valor del auto</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>carValueUsd</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="shouldRevalidate"></a>
                    <span class="name">
                        <span ><b>shouldRevalidate</b></span>
                        <a href="#shouldRevalidate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>shouldRevalidate(oldFx: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, newFx: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, daysSinceSnapshot: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="135"
                                    class="link-to-prism">src/app/core/services/franchise-table.service.ts:135</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Revalida si el hold debe recalcularse por variación de FX o tiempo transcurrido</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>oldFx</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>FX snapshot original</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>newFx</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>FX actual</li>
</ul>

                                            </td>
                                        </tr>
                                        <tr>
                                                <td>daysSinceSnapshot</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <ul>
<li>Días desde el snapshot original</li>
</ul>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </div>
                            <div class="io-description">
                                <p>true si debe revalidarse</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="FRANCHISE_BANDS"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>FRANCHISE_BANDS</b></span>
                        <a href="#FRANCHISE_BANDS"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[
    { maxValue: 10000, standardUsd: 500 },
    { maxValue: 20000, standardUsd: 800 },
    { maxValue: 40000, standardUsd: 1200 },
    { maxValue: Infinity, standardUsd: 1800 },
  ]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="25" class="link-to-prism">src/app/core/services/franchise-table.service.ts:25</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Bandas de franquicias estándar (USD)</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="HOLD_PERCENTAGE"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>HOLD_PERCENTAGE</b></span>
                        <a href="#HOLD_PERCENTAGE"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>0.35</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="52" class="link-to-prism">src/app/core/services/franchise-table.service.ts:52</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Porcentaje del rollover deductible para calcular hold con tarjeta</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="MIN_HOLD_ARS"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>MIN_HOLD_ARS</b></span>
                        <a href="#MIN_HOLD_ARS"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/object" target="_blank" >object</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>{
    economy: 600_000, // ~USD 343 @ FX 1748
    standard: 800_000, // ~USD 458 @ FX 1748
    premium: 1_200_000, // ~USD 686 @ FX 1748
    luxury: 1_500_000, // ~USD 858 @ FX 1748
    &#x27;ultra-luxury&#x27;: 2_000_000, // ~USD 1144 @ FX 1748
  }</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="41" class="link-to-prism">src/app/core/services/franchise-table.service.ts:41</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Mínimos de hold por bucket (ARS) - Argentina
Ajustables según inflación/política comercial</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ROLLOVER_MULTIPLIER"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>ROLLOVER_MULTIPLIER</b></span>
                        <a href="#ROLLOVER_MULTIPLIER"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>2.0</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="35" class="link-to-prism">src/app/core/services/franchise-table.service.ts:35</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Multiplicador de franquicia por vuelco (rollover)</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;

/**
 * Servicio de Tabla de Franquicias (Argentina)
 *
 * Maneja las franquicias estándar y por vuelco (rollover) según el valor del auto.
 *
 * Bandas de valor (USD):
 * - ≤10,000: USD 500 estándar
 * - 10,001-20,000: USD 800 estándar
 * - 20,001-40,000: USD 1,200 estándar
 * - &gt;40,000: USD 1,800 estándar
 *
 * Rollover: 2.0× de la franquicia estándar
 *
 * Hold con tarjeta: max(min_bucket_ars, 0.35 × rollover_deductible_usd × FX)
 */
@Injectable({
  providedIn: &#x27;root&#x27;,
})
export class FranchiseTableService {
  /**
   * Bandas de franquicias estándar (USD)
   */
  private readonly FRANCHISE_BANDS &#x3D; [
    { maxValue: 10000, standardUsd: 500 },
    { maxValue: 20000, standardUsd: 800 },
    { maxValue: 40000, standardUsd: 1200 },
    { maxValue: Infinity, standardUsd: 1800 },
  ];

  /**
   * Multiplicador de franquicia por vuelco (rollover)
   */
  private readonly ROLLOVER_MULTIPLIER &#x3D; 2.0;

  /**
   * Mínimos de hold por bucket (ARS) - Argentina
   * Ajustables según inflación/política comercial
   */
  private readonly MIN_HOLD_ARS &#x3D; {
    economy: 600_000, // ~USD 343 @ FX 1748
    standard: 800_000, // ~USD 458 @ FX 1748
    premium: 1_200_000, // ~USD 686 @ FX 1748
    luxury: 1_500_000, // ~USD 858 @ FX 1748
    &#x27;ultra-luxury&#x27;: 2_000_000, // ~USD 1144 @ FX 1748
  };

  /**
   * Porcentaje del rollover deductible para calcular hold con tarjeta
   */
  private readonly HOLD_PERCENTAGE &#x3D; 0.35;

  /**
   * Obtiene la franquicia estándar en USD según el valor del auto
   */
  getStandardFranchiseUsd(carValueUsd: number): number {
    const band &#x3D; this.FRANCHISE_BANDS.find((b) &#x3D;&gt; carValueUsd &lt;&#x3D; b.maxValue);
    return band?.standardUsd ?? this.FRANCHISE_BANDS[this.FRANCHISE_BANDS.length - 1].standardUsd;
  }

  /**
   * Obtiene la franquicia por vuelco (rollover) en USD
   */
  getRolloverFranchiseUsd(carValueUsd: number): number {
    const standard &#x3D; this.getStandardFranchiseUsd(carValueUsd);
    return standard * this.ROLLOVER_MULTIPLIER;
  }

  /**
   * Calcula el hold estimado en ARS para una reserva con tarjeta
   *
   * @param carValueUsd - Valor del auto en USD
   * @param bucket - Bucket del auto (economy, standard, premium, luxury, ultra-luxury)
   * @param fxRate - Tasa de cambio USD → ARS
   * @returns Hold estimado en ARS
   */
  calculateHoldArs(
    carValueUsd: number,
    bucket: &#x27;economy&#x27; | &#x27;standard&#x27; | &#x27;premium&#x27; | &#x27;luxury&#x27; | &#x27;ultra-luxury&#x27;,
    fxRate: number,
  ): number {
    const rolloverUsd &#x3D; this.getRolloverFranchiseUsd(carValueUsd);
    const calculatedHold &#x3D; this.HOLD_PERCENTAGE * rolloverUsd * fxRate;
    const minHold &#x3D; this.MIN_HOLD_ARS[bucket] ?? this.MIN_HOLD_ARS.standard;

    return Math.max(minHold, Math.round(calculatedHold));
  }

  /**
   * Obtiene el monto de Crédito de Seguridad en USD para reservas sin tarjeta
   *
   * @param carValueUsd - Valor del auto en USD
   * @returns Crédito de Seguridad en USD
   */
  getSecurityCreditUsd(carValueUsd: number): number {
    if (carValueUsd &lt;&#x3D; 20000) {
      return 300;
    }
    // Opcional recomendado para autos &gt;USD 20k
    return 500;
  }

  /**
   * Obtiene información completa de franquicias para un auto
   */
  getFranchiseInfo(
    carValueUsd: number,
    bucket: &#x27;economy&#x27; | &#x27;standard&#x27; | &#x27;premium&#x27; | &#x27;luxury&#x27; | &#x27;ultra-luxury&#x27;,
    fxRate: number,
  ): {
    standardUsd: number;
    rolloverUsd: number;
    holdArs: number;
    securityCreditUsd: number;
    minHoldArs: number;
  } {
    return {
      standardUsd: this.getStandardFranchiseUsd(carValueUsd),
      rolloverUsd: this.getRolloverFranchiseUsd(carValueUsd),
      holdArs: this.calculateHoldArs(carValueUsd, bucket, fxRate),
      securityCreditUsd: this.getSecurityCreditUsd(carValueUsd),
      minHoldArs: this.MIN_HOLD_ARS[bucket] ?? this.MIN_HOLD_ARS.standard,
    };
  }

  /**
   * Revalida si el hold debe recalcularse por variación de FX o tiempo transcurrido
   *
   * @param oldFx - FX snapshot original
   * @param newFx - FX actual
   * @param daysSinceSnapshot - Días desde el snapshot original
   * @returns true si debe revalidarse
   */
  shouldRevalidate(oldFx: number, newFx: number, daysSinceSnapshot: number): boolean {
    const fxVariation &#x3D; Math.abs((newFx - oldFx) / oldFx);
    const FX_THRESHOLD &#x3D; 0.1; // 10%
    const TIME_THRESHOLD &#x3D; 7; // 7 días

    return fxVariation &gt;&#x3D; FX_THRESHOLD || daysSinceSnapshot &gt;&#x3D; TIME_THRESHOLD;
  }

  /**
   * Formatea un monto en ARS para mostrar en UI
   */
  formatArs(amountArs: number): string {
    return new Intl.NumberFormat(&#x27;es-AR&#x27;, {
      style: &#x27;currency&#x27;,
      currency: &#x27;ARS&#x27;,
      minimumFractionDigits: 0,
      maximumFractionDigits: 0,
    }).format(amountArs);
  }

  /**
   * Formatea un monto en USD para mostrar en UI
   */
  formatUsd(amountUsd: number): string {
    return new Intl.NumberFormat(&#x27;es-AR&#x27;, {
      style: &#x27;currency&#x27;,
      currency: &#x27;USD&#x27;,
      minimumFractionDigits: 0,
      maximumFractionDigits: 0,
    }).format(amountUsd);
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'FranchiseTableService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
