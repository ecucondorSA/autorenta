<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>autorenta-web documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">autorenta-web documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content component">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Components</li>
  <li class="breadcrumb-item"
  >
  PublishCarV2Page</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" class="nav-link"
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
        <li class="nav-item">
            <a href="#templateData" class="nav-link"
                role="tab" id="templateData-tab" data-bs-toggle="tab" data-link="template">Template</a>
        </li>
        <li class="nav-item">
            <a href="#styleData" class="nav-link"
                role="tab" id="styleData-tab" data-bs-toggle="tab" data-link="style">Styles</a>
        </li>
        <li class="nav-item">
            <a href="#tree" class="nav-link"
                role="tab" id="tree-tab" data-bs-toggle="tab" data-link="dom-tree">DOM Tree</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/features/cars/publish/publish-car-v2.page.ts</code>
</p>


    <p class="comment">
        <h3>Description</h3>
    </p>
    <p class="comment">
        <p>Publish Car V2 Component (REFACTORED)</p>
<p>This component orchestrates the car publishing flow by delegating
all business logic to specialized services.</p>
<p>Responsibilities:</p>
<ul>
<li>Coordinate service interactions</li>
<li>Handle form submission</li>
<li>Navigate user through the flow</li>
<li>Display UI state</li>
</ul>
<p>Before refactor: 1,747 lines (template + logic)
After refactor: ~300 lines (orchestration only)</p>

    </p>


    <p class="comment">
        <h3>Implements</h3>
    </p>
    <p class="comment">
                <code>OnInit</code>
    </p>


<section data-compodoc="block-metadata">
    <h3>Metadata</h3>
    <table class="table table-sm table-hover metadata">
        <tbody>










            <tr>
                <td class="col-md-3">providers</td>
                <td class="col-md-9">
                                <code><a href="../injectables/PublishCarFormService.html" target="_self" >PublishCarFormService</a></code>
                                <code><a href="../injectables/PublishCarPhotoService.html" target="_self" >PublishCarPhotoService</a></code>
                                <code><a href="../injectables/PublishCarLocationService.html" target="_self" >PublishCarLocationService</a></code>
                                <code><a href="../injectables/PublishCarMpOnboardingService.html" target="_self" >PublishCarMpOnboardingService</a></code>
                </td>
            </tr>


            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>app-publish-car-v2</code></td>
            </tr>

            <tr>
                <td class="col-md-3">standalone</td>
                <td class="col-md-9"><code>true</code></td>
            </tr>

            <tr>
                <td class="col-md-3">imports</td>
                <td class="col-md-9">
                            <code>CommonModule</code>
                            <code>ReactiveFormsModule</code>
                            <code>TranslateModule</code>
                                <code><a href="../components/HostSupportInfoPanelComponent.html" target="_self" >HostSupportInfoPanelComponent</a></code>
                                <code><a href="../components/StockPhotosSelectorComponent.html" target="_self" >StockPhotosSelectorComponent</a></code>
                                <code><a href="../components/AiPhotoGeneratorComponent.html" target="_self" >AiPhotoGeneratorComponent</a></code>
                                <code><a href="../components/FipeAutocompleteComponent.html" target="_self" >FipeAutocompleteComponent</a></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-3">styleUrls</td>
                <td class="col-md-9"><code>./publish-car-v2.page.scss</code></td>
            </tr>



            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>./publish-car-v2.page.html</code></td>
            </tr>








        </tbody>
    </table>
</section>

    <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#allowManualValueEdit" >allowManualValueEdit</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#autofilledFromLast" >autofilledFromLast</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#brands" >brands</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#canSubmit" >canSubmit</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#canSubmitWithPayments" >canSubmitWithPayments</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#carId" >carId</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#carOwnerNotifications" >carOwnerNotifications</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#carsService" >carsService</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#documentsService" >documentsService</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#editMode" >editMode</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#filteredModels" >filteredModels</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#fipeBrands" >fipeBrands</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#fipeError" >fipeError</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#fipeErrorCode" >fipeErrorCode</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#fipeModels" >fipeModels</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#fipeMultiCurrencyValues" >fipeMultiCurrencyValues</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#fipeSuggestions" >fipeSuggestions</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#formService" >formService</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#hasValidLocation" >hasValidLocation</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#isAvailabilityRangeValid" >isAvailabilityRangeValid</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#isCalculatingSuggestedPrice" >isCalculatingSuggestedPrice</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#isDynamicPricingSignal" >isDynamicPricingSignal</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#isFetchingFIPEValue" >isFetchingFIPEValue</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#isGeneratingAIPhotos" >isGeneratingAIPhotos</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#isLoadingFIPEBrands" >isLoadingFIPEBrands</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#isLoadingFIPEModels" >isLoadingFIPEModels</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#isProcessingPhotos" >isProcessingPhotos</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#isSubmitting" >isSubmitting</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#locationService" >locationService</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#manualCoordinates" >manualCoordinates</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#maxYear" >maxYear</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#minYear" >minYear</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#missingRequirements" >missingRequirements</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#models" >models</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#mpReady" >mpReady</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#mpService" >mpService</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#mpStatus" >mpStatus</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#mpStatusError" >mpStatusError</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#mpStatusLoading" >mpStatusLoading</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#notificationManager" >notificationManager</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#photoService" >photoService</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#pricingOverrides" >pricingOverrides</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#pricingService" >pricingService</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#publishBlockerMessage" >publishBlockerMessage</a>
                            </li>
                            <li>
                                <a href="#publishForm" >publishForm</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#REQUIRE_FIPE_VALIDATION" >REQUIRE_FIPE_VALIDATION</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#route" >route</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#router" >router</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#selectedCategoryName" >selectedCategoryName</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#selectedFIPEBrand" >selectedFIPEBrand</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#selectedFIPEModel" >selectedFIPEModel</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#selectedModelInfo" >selectedModelInfo</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#showAIPhotosModal" >showAIPhotosModal</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#showMpBanner" >showMpBanner</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#showStockPhotosModal" >showStockPhotosModal</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#suggestedPrice" >suggestedPrice</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#supabase" >supabase</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#uploadedPhotos" >uploadedPhotos</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#valueAutoCalculated" >valueAutoCalculated</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#yearOptions" >yearOptions</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#autoCategorizeVehicle" >autoCategorizeVehicle</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#calculateSuggestedRate" >calculateSuggestedRate</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#checkMissingDocuments" >checkMissingDocuments</a>
                            </li>
                            <li>
                                <a href="#dismissOnboardingReminder" >dismissOnboardingReminder</a>
                            </li>
                            <li>
                                <a href="#enableManualValueEdit" >enableManualValueEdit</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#fetchFIPEValue" >fetchFIPEValue</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#generateAIPhotos" >generateAIPhotos</a>
                            </li>
                            <li>
                                <a href="#getCurrentBrand" >getCurrentBrand</a>
                            </li>
                            <li>
                                <a href="#getCurrentModel" >getCurrentModel</a>
                            </li>
                            <li>
                                <a href="#getCurrentYear" >getCurrentYear</a>
                            </li>
                            <li>
                                <a href="#getModelHelperText" >getModelHelperText</a>
                            </li>
                            <li>
                                <a href="#getModelPlaceholder" >getModelPlaceholder</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#goBack" >goBack</a>
                            </li>
                            <li>
                                <a href="#isDynamicPricing" >isDynamicPricing</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#loadFIPEBrands" >loadFIPEBrands</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#loadPricingOverrides" >loadPricingOverrides</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#ngOnInit" >ngOnInit</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#onAIPhotosGenerated" >onAIPhotosGenerated</a>
                            </li>
                            <li>
                                <a href="#onBrandChange" >onBrandChange</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#onFIPEBrandSelected" >onFIPEBrandSelected</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#onFIPEModelSelected" >onFIPEModelSelected</a>
                            </li>
                            <li>
                                <a href="#onModelChange" >onModelChange</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#onPhotoSelected" >onPhotoSelected</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#onStockPhotosSelected" >onStockPhotosSelected</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#onSubmit" >onSubmit</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#onYearChange" >onYearChange</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#openOnboardingModal" >openOnboardingModal</a>
                            </li>
                            <li>
                                <a href="#removePhoto" >removePhoto</a>
                            </li>
                            <li>
                                <a href="#setPricingStrategy" >setPricingStrategy</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#updateCategoryName" >updateCategoryName</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#useCurrentLocation" >useCurrentLocation</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>






    <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="autoCategorizeVehicle"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>autoCategorizeVehicle</b></span>
                        <a href="#autoCategorizeVehicle"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>autoCategorizeVehicle(valueUsd: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, brand: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, model: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, year: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="618"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:618</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>✅ NEW: Auto-categorize vehicle based on value USD or brand/model/year
Uses two methods:</p>
<ol>
<li>Try estimateVehicleValue() for precise category from pricing_models</li>
<li>Fallback to value-based classification if not found</li>
</ol>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>valueUsd</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>brand</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>model</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>year</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="calculateSuggestedRate"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>calculateSuggestedRate</b></span>
                        <a href="#calculateSuggestedRate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>calculateSuggestedRate()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="750"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:750</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>✅ NEW: Calculate suggested rate based on vehicle value and category
Called when: vehicle value changes, category changes, or dynamic pricing toggled on</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="checkMissingDocuments"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>checkMissingDocuments</b></span>
                        <a href="#checkMissingDocuments"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>checkMissingDocuments(carId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1288"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:1288</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Verifica documentos faltantes y notifica al usuario</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>carId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dismissOnboardingReminder"></a>
                    <span class="name">
                        <span ><b>dismissOnboardingReminder</b></span>
                        <a href="#dismissOnboardingReminder"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>dismissOnboardingReminder()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="999"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:999</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Dismiss onboarding reminder</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="enableManualValueEdit"></a>
                    <span class="name">
                        <span ><b>enableManualValueEdit</b></span>
                        <a href="#enableManualValueEdit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>enableManualValueEdit()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="370"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:370</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Enable manual editing of value_usd field</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fetchFIPEValue"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>fetchFIPEValue</b></span>
                        <a href="#fetchFIPEValue"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>fetchFIPEValue()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="483"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:483</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>✅ NEW: Fetch FIPE value when brand, model, and year are available</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="generateAIPhotos"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>generateAIPhotos</b></span>
                        <a href="#generateAIPhotos"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>generateAIPhotos()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="922"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:922</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Generate AI photos</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCurrentBrand"></a>
                    <span class="name">
                        <span ><b>getCurrentBrand</b></span>
                        <a href="#getCurrentBrand"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getCurrentBrand()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="867"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:867</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get current brand name
✅ Updated to support FIPE autocomplete</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCurrentModel"></a>
                    <span class="name">
                        <span ><b>getCurrentModel</b></span>
                        <a href="#getCurrentModel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getCurrentModel()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="892"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:892</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get current model name
✅ Updated to support FIPE autocomplete</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCurrentYear"></a>
                    <span class="name">
                        <span ><b>getCurrentYear</b></span>
                        <a href="#getCurrentYear"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getCurrentYear()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="915"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:915</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get current year</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getModelHelperText"></a>
                    <span class="name">
                        <span ><b>getModelHelperText</b></span>
                        <a href="#getModelHelperText"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getModelHelperText()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="832"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:832</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get helper text for model selection</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getModelPlaceholder"></a>
                    <span class="name">
                        <span ><b>getModelPlaceholder</b></span>
                        <a href="#getModelPlaceholder"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getModelPlaceholder()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="821"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:821</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get placeholder text for model selection</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="goBack"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>goBack</b></span>
                        <a href="#goBack"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>goBack()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1281"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:1281</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Go back to previous page</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isDynamicPricing"></a>
                    <span class="name">
                        <span ><b>isDynamicPricing</b></span>
                        <a href="#isDynamicPricing"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>isDynamicPricing()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="363"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:363</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Check if dynamic pricing is enabled (legacy method)</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadFIPEBrands"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>loadFIPEBrands</b></span>
                        <a href="#loadFIPEBrands"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadFIPEBrands()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="377"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:377</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>✅ NEW: Load FIPE brands from API</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadPricingOverrides"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>loadPricingOverrides</b></span>
                        <a href="#loadPricingOverrides"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadPricingOverrides(carId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="322"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:322</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>carId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnInit"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>ngOnInit</b></span>
                        <a href="#ngOnInit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>ngOnInit()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="258"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:258</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onAIPhotosGenerated"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>onAIPhotosGenerated</b></span>
                        <a href="#onAIPhotosGenerated"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>onAIPhotosGenerated(photos: File[])</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="858"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:858</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handle AI photos generation</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>photos</td>
                                            <td>
                                                        <code>File[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onBrandChange"></a>
                    <span class="name">
                        <span ><b>onBrandChange</b></span>
                        <a href="#onBrandChange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onBrandChange()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="339"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:339</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handle brand selection change</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onFIPEBrandSelected"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>onFIPEBrandSelected</b></span>
                        <a href="#onFIPEBrandSelected"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>onFIPEBrandSelected(brand: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="403"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:403</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handle FIPE brand selection</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>brand</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onFIPEModelSelected"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>onFIPEModelSelected</b></span>
                        <a href="#onFIPEModelSelected"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>onFIPEModelSelected(model: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="449"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:449</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handle FIPE model selection</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>model</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onModelChange"></a>
                    <span class="name">
                        <span ><b>onModelChange</b></span>
                        <a href="#onModelChange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onModelChange()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="349"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:349</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handle model selection change</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onPhotoSelected"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>onPhotoSelected</b></span>
                        <a href="#onPhotoSelected"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>onPhotoSelected(event: Event)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="843"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:843</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handle photo selection</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>event</td>
                                            <td>
                                                        <code>Event</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onStockPhotosSelected"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>onStockPhotosSelected</b></span>
                        <a href="#onStockPhotosSelected"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>onStockPhotosSelected(photos: File[])</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="850"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:850</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handle stock photos selection</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>photos</td>
                                            <td>
                                                        <code>File[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onSubmit"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>onSubmit</b></span>
                        <a href="#onSubmit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>onSubmit()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1006"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:1006</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Submit form</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onYearChange"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>onYearChange</b></span>
                        <a href="#onYearChange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>onYearChange()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="470"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:470</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handle year change (trigger FIPE value fetch)</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="openOnboardingModal"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>openOnboardingModal</b></span>
                        <a href="#openOnboardingModal"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>openOnboardingModal()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="992"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:992</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Open MercadoPago onboarding modal</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removePhoto"></a>
                    <span class="name">
                        <span ><b>removePhoto</b></span>
                        <a href="#removePhoto"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>removePhoto(index: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="946"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:946</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Remove photo at index</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>index</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setPricingStrategy"></a>
                    <span class="name">
                        <span ><b>setPricingStrategy</b></span>
                        <a href="#setPricingStrategy"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>setPricingStrategy(mode: "dynamic" | "custom")</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="356"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:356</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Set pricing strategy (dynamic vs custom)</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>mode</td>
                                            <td>
                                                        <code>&quot;dynamic&quot; | &quot;custom&quot;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateCategoryName"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>updateCategoryName</b></span>
                        <a href="#updateCategoryName"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateCategoryName(categoryId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="302"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:302</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>✅ NEW: Update selectedCategoryName when category_id changes</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>categoryId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="useCurrentLocation"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>useCurrentLocation</b></span>
                        <a href="#useCurrentLocation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>useCurrentLocation()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="953"
                                    class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:953</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Use current GPS location</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
    <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="allowManualValueEdit"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>allowManualValueEdit</b></span>
                        <a href="#allowManualValueEdit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(true)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="126" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:126</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="autofilledFromLast"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>autofilledFromLast</b></span>
                        <a href="#autofilledFromLast"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.formService.autofilledFromLast</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="94" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:94</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="brands"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>brands</b></span>
                        <a href="#brands"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.formService.brands</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="87" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:87</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="canSubmit"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>canSubmit</b></span>
                        <a href="#canSubmit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; {
    // Verificar valores del formulario tradicional (UUIDs)
    const brandId &#x3D; this.publishForm?.get(&#x27;brand_id&#x27;)?.value;
    const modelId &#x3D; this.publishForm?.get(&#x27;model_id&#x27;)?.value;

    // Verificar valores de texto backup (para FIPE)
    const brandTextBackup &#x3D; this.publishForm?.get(&#x27;brand_text_backup&#x27;)?.value;
    const modelTextBackup &#x3D; this.publishForm?.get(&#x27;model_text_backup&#x27;)?.value;

    // Verificar valores FIPE (nuevo sistema)
    const fipeBrand &#x3D; this.selectedFIPEBrand();
    const fipeModel &#x3D; this.selectedFIPEModel();

    // Aceptar cualquiera de los sistemas: UUIDs, texto backup, o FIPE signals
    const hasBrand &#x3D; !!(brandId || brandTextBackup || (fipeBrand &amp;&amp; fipeBrand.name));
    const hasModel &#x3D; !!(modelId || modelTextBackup || (fipeModel &amp;&amp; fipeModel.name));

    const year &#x3D; this.publishForm?.get(&#x27;year&#x27;)?.value;
    const hasPhotos &#x3D; this.photoService.hasMinimumPhotos();
    const description &#x3D; this.publishForm?.get(&#x27;description&#x27;)?.value;
    const availabilityStart &#x3D; this.publishForm?.get(&#x27;availability_start_date&#x27;)?.value;
    const availabilityEnd &#x3D; this.publishForm?.get(&#x27;availability_end_date&#x27;)?.value;

    // ✅ CRITICAL: Ubicación es obligatoria para aparecer en búsquedas
    const hasLocation &#x3D; this.hasValidLocation();

    const hasDescription &#x3D; !!(description &amp;&amp; description.trim().length &gt;&#x3D; 40);
    const hasAvailability &#x3D;
      !!availabilityStart &amp;&amp;
      !!availabilityEnd &amp;&amp;
      new Date(availabilityStart) &lt;&#x3D; new Date(availabilityEnd);

    // Bloquear si falta alguno de los requisitos
    return !!(
      hasBrand &amp;&amp;
      hasModel &amp;&amp;
      year &amp;&amp;
      hasPhotos &amp;&amp;
      hasLocation &amp;&amp;
      hasDescription &amp;&amp;
      hasAvailability
    );
  })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="140" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:140</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="canSubmitWithPayments"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>canSubmitWithPayments</b></span>
                        <a href="#canSubmitWithPayments"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; this.canSubmit())</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="225" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:225</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="carId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>carId</b></span>
                        <a href="#carId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>string | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="81" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:81</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="carOwnerNotifications"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>carOwnerNotifications</b></span>
                        <a href="#carOwnerNotifications"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(CarOwnerNotificationsService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="73" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:73</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="carsService"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>carsService</b></span>
                        <a href="#carsService"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(CarsService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="63" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:63</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="documentsService"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>documentsService</b></span>
                        <a href="#documentsService"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(VehicleDocumentsService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="72" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:72</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="editMode"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>editMode</b></span>
                        <a href="#editMode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="78" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:78</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="filteredModels"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>filteredModels</b></span>
                        <a href="#filteredModels"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.formService.filteredModels</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="89" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:89</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fipeBrands"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>fipeBrands</b></span>
                        <a href="#fipeBrands"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;any[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="236" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:236</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fipeError"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>fipeError</b></span>
                        <a href="#fipeError"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;string | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="123" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:123</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fipeErrorCode"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>fipeErrorCode</b></span>
                        <a href="#fipeErrorCode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;string | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="124" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:124</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fipeModels"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>fipeModels</b></span>
                        <a href="#fipeModels"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;any[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="238" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:238</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fipeMultiCurrencyValues"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>fipeMultiCurrencyValues</b></span>
                        <a href="#fipeMultiCurrencyValues"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;any&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="128" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:128</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fipeSuggestions"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>fipeSuggestions</b></span>
                        <a href="#fipeSuggestions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;string[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="125" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:125</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="formService"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>formService</b></span>
                        <a href="#formService"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(PublishCarFormService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="68" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:68</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasValidLocation"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>hasValidLocation</b></span>
                        <a href="#hasValidLocation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; {
    const coordinates &#x3D; this.locationService.getCoordinates();
    return !!(coordinates?.latitude &amp;&amp; coordinates?.longitude);
  })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="185" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:185</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isAvailabilityRangeValid"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>isAvailabilityRangeValid</b></span>
                        <a href="#isAvailabilityRangeValid"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; {
    const start &#x3D; this.publishForm?.get(&#x27;availability_start_date&#x27;)?.value;
    const end &#x3D; this.publishForm?.get(&#x27;availability_end_date&#x27;)?.value;

    if (!start || !end) return false;

    const startDate &#x3D; new Date(start);
    const endDate &#x3D; new Date(end);
    return startDate &lt;&#x3D; endDate;
  })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="247" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:247</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isCalculatingSuggestedPrice"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>isCalculatingSuggestedPrice</b></span>
                        <a href="#isCalculatingSuggestedPrice"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="135" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:135</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isDynamicPricingSignal"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>isDynamicPricingSignal</b></span>
                        <a href="#isDynamicPricingSignal"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.formService.isDynamicPricingSignal()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="118" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:118</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isFetchingFIPEValue"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>isFetchingFIPEValue</b></span>
                        <a href="#isFetchingFIPEValue"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="122" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:122</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isGeneratingAIPhotos"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>isGeneratingAIPhotos</b></span>
                        <a href="#isGeneratingAIPhotos"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.photoService.isGeneratingAIPhotos</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="92" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:92</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isLoadingFIPEBrands"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>isLoadingFIPEBrands</b></span>
                        <a href="#isLoadingFIPEBrands"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="239" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:239</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isLoadingFIPEModels"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>isLoadingFIPEModels</b></span>
                        <a href="#isLoadingFIPEModels"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="240" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:240</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isProcessingPhotos"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>isProcessingPhotos</b></span>
                        <a href="#isProcessingPhotos"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.photoService.isProcessingPhotos</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="91" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:91</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isSubmitting"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>isSubmitting</b></span>
                        <a href="#isSubmitting"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="77" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:77</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="locationService"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>locationService</b></span>
                        <a href="#locationService"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(PublishCarLocationService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="70" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:70</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="manualCoordinates"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>manualCoordinates</b></span>
                        <a href="#manualCoordinates"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.locationService.manualCoordinates</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="93" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:93</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="maxYear"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>maxYear</b></span>
                        <a href="#maxYear"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Date().getFullYear()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="105" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:105</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="minYear"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>minYear</b></span>
                        <a href="#minYear"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>1980</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="104" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:104</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="missingRequirements"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>missingRequirements</b></span>
                        <a href="#missingRequirements"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; {
    const missing: string[] &#x3D; [];

    const brandId &#x3D; this.publishForm?.get(&#x27;brand_id&#x27;)?.value;
    const modelId &#x3D; this.publishForm?.get(&#x27;model_id&#x27;)?.value;
    const brandTextBackup &#x3D; this.publishForm?.get(&#x27;brand_text_backup&#x27;)?.value;
    const modelTextBackup &#x3D; this.publishForm?.get(&#x27;model_text_backup&#x27;)?.value;
    const fipeBrand &#x3D; this.selectedFIPEBrand();
    const fipeModel &#x3D; this.selectedFIPEModel();
    const year &#x3D; this.publishForm?.get(&#x27;year&#x27;)?.value;

    const hasBrand &#x3D; !!(brandId || brandTextBackup || (fipeBrand &amp;&amp; fipeBrand.name));
    const hasModel &#x3D; !!(modelId || modelTextBackup || (fipeModel &amp;&amp; fipeModel.name));
    const description &#x3D; this.publishForm?.get(&#x27;description&#x27;)?.value;
    const availabilityStart &#x3D; this.publishForm?.get(&#x27;availability_start_date&#x27;)?.value;
    const availabilityEnd &#x3D; this.publishForm?.get(&#x27;availability_end_date&#x27;)?.value;

    if (!hasBrand) missing.push(&#x27;Marca&#x27;);
    if (!hasModel) missing.push(&#x27;Modelo&#x27;);
    if (!year) missing.push(&#x27;Año&#x27;);
    if (!this.photoService.hasMinimumPhotos()) missing.push(&#x27;Mínimo 3 fotos&#x27;);
    if (!this.hasValidLocation()) missing.push(&#x27;Ubicación en el mapa&#x27;);
    if (!description || description.trim().length &lt; 40)
      missing.push(&#x27;Descripción (min. 40 caracteres)&#x27;);
    if (!availabilityStart || !availabilityEnd) {
      missing.push(&#x27;Rango de disponibilidad&#x27;);
    } else if (!this.isAvailabilityRangeValid()) {
      missing.push(&#x27;Fechas de disponibilidad válidas&#x27;);
    }

    return missing;
  })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="191" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:191</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="models"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>models</b></span>
                        <a href="#models"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.formService.models</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="88" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:88</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mpReady"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>mpReady</b></span>
                        <a href="#mpReady"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.mpService.mpReady</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="100" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:100</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mpService"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>mpService</b></span>
                        <a href="#mpService"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(PublishCarMpOnboardingService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="71" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:71</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mpStatus"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>mpStatus</b></span>
                        <a href="#mpStatus"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.mpService.mpStatus</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="97" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:97</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mpStatusError"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>mpStatusError</b></span>
                        <a href="#mpStatusError"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.mpService.mpStatusError</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="99" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:99</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mpStatusLoading"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>mpStatusLoading</b></span>
                        <a href="#mpStatusLoading"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.mpService.mpStatusLoading</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="98" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:98</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="notificationManager"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>notificationManager</b></span>
                        <a href="#notificationManager"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(NotificationManagerService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="65" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:65</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="photoService"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>photoService</b></span>
                        <a href="#photoService"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(PublishCarPhotoService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="69" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:69</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pricingOverrides"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>pricingOverrides</b></span>
                        <a href="#pricingOverrides"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;{ day: string; price_per_day: number }[]&gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="136" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:136</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pricingService"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>pricingService</b></span>
                        <a href="#pricingService"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(PricingService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="64" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:64</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="publishBlockerMessage"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>publishBlockerMessage</b></span>
                        <a href="#publishBlockerMessage"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; {
    if (this.mpStatusLoading()) return null;
    if (!this.mpReady()) {
      return &#x27;Conecta Mercado Pago para cobrar (puedes publicar igual).&#x27;;
    }
    return null;
  })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="226" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:226</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="publishForm"></a>
                    <span class="name">
                        <span ><b>publishForm</b></span>
                        <a href="#publishForm"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>FormGroup</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="84" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:84</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="REQUIRE_FIPE_VALIDATION"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>REQUIRE_FIPE_VALIDATION</b></span>
                        <a href="#REQUIRE_FIPE_VALIDATION"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="108" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:108</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="route"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>route</b></span>
                        <a href="#route"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(ActivatedRoute)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="62" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:62</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="router"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>router</b></span>
                        <a href="#router"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(Router)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="61" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:61</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectedCategoryName"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>selectedCategoryName</b></span>
                        <a href="#selectedCategoryName"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;string&gt;(&#x27;&#x27;)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="134" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:134</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectedFIPEBrand"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>selectedFIPEBrand</b></span>
                        <a href="#selectedFIPEBrand"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;any&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="130" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:130</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectedFIPEModel"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>selectedFIPEModel</b></span>
                        <a href="#selectedFIPEModel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;any&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="132" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:132</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectedModelInfo"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>selectedModelInfo</b></span>
                        <a href="#selectedModelInfo"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed(() &#x3D;&gt; {
    const modelId &#x3D; this.publishForm?.get(&#x27;model_id&#x27;)?.value;
    if (!modelId) return null;
    return this.formService.getSelectedModelInfo(modelId);
  })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="111" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:111</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showAIPhotosModal"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>showAIPhotosModal</b></span>
                        <a href="#showAIPhotosModal"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="80" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:80</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showMpBanner"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>showMpBanner</b></span>
                        <a href="#showMpBanner"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.mpService.showMpBanner</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="101" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:101</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showStockPhotosModal"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>showStockPhotosModal</b></span>
                        <a href="#showStockPhotosModal"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="79" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:79</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="suggestedPrice"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>suggestedPrice</b></span>
                        <a href="#suggestedPrice"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;number | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="133" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:133</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="supabase"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>supabase</b></span>
                        <a href="#supabase"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(SupabaseClientService).getClient()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="74" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:74</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="uploadedPhotos"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>uploadedPhotos</b></span>
                        <a href="#uploadedPhotos"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>this.photoService.uploadedPhotos</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="90" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:90</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="valueAutoCalculated"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>valueAutoCalculated</b></span>
                        <a href="#valueAutoCalculated"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="121" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:121</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="yearOptions"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>yearOptions</b></span>
                        <a href="#yearOptions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>Array.from({ length: 13 }, (_, i) &#x3D;&gt; new Date().getFullYear() - i)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="244" class="link-to-prism">src/app/features/cars/publish/publish-car-v2.page.ts:244</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

</div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { CommonModule } from &#x27;@angular/common&#x27;;
import { Component, computed, inject, OnInit, signal } from &#x27;@angular/core&#x27;;
import { FormGroup, ReactiveFormsModule } from &#x27;@angular/forms&#x27;;
import { ActivatedRoute, Router } from &#x27;@angular/router&#x27;;
import { TranslateModule } from &#x27;@ngx-translate/core&#x27;;
import { CarsService } from &#x27;../../../core/services/cars.service&#x27;;
import { NotificationManagerService } from &#x27;../../../core/services/notification-manager.service&#x27;;
import { PricingService } from &#x27;../../../core/services/pricing.service&#x27;;
import { SupabaseClientService } from &#x27;../../../core/services/supabase-client.service&#x27;;
import { AiPhotoGeneratorComponent } from &#x27;../../../shared/components/ai-photo-generator/ai-photo-generator.component&#x27;;
import { FipeAutocompleteComponent } from &#x27;../../../shared/components/fipe-autocomplete/fipe-autocomplete.component&#x27;;
import { HostSupportInfoPanelComponent } from &#x27;../../../shared/components/host-support-info-panel/host-support-info-panel.component&#x27;;
import { StockPhotosSelectorComponent } from &#x27;../../../shared/components/stock-photos-selector/stock-photos-selector.component&#x27;;

// ✅ NEW: Extracted services
import { CarOwnerNotificationsService } from &#x27;../../../core/services/car-owner-notifications.service&#x27;;
import { VehicleDocumentsService } from &#x27;../../../core/services/vehicle-documents.service&#x27;;
import { PublishCarFormService } from &#x27;./services/publish-car-form.service&#x27;;
import { PublishCarLocationService } from &#x27;./services/publish-car-location.service&#x27;;
import { PublishCarMpOnboardingService } from &#x27;./services/publish-car-mp-onboarding.service&#x27;;
import { PublishCarPhotoService } from &#x27;./services/publish-car-photo.service&#x27;;

/**
 * Publish Car V2 Component (REFACTORED)
 *
 * This component orchestrates the car publishing flow by delegating
 * all business logic to specialized services.
 *
 * Responsibilities:
 * - Coordinate service interactions
 * - Handle form submission
 * - Navigate user through the flow
 * - Display UI state
 *
 * Before refactor: 1,747 lines (template + logic)
 * After refactor: ~300 lines (orchestration only)
 */
@Component({
  selector: &#x27;app-publish-car-v2&#x27;,
  standalone: true,
  imports: [
    CommonModule,
    ReactiveFormsModule,
    TranslateModule,
    HostSupportInfoPanelComponent,
    StockPhotosSelectorComponent,
    AiPhotoGeneratorComponent,
    FipeAutocompleteComponent,
  ],
  templateUrl: &#x27;./publish-car-v2.page.html&#x27;,
  styleUrls: [&#x27;./publish-car-v2.page.scss&#x27;],
  providers: [
    PublishCarFormService,
    PublishCarPhotoService,
    PublishCarLocationService,
    PublishCarMpOnboardingService,
  ],
})
export class PublishCarV2Page implements OnInit {
  // Core services
  private readonly router &#x3D; inject(Router);
  private readonly route &#x3D; inject(ActivatedRoute);
  private readonly carsService &#x3D; inject(CarsService);
  private readonly pricingService &#x3D; inject(PricingService);
  private readonly notificationManager &#x3D; inject(NotificationManagerService);

  // Feature services
  private readonly formService &#x3D; inject(PublishCarFormService);
  private readonly photoService &#x3D; inject(PublishCarPhotoService);
  private readonly locationService &#x3D; inject(PublishCarLocationService);
  private readonly mpService &#x3D; inject(PublishCarMpOnboardingService);
  private readonly documentsService &#x3D; inject(VehicleDocumentsService);
  private readonly carOwnerNotifications &#x3D; inject(CarOwnerNotificationsService);
  private readonly supabase &#x3D; inject(SupabaseClientService).getClient();

  // Component state
  readonly isSubmitting &#x3D; signal(false);
  readonly editMode &#x3D; signal(false);
  readonly showStockPhotosModal &#x3D; signal(false);
  readonly showAIPhotosModal &#x3D; signal(false);
  private carId: string | null &#x3D; null;

  // Form reference
  publishForm!: FormGroup;

  // Expose service state to template
  readonly brands &#x3D; this.formService.brands;
  readonly models &#x3D; this.formService.models;
  readonly filteredModels &#x3D; this.formService.filteredModels;
  readonly uploadedPhotos &#x3D; this.photoService.uploadedPhotos;
  readonly isProcessingPhotos &#x3D; this.photoService.isProcessingPhotos;
  readonly isGeneratingAIPhotos &#x3D; this.photoService.isGeneratingAIPhotos;
  readonly manualCoordinates &#x3D; this.locationService.manualCoordinates;
  readonly autofilledFromLast &#x3D; this.formService.autofilledFromLast;

  // MP onboarding state
  readonly mpStatus &#x3D; this.mpService.mpStatus;
  readonly mpStatusLoading &#x3D; this.mpService.mpStatusLoading;
  readonly mpStatusError &#x3D; this.mpService.mpStatusError;
  readonly mpReady &#x3D; this.mpService.mpReady;
  readonly showMpBanner &#x3D; this.mpService.showMpBanner;

  // Min/max year for validation
  readonly minYear &#x3D; 1980;
  readonly maxYear &#x3D; new Date().getFullYear(); // ✅ Changed: removed +1 to avoid showing future years

  // ✅ Feature flag: FIPE validation is optional (false &#x3D; optional, true &#x3D; required)
  readonly REQUIRE_FIPE_VALIDATION &#x3D; false;

  // Computed
  readonly selectedModelInfo &#x3D; computed(() &#x3D;&gt; {
    const modelId &#x3D; this.publishForm?.get(&#x27;model_id&#x27;)?.value;
    if (!modelId) return null;
    return this.formService.getSelectedModelInfo(modelId);
  });

  // Expose dynamic pricing signal from service
  readonly isDynamicPricingSignal &#x3D; this.formService.isDynamicPricingSignal();

  // FIPE value signals (for UI state)
  readonly valueAutoCalculated &#x3D; signal(false);
  readonly isFetchingFIPEValue &#x3D; signal(false);
  readonly fipeError &#x3D; signal&lt;string | null&gt;(null);
  readonly fipeErrorCode &#x3D; signal&lt;string | null&gt;(null); // ✅ NEW: Machine-readable error code
  readonly fipeSuggestions &#x3D; signal&lt;string[]&gt;([]); // ✅ NEW: Actionable suggestions
  readonly allowManualValueEdit &#x3D; signal(true);
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  readonly fipeMultiCurrencyValues &#x3D; signal&lt;any&gt;(null);
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  readonly selectedFIPEBrand &#x3D; signal&lt;any&gt;(null);
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  readonly selectedFIPEModel &#x3D; signal&lt;any&gt;(null);
  readonly suggestedPrice &#x3D; signal&lt;number | null&gt;(null);
  readonly selectedCategoryName &#x3D; signal&lt;string&gt;(&#x27;&#x27;);
  readonly isCalculatingSuggestedPrice &#x3D; signal(false);
  readonly pricingOverrides &#x3D; signal&lt;{ day: string; price_per_day: number }[]&gt;([]);

  // ✅ NEW: Control submit button availability - Requiere marca, modelo, año, 3 fotos y ubicación
  // Verifica tanto valores del formulario (brand_id/model_id o brand_text_backup/model_text_backup) como signals FIPE
  readonly canSubmit &#x3D; computed(() &#x3D;&gt; {
    // Verificar valores del formulario tradicional (UUIDs)
    const brandId &#x3D; this.publishForm?.get(&#x27;brand_id&#x27;)?.value;
    const modelId &#x3D; this.publishForm?.get(&#x27;model_id&#x27;)?.value;

    // Verificar valores de texto backup (para FIPE)
    const brandTextBackup &#x3D; this.publishForm?.get(&#x27;brand_text_backup&#x27;)?.value;
    const modelTextBackup &#x3D; this.publishForm?.get(&#x27;model_text_backup&#x27;)?.value;

    // Verificar valores FIPE (nuevo sistema)
    const fipeBrand &#x3D; this.selectedFIPEBrand();
    const fipeModel &#x3D; this.selectedFIPEModel();

    // Aceptar cualquiera de los sistemas: UUIDs, texto backup, o FIPE signals
    const hasBrand &#x3D; !!(brandId || brandTextBackup || (fipeBrand &amp;&amp; fipeBrand.name));
    const hasModel &#x3D; !!(modelId || modelTextBackup || (fipeModel &amp;&amp; fipeModel.name));

    const year &#x3D; this.publishForm?.get(&#x27;year&#x27;)?.value;
    const hasPhotos &#x3D; this.photoService.hasMinimumPhotos();
    const description &#x3D; this.publishForm?.get(&#x27;description&#x27;)?.value;
    const availabilityStart &#x3D; this.publishForm?.get(&#x27;availability_start_date&#x27;)?.value;
    const availabilityEnd &#x3D; this.publishForm?.get(&#x27;availability_end_date&#x27;)?.value;

    // ✅ CRITICAL: Ubicación es obligatoria para aparecer en búsquedas
    const hasLocation &#x3D; this.hasValidLocation();

    const hasDescription &#x3D; !!(description &amp;&amp; description.trim().length &gt;&#x3D; 40);
    const hasAvailability &#x3D;
      !!availabilityStart &amp;&amp;
      !!availabilityEnd &amp;&amp;
      new Date(availabilityStart) &lt;&#x3D; new Date(availabilityEnd);

    // Bloquear si falta alguno de los requisitos
    return !!(
      hasBrand &amp;&amp;
      hasModel &amp;&amp;
      year &amp;&amp;
      hasPhotos &amp;&amp;
      hasLocation &amp;&amp;
      hasDescription &amp;&amp;
      hasAvailability
    );
  });

  // ✅ NEW: Check if we have valid location coordinates
  readonly hasValidLocation &#x3D; computed(() &#x3D;&gt; {
    const coordinates &#x3D; this.locationService.getCoordinates();
    return !!(coordinates?.latitude &amp;&amp; coordinates?.longitude);
  });

  // ✅ NEW: Show explicit pending requirements in UI
  readonly missingRequirements &#x3D; computed(() &#x3D;&gt; {
    const missing: string[] &#x3D; [];

    const brandId &#x3D; this.publishForm?.get(&#x27;brand_id&#x27;)?.value;
    const modelId &#x3D; this.publishForm?.get(&#x27;model_id&#x27;)?.value;
    const brandTextBackup &#x3D; this.publishForm?.get(&#x27;brand_text_backup&#x27;)?.value;
    const modelTextBackup &#x3D; this.publishForm?.get(&#x27;model_text_backup&#x27;)?.value;
    const fipeBrand &#x3D; this.selectedFIPEBrand();
    const fipeModel &#x3D; this.selectedFIPEModel();
    const year &#x3D; this.publishForm?.get(&#x27;year&#x27;)?.value;

    const hasBrand &#x3D; !!(brandId || brandTextBackup || (fipeBrand &amp;&amp; fipeBrand.name));
    const hasModel &#x3D; !!(modelId || modelTextBackup || (fipeModel &amp;&amp; fipeModel.name));
    const description &#x3D; this.publishForm?.get(&#x27;description&#x27;)?.value;
    const availabilityStart &#x3D; this.publishForm?.get(&#x27;availability_start_date&#x27;)?.value;
    const availabilityEnd &#x3D; this.publishForm?.get(&#x27;availability_end_date&#x27;)?.value;

    if (!hasBrand) missing.push(&#x27;Marca&#x27;);
    if (!hasModel) missing.push(&#x27;Modelo&#x27;);
    if (!year) missing.push(&#x27;Año&#x27;);
    if (!this.photoService.hasMinimumPhotos()) missing.push(&#x27;Mínimo 3 fotos&#x27;);
    if (!this.hasValidLocation()) missing.push(&#x27;Ubicación en el mapa&#x27;);
    if (!description || description.trim().length &lt; 40)
      missing.push(&#x27;Descripción (min. 40 caracteres)&#x27;);
    if (!availabilityStart || !availabilityEnd) {
      missing.push(&#x27;Rango de disponibilidad&#x27;);
    } else if (!this.isAvailabilityRangeValid()) {
      missing.push(&#x27;Fechas de disponibilidad válidas&#x27;);
    }

    return missing;
  });

  // Submit habilitado con datos mínimos; MP recomendado pero no bloquea
  readonly canSubmitWithPayments &#x3D; computed(() &#x3D;&gt; this.canSubmit());
  readonly publishBlockerMessage &#x3D; computed(() &#x3D;&gt; {
    if (this.mpStatusLoading()) return null;
    if (!this.mpReady()) {
      return &#x27;Conecta Mercado Pago para cobrar (puedes publicar igual).&#x27;;
    }
    return null;
  });

  // FIPE autocomplete signals
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  readonly fipeBrands &#x3D; signal&lt;any[]&gt;([]);
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  readonly fipeModels &#x3D; signal&lt;any[]&gt;([]);
  readonly isLoadingFIPEBrands &#x3D; signal(false);
  readonly isLoadingFIPEModels &#x3D; signal(false);

  // Year options (2013-2025)
  // ✅ Generate years dynamically from current year back 12 years
  readonly yearOptions &#x3D; Array.from({ length: 13 }, (_, i) &#x3D;&gt; new Date().getFullYear() - i);

  // Helper to validate disponibilidad
  readonly isAvailabilityRangeValid &#x3D; computed(() &#x3D;&gt; {
    const start &#x3D; this.publishForm?.get(&#x27;availability_start_date&#x27;)?.value;
    const end &#x3D; this.publishForm?.get(&#x27;availability_end_date&#x27;)?.value;

    if (!start || !end) return false;

    const startDate &#x3D; new Date(start);
    const endDate &#x3D; new Date(end);
    return startDate &lt;&#x3D; endDate;
  });

  async ngOnInit(): Promise&lt;void&gt; {
    // Initialize form
    this.publishForm &#x3D; this.formService.initForm();

    // ✅ NEW: Listen to category_id changes to update selectedCategoryName
    this.publishForm.get(&#x27;category_id&#x27;)?.valueChanges.subscribe(async (categoryId) &#x3D;&gt; {
      if (categoryId) {
        await this.updateCategoryName(categoryId);
      } else {
        this.selectedCategoryName.set(&#x27;&#x27;);
      }
    });

    // Check if editing
    this.carId &#x3D; this.route.snapshot.paramMap.get(&#x27;id&#x27;);
    if (this.carId) {
      this.editMode.set(true);
    }

    // Load brands and models
    await this.formService.loadBrandsAndModels();

    // ✅ CRITICAL: Load FIPE brands for autocomplete
    await this.loadFIPEBrands();

    // Load car data if editing
    if (this.carId) {
      const loaded &#x3D; await this.formService.loadCarForEditing(this.carId);
      if (!loaded) {
        alert(&#x27;No se pudo cargar el auto&#x27;);
        await this.router.navigate([&#x27;/cars/my-cars&#x27;]);
        return;
      }
      await this.photoService.loadExistingPhotos(this.carId);
      await this.loadPricingOverrides(this.carId);
    } else {
      // Auto-fill from last car
      await this.formService.autoFillFromLastCar();
    }
  }

  /**
   * ✅ NEW: Update selectedCategoryName when category_id changes
   */
  private async updateCategoryName(categoryId: string): Promise&lt;void&gt; {
    try {
      console.log(&#x27;[PublishCarV2] updateCategoryName called with categoryId:&#x27;, categoryId);
      const categories &#x3D; await this.pricingService.getVehicleCategories();
      console.log(&#x27;[PublishCarV2] Loaded categories:&#x27;, categories.length);
      // eslint-disable-next-line @typescript-eslint/no-explicit-any
      const category &#x3D; categories.find((c: any) &#x3D;&gt; c.id &#x3D;&#x3D;&#x3D; categoryId);
      if (category) {
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        const categoryName &#x3D; (category as any).name_es || category.name;
        console.log(&#x27;[PublishCarV2] ✅ Category name updated:&#x27;, categoryName);
        this.selectedCategoryName.set(categoryName);
      } else {
        console.warn(&#x27;[PublishCarV2] ⚠️ Category not found for ID:&#x27;, categoryId);
      }
    } catch (error) {
      console.error(&#x27;[PublishCarV2] ❌ Error updating category name:&#x27;, error);
    }
  }

  private async loadPricingOverrides(carId: string): Promise&lt;void&gt; {
    try {
      const { data, error } &#x3D; await this.supabase
        .from(&#x27;pricing_overrides&#x27;)
        .select(&#x27;day, price_per_day&#x27;)
        .eq(&#x27;car_id&#x27;, carId)
        .order(&#x27;day&#x27;, { ascending: true });
      if (error) throw error;
      this.pricingOverrides.set((data as { day: string; price_per_day: number }[]) || []);
    } catch (err) {
      console.warn(&#x27;pricing-overrides-load&#x27;, err);
    }
  }

  /**
   * Handle brand selection change
   */
  onBrandChange(): void {
    const brandId &#x3D; this.publishForm.get(&#x27;brand_id&#x27;)?.value;
    this.formService.filterModelsByBrand(brandId);
    // Reset model selection
    this.publishForm.get(&#x27;model_id&#x27;)?.setValue(&#x27;&#x27;);
  }

  /**
   * Handle model selection change
   */
  onModelChange(): void {
    // Model info computed automatically via selectedModelInfo
  }

  /**
   * Set pricing strategy (dynamic vs custom)
   */
  setPricingStrategy(mode: &#x27;dynamic&#x27; | &#x27;custom&#x27;): void {
    this.formService.setPricingStrategy(mode);
  }

  /**
   * Check if dynamic pricing is enabled (legacy method)
   */
  isDynamicPricing(): boolean {
    return this.formService.isDynamicPricing();
  }

  /**
   * Enable manual editing of value_usd field
   */
  enableManualValueEdit(): void {
    this.allowManualValueEdit.set(true);
  }

  /**
   * ✅ NEW: Load FIPE brands from API
   */
  async loadFIPEBrands(): Promise&lt;void&gt; {
    this.isLoadingFIPEBrands.set(true);
    try {
      const brands &#x3D; await this.pricingService.getFipeBrands();
      console.log(&#x27;[PublishCarV2] Loaded FIPE brands:&#x27;, brands.length);

      // Convert to FIPEAutocompleteOption format
      const formattedBrands &#x3D; brands.map((brand) &#x3D;&gt; ({
        code: brand.code,
        name: brand.name,
      }));

      this.fipeBrands.set(formattedBrands);
      console.log(&#x27;[PublishCarV2] Formatted brands:&#x27;, formattedBrands.slice(0, 5));
    } catch (error) {
      console.error(&#x27;[PublishCarV2] Error loading FIPE brands:&#x27;, error);
      this.fipeBrands.set([]);
    } finally {
      this.isLoadingFIPEBrands.set(false);
    }
  }

  /**
   * Handle FIPE brand selection
   */
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  async onFIPEBrandSelected(brand: any): Promise&lt;void&gt; {
    console.log(&#x27;[PublishCarV2] Brand selected:&#x27;, brand);
    this.selectedFIPEBrand.set(brand);
    this.selectedFIPEModel.set(null);
    this.fipeModels.set([]);

    // ✅ CRITICAL: brand_id y model_id son UUIDs, NO códigos FIPE
    // Los códigos FIPE se guardan en fipe_code y los nombres en brand_text_backup/model_text_backup
    // Por ahora, dejamos brand_id/model_id como null y usamos los campos de texto
    this.publishForm?.get(&#x27;brand_id&#x27;)?.setValue(null);
    this.publishForm?.get(&#x27;model_id&#x27;)?.setValue(null);

    // Guardar nombre de marca en brand_text_backup (para backward compatibility)
    if (brand &amp;&amp; brand.name) {
      this.publishForm?.patchValue({
        brand_text_backup: brand.name,
      });
    }

    // Load models for selected brand
    if (brand &amp;&amp; brand.code) {
      this.isLoadingFIPEModels.set(true);
      try {
        const models &#x3D; await this.pricingService.getFipeModels(brand.code);
        console.log(&#x27;[PublishCarV2] Loaded models for brand:&#x27;, models.length);

        // Convert to FIPEAutocompleteOption format
        const formattedModels &#x3D; models.map((model) &#x3D;&gt; ({
          code: model.code,
          name: model.name,
        }));

        this.fipeModels.set(formattedModels);
      } catch (error) {
        console.error(&#x27;[PublishCarV2] Error loading FIPE models:&#x27;, error);
        this.fipeModels.set([]);
      } finally {
        this.isLoadingFIPEModels.set(false);
      }
    }
  }

  /**
   * Handle FIPE model selection
   */
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  async onFIPEModelSelected(model: any): Promise&lt;void&gt; {
    console.log(&#x27;[PublishCarV2] Model selected:&#x27;, model);
    this.selectedFIPEModel.set(model);

    // ✅ CRITICAL: model_id es UUID, NO código FIPE
    // Guardar nombre de modelo en model_text_backup (para backward compatibility)
    this.publishForm?.get(&#x27;model_id&#x27;)?.setValue(null);

    if (model &amp;&amp; model.name) {
      this.publishForm?.patchValue({
        model_text_backup: model.name,
      });
    }

    // Fetch vehicle value from FIPE API when we have brand, model, and year
    await this.fetchFIPEValue();
  }

  /**
   * Handle year change (trigger FIPE value fetch)
   */
  async onYearChange(): Promise&lt;void&gt; {
    const year &#x3D; this.publishForm?.get(&#x27;year&#x27;)?.value;
    console.log(&#x27;[PublishCarV2] Year changed to:&#x27;, year);

    // Re-fetch FIPE value if we have all required data
    if (year &amp;&amp; this.selectedFIPEBrand() &amp;&amp; this.selectedFIPEModel()) {
      await this.fetchFIPEValue();
    }
  }

  /**
   * ✅ NEW: Fetch FIPE value when brand, model, and year are available
   */
  async fetchFIPEValue(): Promise&lt;void&gt; {
    const brand &#x3D; this.selectedFIPEBrand();
    const model &#x3D; this.selectedFIPEModel();
    const year &#x3D; this.publishForm?.get(&#x27;year&#x27;)?.value;

    // Need all three to fetch value
    if (!brand || !model || !year) {
      console.log(&#x27;[PublishCarV2] Cannot fetch FIPE value - missing data:&#x27;, {
        brand: !!brand,
        model: !!model,
        year: !!year,
      });
      return;
    }

    console.log(&#x27;[PublishCarV2] Fetching FIPE value for:&#x27;, {
      brand: brand.name,
      model: model.name,
      year,
    });

    this.isFetchingFIPEValue.set(true);
    this.fipeError.set(null);
    this.fipeErrorCode.set(null);
    this.fipeSuggestions.set([]);

    try {
      const result &#x3D; await this.pricingService.getFipeValueRealtime({
        brand: brand.name,
        model: model.name,
        year: year,
        country: &#x27;AR&#x27;,
      });

      console.log(&#x27;[PublishCarV2] FIPE value result:&#x27;, result);

      if (result &amp;&amp; result.success &amp;&amp; result.data) {
        // Store multi-currency values
        this.fipeMultiCurrencyValues.set({
          value_brl: result.data.value_brl,
          value_usd: result.data.value_usd,
          value_ars: result.data.value_ars,
          fipe_code: result.data.fipe_code,
          reference_month: result.data.reference_month,
        });

        // Ensure value_usd is a number
        const valueUsd &#x3D; Number(result.data.value_usd);
        if (isNaN(valueUsd) || valueUsd &lt;&#x3D; 0) {
          console.error(
            &#x27;[PublishCarV2] Invalid value_usd from pricing API:&#x27;,
            result.data.value_usd,
          );
          this.fipeError.set(
            &#x27;No se pudo calcular el valor automáticamente. Podés ingresarlo manualmente.&#x27;,
          );

          // ✅ REMOVED: No longer blocking submit - FIPE is optional
          return;
        }

        // Auto-fill the value_usd field
        this.publishForm.get(&#x27;value_usd&#x27;)?.setValue(valueUsd, {
          emitEvent: true, // ✅ FIX: Trigger valueChanges to recalculate price
        });

        // ✅ NEW: Auto-categorize vehicle based on value USD
        console.log(&#x27;[PublishCarV2] Calling autoCategorizeVehicle with:&#x27;, {
          valueUsd,
          brand: brand.name,
          model: model.name,
          year,
        });
        await this.autoCategorizeVehicle(valueUsd, brand.name, model.name, year);

        // Mark as auto-calculated
        this.valueAutoCalculated.set(true);
        this.allowManualValueEdit.set(false);
        this.fipeError.set(null);
        this.fipeErrorCode.set(null);
        this.fipeSuggestions.set([]);

        // ✅ CRITICAL: Force price calculation after setting value_usd
        if (this.isDynamicPricing()) {
          setTimeout(async () &#x3D;&gt; {
            await this.calculateSuggestedRate();
          }, 100);
        }
      } else {
        // ✅ NEW: Enhanced error handling with error codes and suggestions
        const errorMsg &#x3D; result?.error || &#x27;No se pudo obtener el valor del vehículo&#x27;;
        const errorCode &#x3D; result?.errorCode || &#x27;UNKNOWN&#x27;;
        const suggestions &#x3D; result?.suggestions || [];

        console.warn(&#x27;[PublishCarV2] FIPE lookup failed:&#x27;, {
          errorMsg,
          errorCode,
          suggestions,
          availableOptions: result?.availableOptions,
        });

        this.fipeError.set(errorMsg);
        this.fipeErrorCode.set(errorCode);
        this.fipeSuggestions.set(suggestions);
        this.valueAutoCalculated.set(false);

        // ✅ FIPE es opcional - permitir input manual
        this.allowManualValueEdit.set(true);
        console.log(&#x27;[PublishCarV2] ⚠️ FIPE failed but manual input allowed&#x27;);
      }
    } catch (err) {
      console.error(&#x27;[PublishCarV2] Error fetching FIPE value:&#x27;, err);
      this.isFetchingFIPEValue.set(false);
      this.fipeError.set(&#x27;Error al consultar el valor. Intentá nuevamente en unos momentos.&#x27;);
      this.fipeErrorCode.set(&#x27;NETWORK_ERROR&#x27;);
      this.fipeSuggestions.set([
        &#x27;Verifica tu conexión a internet&#x27;,
        &#x27;Reintenta en unos momentos&#x27;,
        &#x27;Si el problema persiste, contacta a soporte&#x27;,
      ]);

      // ✅ FIPE es opcional - permitir input manual
      this.valueAutoCalculated.set(false);
      this.allowManualValueEdit.set(true);
    } finally {
      this.isFetchingFIPEValue.set(false);
    }
  }

  /**
   * ✅ NEW: Auto-categorize vehicle based on value USD or brand/model/year
   * Uses two methods:
   * 1. Try estimateVehicleValue() for precise category from pricing_models
   * 2. Fallback to value-based classification if not found
   */
  private async autoCategorizeVehicle(
    valueUsd: number,
    brand: string,
    model: string,
    year: number,
  ): Promise&lt;void&gt; {
    console.log(&#x27;[PublishCarV2] Auto-categorizing vehicle:&#x27;, { valueUsd, brand, model, year });

    // Validate inputs
    if (!valueUsd || valueUsd &lt;&#x3D; 0) {
      console.warn(&#x27;[PublishCarV2] Invalid value_usd for categorization:&#x27;, valueUsd);
      return;
    }

    // Method 1: Try to get category from pricing_models (most accurate)
    try {
      const estimate &#x3D; await this.pricingService.estimateVehicleValue({
        brand,
        model,
        year,
        country: &#x27;AR&#x27;,
      });

      if (estimate &amp;&amp; estimate.category_id) {
        console.log(
          &#x27;[PublishCarV2] ✅ Category from pricing_models:&#x27;,
          estimate.category_name,
          &#x60;(${valueUsd} USD)&#x60;,
          &#x27;category_id:&#x27;,
          estimate.category_id,
        );
        const categoryControl &#x3D; this.publishForm.get(&#x27;category_id&#x27;);
        if (categoryControl) {
          categoryControl.setValue(estimate.category_id, { emitEvent: true });
          categoryControl.markAsTouched();
          categoryControl.updateValueAndValidity();
          console.log(
            &#x27;[PublishCarV2] Category control updated, value:&#x27;,
            categoryControl.value,
            &#x27;valid:&#x27;,
            categoryControl.valid,
            &#x27;form valid:&#x27;,
            this.publishForm.valid,
          );
        } else {
          console.error(&#x27;[PublishCarV2] ❌ category_id control not found in form!&#x27;);
        }
        // Update name immediately
        this.selectedCategoryName.set(estimate.category_name || &#x27;&#x27;);
        return;
      }
    } catch (error) {
      console.warn(&#x27;[PublishCarV2] Could not get category from pricing_models:&#x27;, error);
    }

    // Method 2: Classify by value USD (fallback)
    // Load categories to get IDs
    let categories;
    try {
      categories &#x3D; await this.pricingService.getVehicleCategories();
      if (!categories || categories.length &#x3D;&#x3D;&#x3D; 0) {
        console.warn(&#x27;[PublishCarV2] No categories available for auto-classification&#x27;);
        return;
      }
    } catch (error) {
      console.error(&#x27;[PublishCarV2] Error loading categories:&#x27;, error);
      return;
    }

    let categoryCode: string;
    // ✅ UPDATED: New category thresholds
    // Economy: &lt; $13,000
    // Standard: $13,000 - $25,000
    // Premium: $25,000 - $40,000
    // Luxury: &gt;&#x3D; $40,000
    if (valueUsd &lt; 13000) {
      categoryCode &#x3D; &#x27;economy&#x27;;
    } else if (valueUsd &lt; 25000) {
      categoryCode &#x3D; &#x27;standard&#x27;;
    } else if (valueUsd &lt; 40000) {
      categoryCode &#x3D; &#x27;premium&#x27;;
    } else {
      categoryCode &#x3D; &#x27;luxury&#x27;;
    }

    console.log(&#x27;[PublishCarV2] Value-based classification:&#x27;, { valueUsd, categoryCode });

    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    const category &#x3D; categories.find((c: any) &#x3D;&gt; c.code &#x3D;&#x3D;&#x3D; categoryCode);
    if (category) {
      // eslint-disable-next-line @typescript-eslint/no-explicit-any
      const categoryName &#x3D; (category as any).name_es || category.name;
      console.log(
        &#x27;[PublishCarV2] ✅ Category from value USD:&#x27;,
        categoryName,
        &#x60;(${valueUsd} USD)&#x60;,
        &#x27;category_id:&#x27;,
        category.id,
      );
      const categoryControl &#x3D; this.publishForm.get(&#x27;category_id&#x27;);
      if (categoryControl) {
        categoryControl.setValue(category.id, { emitEvent: true });
        categoryControl.markAsTouched();
        categoryControl.updateValueAndValidity();
        console.log(
          &#x27;[PublishCarV2] Category control updated, value:&#x27;,
          categoryControl.value,
          &#x27;valid:&#x27;,
          categoryControl.valid,
          &#x27;form valid:&#x27;,
          this.publishForm.valid,
        );
      } else {
        console.error(&#x27;[PublishCarV2] ❌ category_id control not found in form!&#x27;);
      }
      // Update name immediately
      this.selectedCategoryName.set(categoryName);
    } else {
      console.error(
        &#x27;[PublishCarV2] ❌ Category not found for code:&#x27;,
        categoryCode,
        &#x27;Available codes:&#x27;,
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        categories.map((c: any) &#x3D;&gt; c.code),
      );
    }
  }

  /**
   * ✅ NEW: Calculate suggested rate based on vehicle value and category
   * Called when: vehicle value changes, category changes, or dynamic pricing toggled on
   */
  private async calculateSuggestedRate(): Promise&lt;void&gt; {
    const valueUsd &#x3D; this.publishForm?.get(&#x27;value_usd&#x27;)?.value;
    const categoryId &#x3D; this.publishForm?.get(&#x27;category_id&#x27;)?.value;
    const isDynamic &#x3D; this.isDynamicPricing();

    console.log(&#x27;[PublishCarV2] calculateSuggestedRate called:&#x27;, {
      valueUsd,
      categoryId,
      isDynamic,
    });

    // Only calculate if dynamic pricing is enabled
    if (!isDynamic) {
      console.log(&#x27;[PublishCarV2] Dynamic pricing not enabled, skipping calculation&#x27;);
      this.suggestedPrice.set(0);
      return;
    }

    // Need vehicle value and category
    if (!valueUsd) {
      console.warn(&#x27;[PublishCarV2] No value_usd, cannot calculate price&#x27;);
      this.suggestedPrice.set(0);
      return;
    }

    if (!categoryId) {
      console.warn(
        &#x27;[PublishCarV2] No category_id selected. Price calculation requires a category.&#x27;,
      );
      this.suggestedPrice.set(0);
      return;
    }

    this.isCalculatingSuggestedPrice.set(true);

    try {
      // Call pricing service to get suggested daily rate
      const suggestedRate &#x3D; await this.pricingService.calculateSuggestedRate({
        categoryId: categoryId,
        estimatedValueUsd: valueUsd,
      });

      if (suggestedRate &amp;&amp; suggestedRate &gt; 0) {
        // Round to nearest integer
        const roundedPrice &#x3D; Math.round(suggestedRate);
        this.suggestedPrice.set(roundedPrice);

        // ✅ CRITICAL: Also update the form field directly to ensure it&#x27;s set
        if (this.publishForm &amp;&amp; this.isDynamicPricing()) {
          const currentPrice &#x3D; this.publishForm.get(&#x27;price_per_day&#x27;)?.value;
          console.log(&#x27;[PublishCarV2] Updating price_per_day:&#x27;, {
            currentPrice,
            suggestedPrice: roundedPrice,
            willUpdate: !currentPrice || currentPrice !&#x3D;&#x3D; roundedPrice,
          });

          // Always update when in dynamic mode
          this.publishForm.get(&#x27;price_per_day&#x27;)?.setValue(roundedPrice, { emitEvent: false });
        }
      }
    } catch (error) {
      console.error(&#x27;[PublishCarV2] Error calculating suggested rate:&#x27;, error);
      this.suggestedPrice.set(0);
    } finally {
      this.isCalculatingSuggestedPrice.set(false);
    }
  }

  /**
   * Get placeholder text for model selection
   */
  getModelPlaceholder(): string {
    const selectedBrand &#x3D; this.selectedFIPEBrand();
    if (!selectedBrand) {
      return &#x27;Primero selecciona una marca&#x27;;
    }
    return &#x60;Buscar modelo de ${selectedBrand.name}...&#x60;;
  }

  /**
   * Get helper text for model selection
   */
  getModelHelperText(): string {
    const selectedBrand &#x3D; this.selectedFIPEBrand();
    if (!selectedBrand) {
      return &#x27;Primero selecciona una marca&#x27;;
    }
    return &#x60;Selecciona el modelo de ${selectedBrand.name}&#x60;;
  }

  /**
   * Handle photo selection
   */
  async onPhotoSelected(event: Event): Promise&lt;void&gt; {
    await this.photoService.selectPhotos(event);
  }

  /**
   * Handle stock photos selection
   */
  async onStockPhotosSelected(photos: File[]): Promise&lt;void&gt; {
    await this.photoService.addStockPhotosFiles(photos);
    this.showStockPhotosModal.set(false);
  }

  /**
   * Handle AI photos generation
   */
  async onAIPhotosGenerated(photos: File[]): Promise&lt;void&gt; {
    await this.photoService.addAIPhotosFiles(photos);
    this.showAIPhotosModal.set(false);
  }

  /**
   * Get current brand name
   * ✅ Updated to support FIPE autocomplete
   */
  getCurrentBrand(): string {
    // Try FIPE signal first
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    const fipeBrand &#x3D; this.selectedFIPEBrand() as any;
    if (fipeBrand &amp;&amp; fipeBrand.code) {
      return fipeBrand.name;
    }

    // Try text backup (for FIPE)
    const brandTextBackup &#x3D; this.publishForm?.get(&#x27;brand_text_backup&#x27;)?.value;
    if (brandTextBackup) {
      return brandTextBackup;
    }

    // Fallback to traditional brand_id (UUID)
    const brandId &#x3D; this.publishForm?.get(&#x27;brand_id&#x27;)?.value;
    if (!brandId) return &#x27;&#x27;;
    const brand &#x3D; this.brands().find((b) &#x3D;&gt; b.id &#x3D;&#x3D;&#x3D; brandId);
    return brand?.name || &#x27;&#x27;;
  }

  /**
   * Get current model name
   * ✅ Updated to support FIPE autocomplete
   */
  getCurrentModel(): string {
    // Try FIPE signal first
    const fipeModel &#x3D; this.selectedFIPEModel();
    if (fipeModel &amp;&amp; fipeModel.name) {
      return fipeModel.name;
    }

    // Try text backup (for FIPE)
    const modelTextBackup &#x3D; this.publishForm?.get(&#x27;model_text_backup&#x27;)?.value;
    if (modelTextBackup) {
      return modelTextBackup;
    }

    // Fallback to traditional model_id (UUID)
    const modelId &#x3D; this.publishForm?.get(&#x27;model_id&#x27;)?.value;
    if (!modelId) return &#x27;&#x27;;
    const model &#x3D; this.models().find((m) &#x3D;&gt; m.id &#x3D;&#x3D;&#x3D; modelId);
    return model?.name || &#x27;&#x27;;
  }

  /**
   * Get current year
   */
  getCurrentYear(): number {
    return this.publishForm?.get(&#x27;year&#x27;)?.value || new Date().getFullYear();
  }

  /**
   * Generate AI photos
   */
  async generateAIPhotos(): Promise&lt;void&gt; {
    const brandId &#x3D; this.publishForm.get(&#x27;brand_id&#x27;)?.value;
    const modelId &#x3D; this.publishForm.get(&#x27;model_id&#x27;)?.value;
    const year &#x3D; this.publishForm.get(&#x27;year&#x27;)?.value;

    if (!brandId || !modelId || !year) {
      alert(&#x27;Debes seleccionar marca, modelo y año primero&#x27;);
      return;
    }

    const brand &#x3D; this.brands().find((b) &#x3D;&gt; b.id &#x3D;&#x3D;&#x3D; brandId);
    const model &#x3D; this.models().find((m) &#x3D;&gt; m.id &#x3D;&#x3D;&#x3D; modelId);

    if (!brand || !model) {
      alert(&#x27;No se pudo obtener información del vehículo&#x27;);
      return;
    }

    await this.photoService.generateAIPhotos(brand.name, model.name, year);
  }

  /**
   * Remove photo at index
   */
  removePhoto(index: number): void {
    this.photoService.removePhoto(index);
  }

  /**
   * Use current GPS location
   */
  async useCurrentLocation(): Promise&lt;void&gt; {
    const location &#x3D; await this.locationService.useCurrentLocation();

    if (location) {
      // Reverse geocode to get address
      const address &#x3D; await this.locationService.reverseGeocode(
        location.latitude,
        location.longitude,
      );

      if (address) {
        // Fill address fields - combine street + number for display
        const streetWithNumber &#x3D; address.streetNumber
          ? &#x60;${address.street} ${address.streetNumber}&#x60;
          : address.street;

        this.publishForm.patchValue({
          location_street: streetWithNumber,
          location_street_number: address.streetNumber,
          location_city: address.city,
          location_state: address.state,
          location_country: address.country,
        });
        this.notificationManager.success(
          &#x27;Ubicación actualizada&#x27;,
          &#x27;Se completó la dirección automáticamente.&#x27;,
        );
      } else {
        this.notificationManager.warning(
          &#x27;Ubicación detectada&#x27;,
          &#x27;Tenemos tus coordenadas, pero no pudimos encontrar la dirección exacta. Por favor completa los campos manualmente.&#x27;,
        );
      }
    }
  }

  /**
   * Open MercadoPago onboarding modal
   */
  async openOnboardingModal(): Promise&lt;void&gt; {
    await this.mpService.openOnboardingModal();
  }

  /**
   * Dismiss onboarding reminder
   */
  dismissOnboardingReminder(): void {
    this.mpService.dismissOnboardingReminder();
  }

  /**
   * Submit form
   */
  async onSubmit(): Promise&lt;void&gt; {
    // ✅ NUEVO: Solo validar campos mínimos (marca, modelo, año, fotos)
    // Verificar tanto valores del formulario como signals FIPE
    const brandId &#x3D; this.publishForm.get(&#x27;brand_id&#x27;)?.value;
    const modelId &#x3D; this.publishForm.get(&#x27;model_id&#x27;)?.value;
    const brandTextBackup &#x3D; this.publishForm.get(&#x27;brand_text_backup&#x27;)?.value;
    const modelTextBackup &#x3D; this.publishForm.get(&#x27;model_text_backup&#x27;)?.value;
    const fipeBrand &#x3D; this.selectedFIPEBrand();
    const fipeModel &#x3D; this.selectedFIPEModel();

    const hasBrand &#x3D; !!(brandId || brandTextBackup || (fipeBrand &amp;&amp; fipeBrand.name));
    const hasModel &#x3D; !!(modelId || modelTextBackup || (fipeModel &amp;&amp; fipeModel.name));
    const year &#x3D; this.publishForm.get(&#x27;year&#x27;)?.value;

    if (!hasBrand || !hasModel || !year) {
      alert(&#x27;Por favor completa: Marca, Modelo y Año&#x27;);
      return;
    }

    if (!this.photoService.hasMinimumPhotos()) {
      this.notificationManager.error(
        &#x27;Fotos requeridas&#x27;,
        &#x27;Debes subir al menos 3 fotos para publicar tu auto.&#x27;,
      );
      return;
    }

    const description &#x3D; this.publishForm.get(&#x27;description&#x27;)?.value as string | undefined;
    if (!description || description.trim().length &lt; 40) {
      this.notificationManager.error(
        &#x27;Descripción incompleta&#x27;,
        &#x27;Agrega una descripción clara (mínimo 40 caracteres) para que los viajeros conozcan tu auto.&#x27;,
      );
      return;
    }

    if (
      !this.publishForm.get(&#x27;availability_start_date&#x27;)?.value ||
      !this.publishForm.get(&#x27;availability_end_date&#x27;)?.value
    ) {
      this.notificationManager.error(
        &#x27;Disponibilidad faltante&#x27;,
        &#x27;Indicá desde cuándo y hasta cuándo está disponible el auto.&#x27;,
      );
      return;
    }

    if (!this.isAvailabilityRangeValid()) {
      this.notificationManager.error(
        &#x27;Fechas inválidas&#x27;,
        &#x27;La fecha de fin debe ser posterior o igual a la fecha de inicio.&#x27;,
      );
      return;
    }

    // ✅ CRITICAL: Validar ubicación antes de publicar
    if (!this.hasValidLocation()) {
      this.notificationManager.error(
        &#x27;Ubicación requerida&#x27;,
        &#x27;Debes seleccionar una ubicación en el mapa o usar tu ubicación actual para que tu auto aparezca en las búsquedas.&#x27;,
      );
      return;
    }

    const mpReady &#x3D; this.mpReady();

    if (!mpReady) {
      this.notificationManager.warning(
        &#x27;Conectá Mercado Pago&#x27;,
        &#x27;Vinculá tu cuenta para recibir pagos. Podés seguir y publicaremos el auto igual.&#x27;,
      );

      // No bloqueamos la publicación: abrimos el flujo de onboarding en background
      void this.openOnboardingModal();
    }

    // ✅ IMPORTANTE: NO bloqueamos la publicación por documentos faltantes
    // El usuario puede publicar su auto sin documentos, pero le notificaremos
    // después de la publicación que faltan documentos (DNI, Cédula, Seguro, etc.)

    this.isSubmitting.set(true);

    try {
      // Get form data
      const formData &#x3D; this.formService.getFormData();

      console.log(&#x27;📝 Form data before processing:&#x27;, {
        brand_id: formData.brand_id,
        model_id: formData.model_id,
        year: formData.year,
        price_per_day: formData.price_per_day,
        pricing_strategy: formData.pricing_strategy,
      });

      // ✅ NUEVO: Establecer valores por defecto para campos opcionales
      // ✅ CRITICAL: price_per_day siempre debe ser &gt; 0 para pasar validación
      const pricePerDay &#x3D; formData.price_per_day
        ? Number(formData.price_per_day)
        : formData.pricing_strategy &#x3D;&#x3D;&#x3D; &#x27;dynamic&#x27;
          ? 50
          : 100; // Default: 50 si dinámico, 100 si custom

      console.log(&#x27;💰 Calculated price_per_day:&#x27;, pricePerDay);

      // eslint-disable-next-line @typescript-eslint/no-explicit-any
      const carData: any &#x3D; {
        ...formData,
        // Campos opcionales con valores por defecto
        color: formData.color || &#x27;No especificado&#x27;,
        mileage: formData.mileage || 0,
        transmission: (formData.transmission || &#x27;manual&#x27;) as string,
        fuel: (formData.fuel || &#x27;nafta&#x27;) as string,
        price_per_day: pricePerDay, // ✅ Siempre un número válido &gt; 0
        value_usd: formData.value_usd || 10000, // Valor por defecto si no se especifica
        category_id: formData.category_id || null, // Se puede auto-categorizar después
        min_rental_days: formData.min_rental_days || 1,
        max_rental_days: formData.max_rental_days || null,
        deposit_required: formData.deposit_required ?? true,
        deposit_amount: formData.deposit_amount || 200,
        insurance_included: formData.insurance_included ?? false,
        auto_approval: formData.auto_approval ?? true,
        // Location opcional
        location_street: formData.location_street || &#x27;&#x27;,
        location_street_number: formData.location_street_number || &#x27;&#x27;,
        location_city: formData.location_city || &#x27;&#x27;,
        location_state: formData.location_state || &#x27;&#x27;,
        location_country: formData.location_country || &#x27;AR&#x27;,
      };

      // Get coordinates (manual or from address)
      let coordinates &#x3D; this.locationService.getCoordinates();
      if (!coordinates &amp;&amp; carData.location_street &amp;&amp; carData.location_city) {
        // Geocode address si está disponible
        const address &#x3D; {
          street: carData.location_street as string,
          streetNumber: carData.location_street_number as string,
          city: carData.location_city as string,
          state: carData.location_state as string,
          country: carData.location_country as string,
        };
        coordinates &#x3D; await this.locationService.geocodeAddress(address);
      }

      // Agregar coordenadas (solo si existen)
      // ✅ CRITICAL: Solo incluir location_lat/location_lng si tienen valores válidos
      // Esto evita errores de schema cache si las columnas no están disponibles
      if (coordinates?.latitude &amp;&amp; coordinates?.longitude) {
        carData.location_lat &#x3D; coordinates.latitude;
        carData.location_lng &#x3D; coordinates.longitude;
      } else {
        // No incluir las propiedades si no hay coordenadas
        // El backend puede manejar autos sin coordenadas
        delete carData.location_lat;
        delete carData.location_lng;
      }

      carData.status &#x3D; &#x27;active&#x27; as const; // Car is active inmediatamente y aparecerá en el mapa

      console.log(&#x27;🚗 Final car data to submit:&#x27;, {
        ...carData,
        // Redact sensitive data
        owner_id: carData.owner_id ? &#x27;***&#x27; : undefined,
      });

      let carId: string;

      if (this.editMode() &amp;&amp; this.carId) {
        // Update existing car
        await this.carsService.updateCar(this.carId, carData);
        carId &#x3D; this.carId;

        // Mostrar notificación de actualización
        this.notificationManager.success(
          &#x27;✅ Auto actualizado exitosamente&#x27;,
          &#x27;Los cambios se han guardado correctamente. Tu auto ya está visible con la información actualizada.&#x27;,
          6000,
        );
      } else {
        // Create new car
        const newCar &#x3D; await this.carsService.createCar(carData);
        carId &#x3D; newCar.id;

        // Mostrar notificación de éxito completa
        this.notificationManager.success(
          &#x27;🎉 ¡Auto publicado exitosamente!&#x27;,
          &#x27;Tu auto ya está visible en el marketplace. Podrás acompañar su rendimiento, ver cuántas personas lo están viendo, recibir mensajes en el chat y editarlo desde tu lista. ¡Esperamos que puedas realizar muchos negocios exitosos!&#x27;,
          8000,
        );
      }

      // Upload photos (if new or changed)
      if (this.photoService.getPhotoCount() &gt; 0) {
        await this.photoService.uploadPhotos(carId);
      }

      // ✅ NUEVO: Notificar documentos faltantes (NO bloquea la publicación)
      // El auto ya fue publicado exitosamente, ahora solo informamos al usuario
      // que faltan documentos para completar su perfil
      if (!this.editMode()) {
        // Ejecutar después de un pequeño delay para que el usuario vea primero
        // la notificación de éxito de publicación
        setTimeout(() &#x3D;&gt; {
          this.checkMissingDocuments(carId).catch(() &#x3D;&gt; {
            // Silently fail - notification is optional
          });
        }, 2000); // 2 segundos después de la publicación exitosa
      }

      // Navigate to my cars
      await this.router.navigate([&#x27;/cars/my-cars&#x27;]);
    } catch (error) {
      console.error(&#x27;❌ Failed to publish car:&#x27;, error);

      // Log detailed error information
      if (error instanceof Error) {
        console.error(&#x27;Error message:&#x27;, error.message);
        console.error(&#x27;Error stack:&#x27;, error.stack);
      } else if (error &amp;&amp; typeof error &#x3D;&#x3D;&#x3D; &#x27;object&#x27;) {
        console.error(&#x27;Error object:&#x27;, JSON.stringify(error, null, 2));
        if (&#x27;message&#x27; in error) {
          console.error(&#x27;Error message:&#x27;, (error as { message: string }).message);
        }
        if (&#x27;code&#x27; in error) {
          console.error(&#x27;Error code:&#x27;, (error as { code: string }).code);
        }
        if (&#x27;details&#x27; in error) {
          console.error(&#x27;Error details:&#x27;, (error as { details: string }).details);
        }
        if (&#x27;hint&#x27; in error) {
          console.error(&#x27;Error hint:&#x27;, (error as { hint: string }).hint);
        }
      }

      // Show user-friendly error message
      let errorTitle &#x3D; &#x27;Error al publicar el auto&#x27;;
      let errorMessage &#x3D; &#x27;Por favor intenta nuevamente.&#x27;;

      if (error instanceof Error) {
        // Check for specific error types
        if (error.message.includes(&#x27;Marca y modelo son requeridos&#x27;)) {
          errorTitle &#x3D; &#x27;Información incompleta&#x27;;
          errorMessage &#x3D; &#x27;Por favor completa la marca y el modelo del vehículo.&#x27;;
        } else if (error.message.includes(&#x27;Ubicación del vehículo requerida&#x27;)) {
          errorTitle &#x3D; &#x27;Ubicación requerida&#x27;;
          errorMessage &#x3D;
            &#x27;Selecciona una ubicación en el mapa o usa tu ubicación actual para que tu auto aparezca en las búsquedas.&#x27;;
        } else if (error.message.includes(&#x27;Precio por día debe ser mayor a 0&#x27;)) {
          errorTitle &#x3D; &#x27;Precio inválido&#x27;;
          errorMessage &#x3D; &#x27;El precio por día debe ser mayor a 0.&#x27;;
        } else if (error.message.includes(&#x27;Usuario no autenticado&#x27;)) {
          errorTitle &#x3D; &#x27;Sesión expirada&#x27;;
          errorMessage &#x3D; &#x27;Tu sesión ha expirado. Por favor inicia sesión nuevamente.&#x27;;
        } else if (error.message) {
          errorMessage &#x3D; error.message;
        }
      } else if (error &amp;&amp; typeof error &#x3D;&#x3D;&#x3D; &#x27;object&#x27; &amp;&amp; &#x27;message&#x27; in error) {
        const msg &#x3D; String((error as { message: string }).message);
        if (msg.includes(&#x27;permission denied&#x27;) || msg.includes(&#x27;RLS&#x27;)) {
          errorTitle &#x3D; &#x27;Permisos insuficientes&#x27;;
          errorMessage &#x3D; &#x27;No tienes permisos para realizar esta acción. Verifica tu sesión.&#x27;;
        } else if (msg) {
          errorMessage &#x3D; msg;
        }
      }

      // Mostrar notificación de error
      this.notificationManager.error(errorTitle, errorMessage);
    } finally {
      this.isSubmitting.set(false);
    }
  }

  /**
   * Go back to previous page
   */
  async goBack(): Promise&lt;void&gt; {
    await this.router.navigate([&#x27;/cars/my-cars&#x27;]);
  }

  /**
   * Verifica documentos faltantes y notifica al usuario
   */
  private async checkMissingDocuments(carId: string): Promise&lt;void&gt; {
    try {
      const missingDocs &#x3D; await this.documentsService.getMissingDocuments(carId);

      if (missingDocs.length &gt; 0) {
        const car &#x3D; await this.carsService.getCarById(carId);
        if (!car) return;

        const carName &#x3D; car.title || &#x60;${car.brand || &#x27;&#x27;} ${car.model || &#x27;&#x27;}&#x60;.trim() || &#x27;tu auto&#x27;;
        const documentsUrl &#x3D; &#x60;/cars/${carId}/documents&#x60;;

        // Notificar sobre cada documento faltante
        for (const docKind of missingDocs) {
          const documentType &#x3D; this.documentsService.getDocumentKindLabel(docKind);
          this.carOwnerNotifications.notifyMissingDocument(documentType, carName, documentsUrl);
          // Pequeña pausa entre notificaciones
          await new Promise((resolve) &#x3D;&gt; setTimeout(resolve, 1000));
        }
      }
    } catch {
      // Silently fail
    }
  }
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="templateData">
        <pre class="line-numbers"><code class="language-html">&lt;div
  class&#x3D;&quot;min-h-screen bg-gray-50/50 dark:bg-[#0f1117] py-8 px-4 transition-colors duration-300 text-slate-800 dark:text-slate-200 font-sans&quot;
&gt;
  &lt;div class&#x3D;&quot;max-w-5xl mx-auto&quot;&gt;
    &lt;!-- 1. Header Minimalista e Inspirador --&gt;
    &lt;header class&#x3D;&quot;mb-10 text-center sm:text-left sm:flex sm:items-end sm:justify-between&quot;&gt;
      &lt;div&gt;
        &lt;h1
          class&#x3D;&quot;text-3xl sm:text-4xl font-extrabold tracking-tight text-slate-900 dark:text-white mb-2&quot;
        &gt;
          {{ editMode() ? &#x27;Tu auto, mejorado.&#x27; : &#x27;Rentabilizá tu auto.&#x27; }}
        &lt;/h1&gt;
        &lt;p class&#x3D;&quot;text-lg text-slate-500 dark:text-slate-400 font-medium&quot;&gt;
          Configurá tu activo en minutos con seguridad garantizada.
        &lt;/p&gt;
      &lt;/div&gt;
      &lt;!-- Indicador de Progreso Sutil --&gt;
      &lt;div class&#x3D;&quot;hidden sm:block text-right&quot;&gt;
        &lt;div
          class&#x3D;&quot;inline-flex items-center gap-2 bg-white dark:bg-neutral-800 px-4 py-2 rounded-full shadow-sm border border-slate-100 dark:border-neutral-700&quot;
        &gt;
          &lt;span class&#x3D;&quot;relative flex h-3 w-3&quot;&gt;
            &lt;span
              class&#x3D;&quot;animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75&quot;
            &gt;&lt;/span&gt;
            &lt;span class&#x3D;&quot;relative inline-flex rounded-full h-3 w-3 bg-indigo-500&quot;&gt;&lt;/span&gt;
          &lt;/span&gt;
          &lt;span class&#x3D;&quot;text-sm font-semibold text-slate-700 dark:text-slate-300&quot;&gt;
            {{ editMode() ? &#x27;Edición activa&#x27; : &#x27;Creando publicación&#x27; }}
          &lt;/span&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/header&gt;

    &lt;div class&#x3D;&quot;grid gap-8 lg:grid-cols-12 items-start&quot;&gt;
      &lt;!-- COLUMNA PRINCIPAL (Formulario) --&gt;
      &lt;div class&#x3D;&quot;lg:col-span-8 space-y-8&quot;&gt;
        &lt;form
          [formGroup]&#x3D;&quot;publishForm&quot;
          (ngSubmit)&#x3D;&quot;onSubmit()&quot;
          class&#x3D;&quot;space-y-8&quot;
          data-testid&#x3D;&quot;publish-form&quot;
        &gt;
          &lt;!-- SECCIÓN 1: IDENTIDAD DEL VEHÍCULO (El &quot;Qué&quot;) --&gt;
          &lt;section
            class&#x3D;&quot;bg-white dark:bg-[#161821] rounded-3xl shadow-[0_2px_20px_rgba(0,0,0,0.04)] dark:shadow-none border border-slate-100 dark:border-neutral-800&quot;
          &gt;
            &lt;div class&#x3D;&quot;p-8&quot;&gt;
              &lt;div class&#x3D;&quot;flex items-center gap-3 mb-6&quot;&gt;
                &lt;div
                  class&#x3D;&quot;w-10 h-10 rounded-xl bg-indigo-50 dark:bg-indigo-500/10 flex items-center justify-center text-indigo-600 dark:text-indigo-400&quot;
                &gt;
                  &lt;svg
                    xmlns&#x3D;&quot;http://www.w3.org/2000/svg&quot;
                    class&#x3D;&quot;h-6 w-6&quot;
                    fill&#x3D;&quot;none&quot;
                    viewBox&#x3D;&quot;0 0 24 24&quot;
                    stroke&#x3D;&quot;currentColor&quot;
                  &gt;
                    &lt;path
                      stroke-linecap&#x3D;&quot;round&quot;
                      stroke-linejoin&#x3D;&quot;round&quot;
                      stroke-width&#x3D;&quot;2&quot;
                      d&#x3D;&quot;M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4&quot;
                    /&gt;
                  &lt;/svg&gt;
                &lt;/div&gt;
                &lt;h2 class&#x3D;&quot;text-xl font-bold text-slate-900 dark:text-white&quot;&gt;
                  ¿Qué auto vas a publicar?
                &lt;/h2&gt;
              &lt;/div&gt;

              &lt;div class&#x3D;&quot;grid grid-cols-1 md:grid-cols-2 gap-6&quot;&gt;
                &lt;!-- Marca --&gt;
                &lt;div class&#x3D;&quot;md:col-span-2 relative z-20&quot;&gt;
                  &lt;label class&#x3D;&quot;block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2&quot;
                    &gt;Marca&lt;/label
                  &gt;
                  &lt;app-fipe-autocomplete
                    [placeholder]&#x3D;&quot;&#x27;Ej: Toyota, Ford, BMW...&#x27;&quot;
                    [options]&#x3D;&quot;fipeBrands()&quot;
                    [isLoading]&#x3D;&quot;isLoadingFIPEBrands()&quot;
                    [selectedValue]&#x3D;&quot;selectedFIPEBrand()&quot;
                    [minChars]&#x3D;&quot;2&quot;
                    [showBrandLogos]&#x3D;&quot;true&quot;
                    (optionSelected)&#x3D;&quot;onFIPEBrandSelected($event)&quot;
                  &gt;&lt;/app-fipe-autocomplete&gt;
                  @if (
                    publishForm.get(&#x27;brand_text_backup&#x27;)?.invalid &amp;&amp;
                    (publishForm.get(&#x27;brand_text_backup&#x27;)?.dirty ||
                      publishForm.get(&#x27;brand_text_backup&#x27;)?.touched)
                  ) {
                    &lt;p class&#x3D;&quot;mt-2 text-sm text-rose-500 flex items-center gap-1&quot;&gt;
                      &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                        &lt;path
                          stroke-linecap&#x3D;&quot;round&quot;
                          stroke-linejoin&#x3D;&quot;round&quot;
                          stroke-width&#x3D;&quot;2&quot;
                          d&#x3D;&quot;M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                        /&gt;
                      &lt;/svg&gt;
                      Seleccioná una marca
                    &lt;/p&gt;
                  }
                &lt;/div&gt;

                &lt;!-- Año --&gt;
                &lt;div class&#x3D;&quot;relative z-10&quot;&gt;
                  &lt;label class&#x3D;&quot;block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2&quot;
                    &gt;Año&lt;/label
                  &gt;
                  &lt;select
                    formControlName&#x3D;&quot;year&quot;
                    (change)&#x3D;&quot;onYearChange()&quot;
                    [disabled]&#x3D;&quot;!selectedFIPEBrand()&quot;
                    class&#x3D;&quot;w-full bg-slate-50 dark:bg-neutral-800 border-0 rounded-xl px-4 py-3.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 transition-all disabled:opacity-50 font-medium&quot;
                  &gt;
                    &lt;option [ngValue]&#x3D;&quot;null&quot; disabled&gt;Año...&lt;/option&gt;
                    @for (year of yearOptions; track year) {
                      &lt;option [ngValue]&#x3D;&quot;year&quot;&gt;{{ year }}&lt;/option&gt;
                    }
                  &lt;/select&gt;
                  @if (
                    publishForm.get(&#x27;year&#x27;)?.invalid &amp;&amp;
                    (publishForm.get(&#x27;year&#x27;)?.dirty || publishForm.get(&#x27;year&#x27;)?.touched)
                  ) {
                    &lt;p class&#x3D;&quot;mt-2 text-sm text-rose-500 flex items-center gap-1&quot;&gt;
                      &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                        &lt;path
                          stroke-linecap&#x3D;&quot;round&quot;
                          stroke-linejoin&#x3D;&quot;round&quot;
                          stroke-width&#x3D;&quot;2&quot;
                          d&#x3D;&quot;M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                        /&gt;
                      &lt;/svg&gt;
                      Seleccioná un año
                    &lt;/p&gt;
                  }
                &lt;/div&gt;

                &lt;!-- Modelo --&gt;
                &lt;div class&#x3D;&quot;relative z-10&quot;&gt;
                  &lt;label class&#x3D;&quot;block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2&quot;
                    &gt;Modelo&lt;/label
                  &gt;
                  &lt;app-fipe-autocomplete
                    [placeholder]&#x3D;&quot;&#x27;Ej: Corolla, Focus...&#x27;&quot;
                    [options]&#x3D;&quot;fipeModels()&quot;
                    [isLoading]&#x3D;&quot;isLoadingFIPEModels()&quot;
                    [selectedValue]&#x3D;&quot;selectedFIPEModel()&quot;
                    [disabled]&#x3D;&quot;!selectedFIPEBrand() || !publishForm.get(&#x27;year&#x27;)?.value&quot;
                    [minChars]&#x3D;&quot;2&quot;
                    (optionSelected)&#x3D;&quot;onFIPEModelSelected($event)&quot;
                  &gt;&lt;/app-fipe-autocomplete&gt;
                  @if (
                    publishForm.get(&#x27;model_text_backup&#x27;)?.invalid &amp;&amp;
                    (publishForm.get(&#x27;model_text_backup&#x27;)?.dirty ||
                      publishForm.get(&#x27;model_text_backup&#x27;)?.touched)
                  ) {
                    &lt;p class&#x3D;&quot;mt-2 text-sm text-rose-500 flex items-center gap-1&quot;&gt;
                      &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                        &lt;path
                          stroke-linecap&#x3D;&quot;round&quot;
                          stroke-linejoin&#x3D;&quot;round&quot;
                          stroke-width&#x3D;&quot;2&quot;
                          d&#x3D;&quot;M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                        /&gt;
                      &lt;/svg&gt;
                      Seleccioná un modelo
                    &lt;/p&gt;
                  }
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;!-- Barra &quot;Smart&quot; de estimación --&gt;
            &lt;div
              *ngIf&#x3D;&quot;valueAutoCalculated()&quot;
              class&#x3D;&quot;bg-emerald-50/50 dark:bg-emerald-900/10 px-8 py-4 border-t border-emerald-100 dark:border-emerald-900/30 flex items-center gap-3&quot;
            &gt;
              &lt;span
                class&#x3D;&quot;flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100 text-emerald-600 dark:bg-emerald-900/40 dark:text-emerald-400&quot;
              &gt;
                &lt;svg class&#x3D;&quot;w-5 h-5&quot; fill&#x3D;&quot;none&quot; stroke&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 24 24&quot;&gt;
                  &lt;path
                    stroke-linecap&#x3D;&quot;round&quot;
                    stroke-linejoin&#x3D;&quot;round&quot;
                    stroke-width&#x3D;&quot;2&quot;
                    d&#x3D;&quot;M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                  /&gt;
                &lt;/svg&gt;
              &lt;/span&gt;
              &lt;div&gt;
                &lt;p class&#x3D;&quot;text-sm font-bold text-emerald-900 dark:text-emerald-100&quot;&gt;
                  Vehículo reconocido
                &lt;/p&gt;
                &lt;p class&#x3D;&quot;text-xs text-emerald-700 dark:text-emerald-300&quot;&gt;
                  Valor de mercado aprox: USD {{ publishForm.get(&#x27;value_usd&#x27;)?.value | number }}
                &lt;/p&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/section&gt;

          &lt;!-- SECCIÓN 2: FOTOS (El &quot;Wow&quot; Visual) --&gt;
          &lt;section
            class&#x3D;&quot;bg-white dark:bg-[#161821] rounded-3xl shadow-[0_2px_20px_rgba(0,0,0,0.04)] dark:shadow-none border border-slate-100 dark:border-neutral-800 p-8&quot;
          &gt;
            &lt;div class&#x3D;&quot;flex items-center justify-between mb-6&quot;&gt;
              &lt;div class&#x3D;&quot;flex items-center gap-3&quot;&gt;
                &lt;div
                  class&#x3D;&quot;w-10 h-10 rounded-xl bg-purple-50 dark:bg-purple-500/10 flex items-center justify-center text-purple-600 dark:text-purple-400&quot;
                &gt;
                  &lt;svg
                    xmlns&#x3D;&quot;http://www.w3.org/2000/svg&quot;
                    class&#x3D;&quot;h-6 w-6&quot;
                    fill&#x3D;&quot;none&quot;
                    viewBox&#x3D;&quot;0 0 24 24&quot;
                    stroke&#x3D;&quot;currentColor&quot;
                  &gt;
                    &lt;path
                      stroke-linecap&#x3D;&quot;round&quot;
                      stroke-linejoin&#x3D;&quot;round&quot;
                      stroke-width&#x3D;&quot;2&quot;
                      d&#x3D;&quot;M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z&quot;
                    /&gt;
                  &lt;/svg&gt;
                &lt;/div&gt;
                &lt;div&gt;
                  &lt;h2 class&#x3D;&quot;text-xl font-bold text-slate-900 dark:text-white&quot;&gt;Galería&lt;/h2&gt;
                  &lt;p class&#x3D;&quot;text-sm text-slate-500&quot;&gt;La clave para alquilar más rápido.&lt;/p&gt;
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;!-- Botón WOW de IA --&gt;
              &lt;button
                type&#x3D;&quot;button&quot;
                (click)&#x3D;&quot;showAIPhotosModal.set(true)&quot;
                [disabled]&#x3D;&quot;!selectedFIPEModel() || uploadedPhotos().length &gt;&#x3D; 10&quot;
                class&#x3D;&quot;hidden sm:inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-xl shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-semibold&quot;
              &gt;
                &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                  &lt;path
                    stroke-linecap&#x3D;&quot;round&quot;
                    stroke-linejoin&#x3D;&quot;round&quot;
                    stroke-width&#x3D;&quot;2&quot;
                    d&#x3D;&quot;M13 10V3L4 14h7v7l9-11h-7z&quot;
                  /&gt;
                &lt;/svg&gt;
                Generar con IA
              &lt;/button&gt;
            &lt;/div&gt;

            &lt;!-- Área de Carga Visual --&gt;
            &lt;div class&#x3D;&quot;grid grid-cols-2 md:grid-cols-4 gap-4 mb-6&quot;&gt;
              &lt;!-- Upload Button Slot --&gt;
              &lt;label
                class&#x3D;&quot;aspect-[4/3] relative flex flex-col items-center justify-center border-2 border-dashed border-slate-200 dark:border-neutral-700 rounded-2xl hover:bg-slate-50 dark:hover:bg-neutral-800 transition cursor-pointer group&quot;
              &gt;
                &lt;div
                  class&#x3D;&quot;p-3 bg-indigo-50 dark:bg-indigo-500/20 rounded-full group-hover:scale-110 transition-transform&quot;
                &gt;
                  &lt;svg
                    class&#x3D;&quot;w-6 h-6 text-indigo-600 dark:text-indigo-400&quot;
                    fill&#x3D;&quot;none&quot;
                    viewBox&#x3D;&quot;0 0 24 24&quot;
                    stroke&#x3D;&quot;currentColor&quot;
                  &gt;
                    &lt;path
                      stroke-linecap&#x3D;&quot;round&quot;
                      stroke-linejoin&#x3D;&quot;round&quot;
                      stroke-width&#x3D;&quot;2&quot;
                      d&#x3D;&quot;M12 4v16m8-8H4&quot;
                    /&gt;
                  &lt;/svg&gt;
                &lt;/div&gt;
                &lt;span class&#x3D;&quot;mt-2 text-xs font-semibold text-slate-600 dark:text-slate-400&quot;
                  &gt;Subir fotos&lt;/span
                &gt;
                &lt;input
                  type&#x3D;&quot;file&quot;
                  accept&#x3D;&quot;image/*&quot;
                  multiple
                  (change)&#x3D;&quot;onPhotoSelected($event)&quot;
                  class&#x3D;&quot;hidden&quot;
                /&gt;
              &lt;/label&gt;

              &lt;!-- Thumbnails --&gt;
              &lt;div
                *ngFor&#x3D;&quot;let photo of uploadedPhotos(); let i &#x3D; index&quot;
                class&#x3D;&quot;relative group aspect-[4/3] rounded-2xl overflow-hidden shadow-sm&quot;
              &gt;
                &lt;img [src]&#x3D;&quot;photo.preview&quot; class&#x3D;&quot;w-full h-full object-cover&quot; /&gt;
                &lt;div
                  class&#x3D;&quot;absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2&quot;
                &gt;
                  &lt;button
                    type&#x3D;&quot;button&quot;
                    (click)&#x3D;&quot;removePhoto(i)&quot;
                    class&#x3D;&quot;p-2 bg-white/90 text-rose-600 rounded-full hover:bg-white&quot;
                  &gt;
                    &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                      &lt;path
                        stroke-linecap&#x3D;&quot;round&quot;
                        stroke-linejoin&#x3D;&quot;round&quot;
                        stroke-width&#x3D;&quot;2&quot;
                        d&#x3D;&quot;M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16&quot;
                      /&gt;
                    &lt;/svg&gt;
                  &lt;/button&gt;
                &lt;/div&gt;
                &lt;div
                  *ngIf&#x3D;&quot;i &#x3D;&#x3D;&#x3D; 0&quot;
                  class&#x3D;&quot;absolute bottom-2 left-2 px-2 py-1 bg-black/60 backdrop-blur-md rounded-md&quot;
                &gt;
                  &lt;span class&#x3D;&quot;text-[10px] font-bold text-white uppercase tracking-wider&quot;
                    &gt;Portada&lt;/span
                  &gt;
                &lt;/div&gt;
              &lt;/div&gt;

              &lt;!-- Empty Slots (Visual placeholders) --&gt;
              &lt;ng-container *ngIf&#x3D;&quot;uploadedPhotos().length &#x3D;&#x3D;&#x3D; 0&quot;&gt;
                &lt;div
                  class&#x3D;&quot;aspect-[4/3] rounded-2xl bg-slate-50 dark:bg-neutral-800/50 flex items-center justify-center border border-slate-100 dark:border-neutral-800&quot;
                &gt;
                  &lt;span class&#x3D;&quot;text-xs text-slate-300 dark:text-neutral-600&quot;&gt;Foto lateral&lt;/span&gt;
                &lt;/div&gt;
                &lt;div
                  class&#x3D;&quot;hidden md:flex aspect-[4/3] rounded-2xl bg-slate-50 dark:bg-neutral-800/50 items-center justify-center border border-slate-100 dark:border-neutral-800&quot;
                &gt;
                  &lt;span class&#x3D;&quot;text-xs text-slate-300 dark:text-neutral-600&quot;&gt;Interior&lt;/span&gt;
                &lt;/div&gt;
              &lt;/ng-container&gt;
            &lt;/div&gt;

            &lt;!-- Mobile AI Button --&gt;
            &lt;button
              type&#x3D;&quot;button&quot;
              (click)&#x3D;&quot;showAIPhotosModal.set(true)&quot;
              class&#x3D;&quot;w-full sm:hidden flex items-center justify-center gap-2 px-4 py-3 bg-purple-600 text-white rounded-xl font-bold mb-4&quot;
            &gt;
              ✨ Generar fotos con IA
            &lt;/button&gt;

            &lt;!-- Tip sutil --&gt;
            &lt;p class&#x3D;&quot;text-sm text-slate-500 dark:text-slate-400 flex gap-2&quot;&gt;
              &lt;span class&#x3D;&quot;text-indigo-600&quot;&gt;💡&lt;/span&gt;
              &lt;span
                &gt;Las publicaciones con más de 5 fotos reciben un
                &lt;strong&gt;40% más de reservas&lt;/strong&gt;.&lt;/span
              &gt;
            &lt;/p&gt;
          &lt;/section&gt;

          &lt;!-- SECCIÓN 3: DETALLES TÉCNICOS (Colapsados visualmente en grid) --&gt;
          &lt;section
            class&#x3D;&quot;bg-white dark:bg-[#161821] rounded-3xl shadow-[0_2px_20px_rgba(0,0,0,0.04)] dark:shadow-none border border-slate-100 dark:border-neutral-800 p-8&quot;
          &gt;
            &lt;h3 class&#x3D;&quot;text-lg font-bold text-slate-900 dark:text-white mb-6&quot;&gt;Detalles básicos&lt;/h3&gt;
            &lt;div class&#x3D;&quot;grid grid-cols-1 sm:grid-cols-2 gap-6&quot;&gt;
              &lt;div&gt;
                &lt;label class&#x3D;&quot;label-text&quot;&gt;Kilometraje&lt;/label&gt;
                &lt;div class&#x3D;&quot;relative&quot;&gt;
                  &lt;input
                    type&#x3D;&quot;number&quot;
                    formControlName&#x3D;&quot;mileage&quot;
                    class&#x3D;&quot;input-modern pl-10&quot;
                    placeholder&#x3D;&quot;Ej: 45000&quot;
                  /&gt;
                  &lt;span class&#x3D;&quot;absolute left-3.5 top-3.5 text-slate-400 text-xs font-bold&quot;&gt;KM&lt;/span&gt;
                &lt;/div&gt;
                @if (
                  publishForm.get(&#x27;mileage&#x27;)?.invalid &amp;&amp;
                  (publishForm.get(&#x27;mileage&#x27;)?.dirty || publishForm.get(&#x27;mileage&#x27;)?.touched)
                ) {
                  &lt;p class&#x3D;&quot;mt-2 text-sm text-rose-500 flex items-center gap-1&quot;&gt;
                    &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                      &lt;path
                        stroke-linecap&#x3D;&quot;round&quot;
                        stroke-linejoin&#x3D;&quot;round&quot;
                        stroke-width&#x3D;&quot;2&quot;
                        d&#x3D;&quot;M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                      /&gt;
                    &lt;/svg&gt;
                    Ingresá el kilometraje (mínimo 0).
                  &lt;/p&gt;
                }
              &lt;/div&gt;
              &lt;div&gt;
                &lt;label class&#x3D;&quot;label-text&quot;&gt;Transmisión&lt;/label&gt;
                &lt;div class&#x3D;&quot;grid grid-cols-2 gap-2&quot;&gt;
                  &lt;label class&#x3D;&quot;cursor-pointer&quot;&gt;
                    &lt;input
                      type&#x3D;&quot;radio&quot;
                      formControlName&#x3D;&quot;transmission&quot;
                      value&#x3D;&quot;manual&quot;
                      class&#x3D;&quot;peer hidden&quot;
                    /&gt;
                    &lt;div
                      class&#x3D;&quot;radio-card peer-checked:bg-indigo-600 peer-checked:text-white peer-checked:border-indigo-600&quot;
                    &gt;
                      Manual
                    &lt;/div&gt;
                  &lt;/label&gt;
                  &lt;label class&#x3D;&quot;cursor-pointer&quot;&gt;
                    &lt;input
                      type&#x3D;&quot;radio&quot;
                      formControlName&#x3D;&quot;transmission&quot;
                      value&#x3D;&quot;automatic&quot;
                      class&#x3D;&quot;peer hidden&quot;
                    /&gt;
                    &lt;div
                      class&#x3D;&quot;radio-card peer-checked:bg-indigo-600 peer-checked:text-white peer-checked:border-indigo-600&quot;
                    &gt;
                      Automática
                    &lt;/div&gt;
                  &lt;/label&gt;
                &lt;/div&gt;
                @if (
                  publishForm.get(&#x27;transmission&#x27;)?.invalid &amp;&amp;
                  (publishForm.get(&#x27;transmission&#x27;)?.dirty ||
                    publishForm.get(&#x27;transmission&#x27;)?.touched)
                ) {
                  &lt;p class&#x3D;&quot;mt-2 text-sm text-rose-500 flex items-center gap-1&quot;&gt;
                    &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                      &lt;path
                        stroke-linecap&#x3D;&quot;round&quot;
                        stroke-linejoin&#x3D;&quot;round&quot;
                        stroke-width&#x3D;&quot;2&quot;
                        d&#x3D;&quot;M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                      /&gt;
                    &lt;/svg&gt;
                    Seleccioná la transmisión.
                  &lt;/p&gt;
                }
              &lt;/div&gt;
              &lt;div&gt;
                &lt;label class&#x3D;&quot;label-text&quot;&gt;Combustible&lt;/label&gt;
                &lt;select formControlName&#x3D;&quot;fuel&quot; class&#x3D;&quot;input-modern&quot;&gt;
                  &lt;option value&#x3D;&quot;&quot; disabled&gt;Seleccionar&lt;/option&gt;
                  &lt;option value&#x3D;&quot;nafta&quot;&gt;Nafta&lt;/option&gt;
                  &lt;option value&#x3D;&quot;gasoil&quot;&gt;Diesel&lt;/option&gt;
                  &lt;option value&#x3D;&quot;electrico&quot;&gt;Eléctrico&lt;/option&gt;
                  &lt;option value&#x3D;&quot;hibrido&quot;&gt;Híbrido&lt;/option&gt;
                &lt;/select&gt;
                @if (
                  publishForm.get(&#x27;fuel&#x27;)?.invalid &amp;&amp;
                  (publishForm.get(&#x27;fuel&#x27;)?.dirty || publishForm.get(&#x27;fuel&#x27;)?.touched)
                ) {
                  &lt;p class&#x3D;&quot;mt-2 text-sm text-rose-500 flex items-center gap-1&quot;&gt;
                    &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                      &lt;path
                        stroke-linecap&#x3D;&quot;round&quot;
                        stroke-linejoin&#x3D;&quot;round&quot;
                        stroke-width&#x3D;&quot;2&quot;
                        d&#x3D;&quot;M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                      /&gt;
                    &lt;/svg&gt;
                    Seleccioná el tipo de combustible.
                  &lt;/p&gt;
                }
              &lt;/div&gt;
              &lt;div&gt;
                &lt;label class&#x3D;&quot;label-text&quot;&gt;Color&lt;/label&gt;
                &lt;input
                  type&#x3D;&quot;text&quot;
                  formControlName&#x3D;&quot;color&quot;
                  class&#x3D;&quot;input-modern&quot;
                  placeholder&#x3D;&quot;Ej: Blanco Perla&quot;
                /&gt;
                @if (
                  publishForm.get(&#x27;color&#x27;)?.invalid &amp;&amp;
                  (publishForm.get(&#x27;color&#x27;)?.dirty || publishForm.get(&#x27;color&#x27;)?.touched)
                ) {
                  &lt;p class&#x3D;&quot;mt-2 text-sm text-rose-500 flex items-center gap-1&quot;&gt;
                    &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                      &lt;path
                        stroke-linecap&#x3D;&quot;round&quot;
                        stroke-linejoin&#x3D;&quot;round&quot;
                        stroke-width&#x3D;&quot;2&quot;
                        d&#x3D;&quot;M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                      /&gt;
                    &lt;/svg&gt;
                    Ingresá el color del auto.
                  &lt;/p&gt;
                }
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;div class&#x3D;&quot;mt-6&quot;&gt;
              &lt;label class&#x3D;&quot;label-text&quot;&gt;Descripción para el viajero&lt;/label&gt;
              &lt;textarea
                formControlName&#x3D;&quot;description&quot;
                rows&#x3D;&quot;3&quot;
                class&#x3D;&quot;input-modern w-full resize-none&quot;
                placeholder&#x3D;&quot;Contanos qué hace especial a tu auto. Ej: &#x27;Ideal para ruta, bajo consumo, baúl amplio...&#x27;&quot;
              &gt;&lt;/textarea&gt;
              &lt;div class&#x3D;&quot;flex justify-between mt-1&quot;&gt;
                &lt;p class&#x3D;&quot;text-xs text-slate-400&quot;&gt;Mínimo 40 caracteres.&lt;/p&gt;
                @if (
                  publishForm.get(&#x27;description&#x27;)?.hasError(&#x27;required&#x27;) &amp;&amp;
                  (publishForm.get(&#x27;description&#x27;)?.dirty || publishForm.get(&#x27;description&#x27;)?.touched)
                ) {
                  &lt;p class&#x3D;&quot;text-xs text-rose-500&quot;&gt;La descripción es obligatoria.&lt;/p&gt;
                } @else if (
                  publishForm.get(&#x27;description&#x27;)?.hasError(&#x27;minlength&#x27;) &amp;&amp;
                  (publishForm.get(&#x27;description&#x27;)?.dirty || publishForm.get(&#x27;description&#x27;)?.touched)
                ) {
                  &lt;p class&#x3D;&quot;text-xs text-rose-500&quot;&gt;
                    Faltan al menos
                    {{ 40 - (publishForm.get(&#x27;description&#x27;)?.value?.length || 0) }} caracteres.
                  &lt;/p&gt;
                }
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/section&gt;

          &lt;!-- SECCIÓN 4: PRECIO Y GANANCIA (El &quot;Why&quot;) --&gt;
          &lt;section
            class&#x3D;&quot;bg-white dark:bg-[#161821] rounded-3xl shadow-[0_2px_20px_rgba(0,0,0,0.04)] dark:shadow-none border border-slate-100 dark:border-neutral-800 p-8&quot;
          &gt;
            &lt;div class&#x3D;&quot;flex items-center gap-3 mb-6&quot;&gt;
              &lt;div
                class&#x3D;&quot;w-10 h-10 rounded-xl bg-emerald-50 dark:bg-emerald-500/10 flex items-center justify-center text-emerald-600 dark:text-emerald-400&quot;
              &gt;
                &lt;span class&#x3D;&quot;text-lg font-bold&quot;&gt;$&lt;/span&gt;
              &lt;/div&gt;
              &lt;div&gt;
                &lt;h2 class&#x3D;&quot;text-xl font-bold text-slate-900 dark:text-white&quot;&gt;Precio y Ganancias&lt;/h2&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;!-- Selector de Estrategia --&gt;
            &lt;div class&#x3D;&quot;bg-slate-50 dark:bg-neutral-800/50 p-1.5 rounded-xl flex gap-2 mb-6&quot;&gt;
              &lt;button
                type&#x3D;&quot;button&quot;
                (click)&#x3D;&quot;setPricingStrategy(&#x27;dynamic&#x27;)&quot;
                class&#x3D;&quot;flex-1 py-2.5 rounded-lg text-sm font-semibold transition-all&quot;
                [class.bg-white]&#x3D;&quot;isDynamicPricingSignal()&quot;
                [class.shadow-sm]&#x3D;&quot;isDynamicPricingSignal()&quot;
                [class.text-indigo-600]&#x3D;&quot;isDynamicPricingSignal()&quot;
                [class.text-slate-500]&#x3D;&quot;!isDynamicPricingSignal()&quot;
              &gt;
                ⚡ Precio Dinámico (Recomendado)
              &lt;/button&gt;
              &lt;button
                type&#x3D;&quot;button&quot;
                (click)&#x3D;&quot;setPricingStrategy(&#x27;custom&#x27;)&quot;
                class&#x3D;&quot;flex-1 py-2.5 rounded-lg text-sm font-semibold transition-all&quot;
                [class.bg-white]&#x3D;&quot;!isDynamicPricingSignal()&quot;
                [class.shadow-sm]&#x3D;&quot;!isDynamicPricingSignal()&quot;
                [class.text-slate-900]&#x3D;&quot;!isDynamicPricingSignal()&quot;
                [class.text-slate-500]&#x3D;&quot;isDynamicPricingSignal()&quot;
              &gt;
                Precio Fijo
              &lt;/button&gt;
            &lt;/div&gt;

            &lt;div class&#x3D;&quot;grid grid-cols-1 md:grid-cols-2 gap-8 items-center&quot;&gt;
              &lt;div&gt;
                &lt;label class&#x3D;&quot;label-text&quot;
                  &gt;Precio por día ({{ publishForm.get(&#x27;currency&#x27;)?.value }})&lt;/label
                &gt;
                &lt;div class&#x3D;&quot;relative&quot;&gt;
                  &lt;span class&#x3D;&quot;absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold&quot;
                    &gt;$&lt;/span
                  &gt;
                  &lt;input
                    type&#x3D;&quot;number&quot;
                    formControlName&#x3D;&quot;price_per_day&quot;
                    class&#x3D;&quot;input-modern pl-8 text-2xl font-bold text-slate-900 dark:text-white h-14&quot;
                    [readonly]&#x3D;&quot;isDynamicPricingSignal()&quot;
                  /&gt;
                &lt;/div&gt;
                @if (
                  publishForm.get(&#x27;price_per_day&#x27;)?.invalid &amp;&amp;
                  (publishForm.get(&#x27;price_per_day&#x27;)?.dirty ||
                    publishForm.get(&#x27;price_per_day&#x27;)?.touched)
                ) {
                  &lt;p class&#x3D;&quot;mt-2 text-sm text-rose-500 flex items-center gap-1&quot;&gt;
                    &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                      &lt;path
                        stroke-linecap&#x3D;&quot;round&quot;
                        stroke-linejoin&#x3D;&quot;round&quot;
                        stroke-width&#x3D;&quot;2&quot;
                        d&#x3D;&quot;M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                      /&gt;
                    &lt;/svg&gt;
                    Ingresá un precio por día válido (mínimo $1).
                  &lt;/p&gt;
                }
                &lt;p
                  *ngIf&#x3D;&quot;isDynamicPricingSignal()&quot;
                  class&#x3D;&quot;text-xs text-indigo-600 mt-2 font-medium&quot;
                &gt;
                  🤖 Ajustado automáticamente según demanda
                &lt;/p&gt;
              &lt;/div&gt;

              &lt;div
                class&#x3D;&quot;bg-indigo-50 dark:bg-indigo-900/20 rounded-2xl p-5 border border-indigo-100 dark:border-indigo-900/30&quot;
              &gt;
                &lt;p class&#x3D;&quot;text-sm text-indigo-900 dark:text-indigo-200 font-medium mb-1&quot;&gt;
                  Potencial mensual estimado
                &lt;/p&gt;
                &lt;div class&#x3D;&quot;text-3xl font-black text-indigo-600 dark:text-indigo-400&quot;&gt;
                  {{
                    (publishForm.get(&#x27;price_per_day&#x27;)?.value || 0) * 10
                      | currency: publishForm.get(&#x27;currency&#x27;)?.value : &#x27;symbol&#x27; : &#x27;1.0-0&#x27;
                  }}
                &lt;/div&gt;
                &lt;p class&#x3D;&quot;text-xs text-indigo-700/70 dark:text-indigo-300/70 mt-1&quot;&gt;
                  Calculado con 10 días de alquiler/mes
                &lt;/p&gt;
              &lt;/div&gt;
            &lt;/div&gt;

            &lt;!-- Configuraciones avanzadas (Depósito, Seguros) colapsadas o simplificadas --&gt;
            &lt;div
              class&#x3D;&quot;mt-8 pt-6 border-t border-slate-100 dark:border-neutral-800 grid grid-cols-1 sm:grid-cols-2 gap-4&quot;
            &gt;
              &lt;label
                class&#x3D;&quot;flex items-center p-4 border border-slate-200 dark:border-neutral-700 rounded-xl cursor-pointer hover:bg-slate-50 dark:hover:bg-neutral-800 transition&quot;
              &gt;
                &lt;input
                  type&#x3D;&quot;checkbox&quot;
                  formControlName&#x3D;&quot;deposit_required&quot;
                  class&#x3D;&quot;w-5 h-5 text-indigo-600 rounded border-slate-300 focus:ring-indigo-500&quot;
                /&gt;
                &lt;div class&#x3D;&quot;ml-3&quot;&gt;
                  &lt;span class&#x3D;&quot;block text-sm font-semibold text-slate-700 dark:text-slate-300&quot;
                    &gt;Solicitar Depósito&lt;/span
                  &gt;
                  &lt;span class&#x3D;&quot;block text-xs text-slate-500&quot;&gt;Garantía para el anfitrión&lt;/span&gt;
                &lt;/div&gt;
              &lt;/label&gt;
              &lt;label
                class&#x3D;&quot;flex items-center p-4 border border-slate-200 dark:border-neutral-700 rounded-xl cursor-pointer hover:bg-slate-50 dark:hover:bg-neutral-800 transition&quot;
              &gt;
                &lt;input
                  type&#x3D;&quot;checkbox&quot;
                  formControlName&#x3D;&quot;auto_approval&quot;
                  class&#x3D;&quot;w-5 h-5 text-indigo-600 rounded border-slate-300 focus:ring-indigo-500&quot;
                /&gt;
                &lt;div class&#x3D;&quot;ml-3&quot;&gt;
                  &lt;span class&#x3D;&quot;block text-sm font-semibold text-slate-700 dark:text-slate-300&quot;
                    &gt;Reserva Inmediata&lt;/span
                  &gt;
                  &lt;span class&#x3D;&quot;block text-xs text-slate-500&quot;&gt;Acepta viajes automáticamente&lt;/span&gt;
                &lt;/div&gt;
              &lt;/label&gt;
            &lt;/div&gt;
          &lt;/section&gt;

          &lt;!-- SECCIÓN 5: UBICACIÓN --&gt;
          &lt;section
            class&#x3D;&quot;bg-white dark:bg-[#161821] rounded-3xl shadow-[0_2px_20px_rgba(0,0,0,0.04)] dark:shadow-none border border-slate-100 dark:border-neutral-800 p-8&quot;
          &gt;
            &lt;div class&#x3D;&quot;flex items-center justify-between mb-6&quot;&gt;
              &lt;h2 class&#x3D;&quot;text-xl font-bold text-slate-900 dark:text-white&quot;&gt;Ubicación del auto&lt;/h2&gt;
              &lt;button
                type&#x3D;&quot;button&quot;
                (click)&#x3D;&quot;useCurrentLocation()&quot;
                class&#x3D;&quot;text-indigo-600 text-sm font-bold hover:underline flex items-center gap-1&quot;
              &gt;
                &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                  &lt;path
                    stroke-linecap&#x3D;&quot;round&quot;
                    stroke-linejoin&#x3D;&quot;round&quot;
                    stroke-width&#x3D;&quot;2&quot;
                    d&#x3D;&quot;M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z&quot;
                  /&gt;
                  &lt;path
                    stroke-linecap&#x3D;&quot;round&quot;
                    stroke-linejoin&#x3D;&quot;round&quot;
                    stroke-width&#x3D;&quot;2&quot;
                    d&#x3D;&quot;M15 11a3 3 0 11-6 0 3 3 0 016 0z&quot;
                  /&gt;
                &lt;/svg&gt;
                Usar mi ubicación actual
              &lt;/button&gt;
            &lt;/div&gt;

            &lt;div class&#x3D;&quot;grid grid-cols-2 gap-4&quot;&gt;
              &lt;div class&#x3D;&quot;col-span-2&quot;&gt;
                &lt;input
                  type&#x3D;&quot;text&quot;
                  formControlName&#x3D;&quot;location_street&quot;
                  placeholder&#x3D;&quot;Dirección / Calle&quot;
                  class&#x3D;&quot;input-modern&quot;
                  data-testid&#x3D;&quot;location-street-input&quot;
                /&gt;
                @if (
                  publishForm.get(&#x27;location_street&#x27;)?.invalid &amp;&amp;
                  (publishForm.get(&#x27;location_street&#x27;)?.dirty ||
                    publishForm.get(&#x27;location_street&#x27;)?.touched)
                ) {
                  &lt;p class&#x3D;&quot;mt-2 text-sm text-rose-500 flex items-center gap-1&quot;&gt;
                    &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                      &lt;path
                        stroke-linecap&#x3D;&quot;round&quot;
                        stroke-linejoin&#x3D;&quot;round&quot;
                        stroke-width&#x3D;&quot;2&quot;
                        d&#x3D;&quot;M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                      /&gt;
                    &lt;/svg&gt;
                    Ingresá la dirección.
                  &lt;/p&gt;
                }
              &lt;/div&gt;
              &lt;div&gt;
                &lt;input
                  type&#x3D;&quot;text&quot;
                  formControlName&#x3D;&quot;location_city&quot;
                  placeholder&#x3D;&quot;Ciudad&quot;
                  class&#x3D;&quot;input-modern&quot;
                  data-testid&#x3D;&quot;location-city-input&quot;
                /&gt;
                @if (
                  publishForm.get(&#x27;location_city&#x27;)?.invalid &amp;&amp;
                  (publishForm.get(&#x27;location_city&#x27;)?.dirty ||
                    publishForm.get(&#x27;location_city&#x27;)?.touched)
                ) {
                  &lt;p class&#x3D;&quot;mt-2 text-sm text-rose-500 flex items-center gap-1&quot;&gt;
                    &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                      &lt;path
                        stroke-linecap&#x3D;&quot;round&quot;
                        stroke-linejoin&#x3D;&quot;round&quot;
                        stroke-width&#x3D;&quot;2&quot;
                        d&#x3D;&quot;M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                      /&gt;
                    &lt;/svg&gt;
                    Ingresá la ciudad.
                  &lt;/p&gt;
                }
              &lt;/div&gt;
              &lt;div&gt;
                &lt;input
                  type&#x3D;&quot;text&quot;
                  formControlName&#x3D;&quot;location_state&quot;
                  placeholder&#x3D;&quot;Provincia&quot;
                  class&#x3D;&quot;input-modern&quot;
                  data-testid&#x3D;&quot;location-state-input&quot;
                /&gt;
                @if (
                  publishForm.get(&#x27;location_state&#x27;)?.invalid &amp;&amp;
                  (publishForm.get(&#x27;location_state&#x27;)?.dirty ||
                    publishForm.get(&#x27;location_state&#x27;)?.touched)
                ) {
                  &lt;p class&#x3D;&quot;mt-2 text-sm text-rose-500 flex items-center gap-1&quot;&gt;
                    &lt;svg class&#x3D;&quot;w-4 h-4&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
                      &lt;path
                        stroke-linecap&#x3D;&quot;round&quot;
                        stroke-linejoin&#x3D;&quot;round&quot;
                        stroke-width&#x3D;&quot;2&quot;
                        d&#x3D;&quot;M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                      /&gt;
                    &lt;/svg&gt;
                    Ingresá la provincia.
                  &lt;/p&gt;
                }
              &lt;/div&gt;
              &lt;div class&#x3D;&quot;col-span-2 text-xs text-slate-400&quot;&gt;
                * Tu dirección exacta solo se comparte al confirmar una reserva.
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/section&gt;

          &lt;!-- BOTONES DE ACCIÓN FLOTANTES O FINALES --&gt;
          &lt;div class&#x3D;&quot;pt-6 flex flex-col sm:flex-row items-center gap-4&quot;&gt;
            &lt;button
              type&#x3D;&quot;submit&quot;
              [disabled]&#x3D;&quot;isSubmitting() || !canSubmit()&quot;
              class&#x3D;&quot;w-full sm:w-auto px-8 py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold text-lg shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2&quot;
              data-testid&#x3D;&quot;publish-submit&quot;
            &gt;
              &lt;span
                *ngIf&#x3D;&quot;isSubmitting()&quot;
                class&#x3D;&quot;animate-spin h-5 w-5 border-2 border-white/30 border-t-white rounded-full&quot;
              &gt;&lt;/span&gt;
              {{ editMode() ? &#x27;Guardar Cambios&#x27; : &#x27;Publicar Vehículo&#x27; }}
            &lt;/button&gt;

            &lt;button
              type&#x3D;&quot;button&quot;
              (click)&#x3D;&quot;goBack()&quot;
              class&#x3D;&quot;text-slate-500 font-medium hover:text-slate-800 transition&quot;
            &gt;
              Cancelar
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/form&gt;
      &lt;/div&gt;

      &lt;!-- COLUMNA LATERAL (Trust &amp; Preview) --&gt;
      &lt;aside class&#x3D;&quot;lg:col-span-4 space-y-6 lg:sticky lg:top-8&quot;&gt;
        &lt;!-- Tarjeta de Confianza --&gt;
        &lt;div
          class&#x3D;&quot;bg-gradient-to-br from-indigo-600 to-blue-700 rounded-3xl p-6 text-white shadow-xl relative overflow-hidden&quot;
        &gt;
          &lt;div
            class&#x3D;&quot;absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white/10 rounded-full blur-2xl&quot;
          &gt;&lt;/div&gt;
          &lt;h3 class&#x3D;&quot;font-bold text-lg mb-4 relative z-10&quot;&gt;Tu seguridad es primero&lt;/h3&gt;
          &lt;ul class&#x3D;&quot;space-y-3 text-sm text-indigo-100 relative z-10&quot;&gt;
            &lt;li class&#x3D;&quot;flex gap-2&quot;&gt;
              &lt;svg
                class&#x3D;&quot;w-5 h-5 text-indigo-300&quot;
                fill&#x3D;&quot;none&quot;
                viewBox&#x3D;&quot;0 0 24 24&quot;
                stroke&#x3D;&quot;currentColor&quot;
              &gt;
                &lt;path
                  stroke-linecap&#x3D;&quot;round&quot;
                  stroke-linejoin&#x3D;&quot;round&quot;
                  stroke-width&#x3D;&quot;2&quot;
                  d&#x3D;&quot;M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z&quot;
                /&gt;
              &lt;/svg&gt;
              Cobertura de seguro incluida en cada viaje.
            &lt;/li&gt;
            &lt;li class&#x3D;&quot;flex gap-2&quot;&gt;
              &lt;svg
                class&#x3D;&quot;w-5 h-5 text-indigo-300&quot;
                fill&#x3D;&quot;none&quot;
                viewBox&#x3D;&quot;0 0 24 24&quot;
                stroke&#x3D;&quot;currentColor&quot;
              &gt;
                &lt;path
                  stroke-linecap&#x3D;&quot;round&quot;
                  stroke-linejoin&#x3D;&quot;round&quot;
                  stroke-width&#x3D;&quot;2&quot;
                  d&#x3D;&quot;M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z&quot;
                /&gt;
              &lt;/svg&gt;
              Pagos protegidos hasta finalizar el alquiler.
            &lt;/li&gt;
            &lt;li class&#x3D;&quot;flex gap-2&quot;&gt;
              &lt;svg
                class&#x3D;&quot;w-5 h-5 text-indigo-300&quot;
                fill&#x3D;&quot;none&quot;
                viewBox&#x3D;&quot;0 0 24 24&quot;
                stroke&#x3D;&quot;currentColor&quot;
              &gt;
                &lt;path
                  stroke-linecap&#x3D;&quot;round&quot;
                  stroke-linejoin&#x3D;&quot;round&quot;
                  stroke-width&#x3D;&quot;2&quot;
                  d&#x3D;&quot;M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z&quot;
                /&gt;
              &lt;/svg&gt;
              Conductores verificados con biometría.
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;/div&gt;

        &lt;!-- Preview Simplificado --&gt;
        &lt;div
          class&#x3D;&quot;bg-white dark:bg-[#161821] rounded-3xl shadow-soft p-6 border border-slate-100 dark:border-neutral-800&quot;
        &gt;
          &lt;h4 class&#x3D;&quot;text-xs font-bold text-slate-400 uppercase tracking-wider mb-4&quot;&gt;
            Vista Previa
          &lt;/h4&gt;
          &lt;div
            class&#x3D;&quot;aspect-[4/3] bg-slate-100 dark:bg-neutral-800 rounded-xl mb-4 overflow-hidden relative&quot;
          &gt;
            &lt;img
              *ngIf&#x3D;&quot;uploadedPhotos().length &gt; 0&quot;
              [src]&#x3D;&quot;uploadedPhotos()[0].preview&quot;
              class&#x3D;&quot;w-full h-full object-cover&quot;
            /&gt;
            &lt;div
              *ngIf&#x3D;&quot;uploadedPhotos().length &#x3D;&#x3D;&#x3D; 0&quot;
              class&#x3D;&quot;flex items-center justify-center h-full text-slate-300&quot;
            &gt;
              &lt;svg class&#x3D;&quot;w-12 h-12&quot; fill&#x3D;&quot;none&quot; stroke&#x3D;&quot;currentColor&quot; viewBox&#x3D;&quot;0 0 24 24&quot;&gt;
                &lt;path
                  stroke-linecap&#x3D;&quot;round&quot;
                  stroke-linejoin&#x3D;&quot;round&quot;
                  stroke-width&#x3D;&quot;2&quot;
                  d&#x3D;&quot;M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z&quot;
                /&gt;
              &lt;/svg&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;p class&#x3D;&quot;font-bold text-slate-900 dark:text-white truncate&quot;&gt;
              {{ getCurrentBrand() || &#x27;Marca&#x27; }} {{ getCurrentModel() || &#x27;Modelo&#x27; }}
              {{ getCurrentYear() }}
            &lt;/p&gt;
            &lt;p class&#x3D;&quot;text-sm text-slate-500 truncate&quot;&gt;
              {{ publishForm.get(&#x27;location_city&#x27;)?.value || &#x27;Ubicación&#x27; }}
            &lt;/p&gt;
            &lt;div class&#x3D;&quot;mt-3 flex items-baseline gap-1&quot;&gt;
              &lt;span class&#x3D;&quot;text-lg font-bold text-indigo-600&quot;
                &gt;${{ publishForm.get(&#x27;price_per_day&#x27;)?.value || 0 }}&lt;/span
              &gt;
              &lt;span class&#x3D;&quot;text-xs text-slate-400&quot;&gt;/ día&lt;/span&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/aside&gt;
    &lt;/div&gt;

    &lt;!-- Modals (Sin cambios estructurales profundos, solo wrappers) --&gt;
    @if (showStockPhotosModal()) {
      &lt;div
        class&#x3D;&quot;fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4&quot;
      &gt;
        &lt;div
          class&#x3D;&quot;bg-white dark:bg-[#161821] rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto&quot;
        &gt;
          &lt;app-stock-photos-selector
            [brand]&#x3D;&quot;getCurrentBrand()&quot;
            [model]&#x3D;&quot;getCurrentModel()&quot;
            [year]&#x3D;&quot;getCurrentYear()&quot;
            (photosSelected)&#x3D;&quot;onStockPhotosSelected($event)&quot;
          &gt;&lt;/app-stock-photos-selector&gt;
          &lt;div class&#x3D;&quot;p-4 border-t border-slate-100 dark:border-neutral-800 text-right&quot;&gt;
            &lt;button
              (click)&#x3D;&quot;showStockPhotosModal.set(false)&quot;
              class&#x3D;&quot;text-slate-500 font-bold hover:text-slate-800&quot;
            &gt;
              Cerrar
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    }

    @if (showAIPhotosModal()) {
      &lt;div
        class&#x3D;&quot;fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4&quot;
      &gt;
        &lt;div
          class&#x3D;&quot;bg-white dark:bg-[#161821] rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto&quot;
        &gt;
          &lt;app-ai-photo-generator
            [brand]&#x3D;&quot;getCurrentBrand()&quot;
            [model]&#x3D;&quot;getCurrentModel()&quot;
            [year]&#x3D;&quot;getCurrentYear()&quot;
            (photosGenerated)&#x3D;&quot;onAIPhotosGenerated($event)&quot;
          &gt;&lt;/app-ai-photo-generator&gt;
          &lt;div class&#x3D;&quot;p-4 border-t border-slate-100 dark:border-neutral-800 text-right&quot;&gt;
            &lt;button
              (click)&#x3D;&quot;showAIPhotosModal.set(false)&quot;
              class&#x3D;&quot;text-slate-500 font-bold hover:text-slate-800&quot;
            &gt;
              Cerrar
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    }
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Styles helper for this page specifically --&gt;
&lt;style&gt;
  .label-text {
    @apply block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2;
  }
  .input-modern {
    @apply w-full bg-slate-50 dark:bg-neutral-800 border-0 rounded-xl px-4 py-3 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 transition-all placeholder:text-slate-400;
  }
  .radio-card {
    @apply flex items-center justify-center px-4 py-3 rounded-xl border border-slate-200 dark:border-neutral-700 text-slate-600 dark:text-slate-300 font-medium hover:bg-slate-50 dark:hover:bg-neutral-800 transition cursor-pointer text-sm;
  }
&lt;/style&gt;
</code></pre>
    </div>

    <div class="tab-pane fade " id="styleData">
                <p class="comment">
                    <code>./publish-car-v2.page.scss</code>
                </p>
                <pre class="line-numbers"><code class="language-scss">:host {
  display: block;
}

:host-context(.dark) .publish-card {
  background-color: var(--surface-raised-dark);
  border-color: var(--border-muted-dark);
  color: var(--text-inverse);
  transition:
    background-color 0.3s ease,
    border-color 0.3s ease;
}

:host-context(.dark) label,
:host-context(.dark) .text-gray-600,
:host-context(.dark) .text-gray-700,
:host-context(.dark) .text-gray-900 {
  color: var(--text-inverse);
}

:host-context(.dark) .text-gray-500 {
  color: var(--text-secondary-dark);
}

:host-context(.dark) input,
:host-context(.dark) select,
:host-context(.dark) textarea {
  background-color: var(--surface-base-dark);
  border-color: var(--border-default-dark);
  color: var(--text-inverse);
}

:host-context(.dark) input:focus,
:host-context(.dark) select:focus,
:host-context(.dark) textarea:focus {
  border-color: var(--primary-default);
  box-shadow: 0 0 0 2px var(--primary-dark);
}

:host-context(.dark) input::placeholder,
:host-context(.dark) textarea::placeholder {
  color: var(--text-muted-dark);
}

:host-context(.dark) .bg-gray-100 {
  background-color: var(--surface-raised-dark);
}

/* Hero visual hierarchy */
.publish-hero {
  background: linear-gradient(135deg, #f7fdfb 0%, #f4f8ff 40%, #fefaf3 100%);
  border-color: transparent;
  box-shadow: 0 14px 40px -18px rgba(21, 94, 117, 0.25);
}

.publish-hero-side {
  background: linear-gradient(
    160deg,
    rgba(16, 185, 129, 0.08),
    rgba(14, 165, 233, 0.08) 50%,
    rgba(251, 191, 36, 0.1)
  );
  border-color: transparent;
  box-shadow: 0 12px 30px -18px rgba(17, 94, 89, 0.25);
}

.benefit-card {
  border: 1px solid rgba(15, 118, 110, 0.15);
  border-radius: 12px;
  padding: 12px 14px;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(2px);
}

.benefit-title {
  font-weight: 700;
  color: #0f766e;
  margin-bottom: 4px;
}

.benefit-chip {
  border: 1px solid rgba(15, 118, 110, 0.18);
  border-radius: 9999px;
  padding: 10px 12px;
  background: rgba(15, 118, 110, 0.08);
  text-align: center;
}

.pill {
  @extend .benefit-chip;
  padding: 8px 12px;
  font-weight: 700;
  color: #0f172a;
}

.checklist-card {
  border: 1px solid var(--border-default, #e2e8f0);
  border-radius: 12px;
  padding: 12px 14px;
  background: rgba(248, 250, 252, 0.8);
  summary {
    cursor: pointer;
    font-weight: 700;
    color: #0f172a;
    list-style: none;
  }
  summary::-webkit-details-marker {
    display: none;
  }
  ul {
    margin-top: 8px;
    padding-left: 16px;
    color: #334155;
    display: grid;
    row-gap: 6px;
  }
}

:host-context(.dark) .benefit-card {
  background: rgba(17, 24, 39, 0.8);
  border-color: rgba(59, 130, 246, 0.15);
}

:host-context(.dark) .benefit-title {
  color: #7dd3fc;
}

:host-context(.dark) .benefit-chip {
  border-color: rgba(59, 130, 246, 0.25);
  background: rgba(59, 130, 246, 0.12);
  color: #e2e8f0;
}

:host-context(.dark) .pill {
  color: #e2e8f0;
}

.notice-card {
  border: 1px solid var(--border-default, #e2e8f0);
  border-radius: 12px;
  padding: 10px 12px;
  background: rgba(248, 250, 252, 0.9);
  summary {
    cursor: pointer;
    font-weight: 700;
    color: #0f172a;
    list-style: none;
    display: flex;
    gap: 8px;
    align-items: center;
  }
  summary::-webkit-details-marker {
    display: none;
  }
  p {
    margin: 6px 0 0;
    color: #334155;
  }
}

.notice-card.sky {
  border-color: #bae6fd;
  background: #f0f9ff;
}
.notice-card.amber {
  border-color: #fcd34d;
  background: #fffbeb;
}
.notice-card.emerald {
  border-color: #a7f3d0;
  background: #ecfdf3;
}

.notice-action {
  border: 1px solid #cbd5e1;
  border-radius: 10px;
  padding: 6px 10px;
  font-weight: 700;
  background: white;
  color: #0f172a;
}

.notice-action.primary {
  background: #0ea5e9;
  color: white;
  border-color: #0284c7;
}

:host-context(.dark) .notice-card {
  background: rgba(15, 23, 42, 0.75);
  border-color: rgba(148, 163, 184, 0.35);
  summary {
    color: #e2e8f0;
  }
  p {
    color: #cbd5e1;
  }
}

:host-context(.dark) .notice-card.sky {
  border-color: #38bdf8;
  background: rgba(14, 165, 233, 0.18);
}
:host-context(.dark) .notice-card.amber {
  border-color: #f59e0b;
  background: rgba(245, 158, 11, 0.18);
}
:host-context(.dark) .notice-card.emerald {
  border-color: #34d399;
  background: rgba(16, 185, 129, 0.18);
}
.notice-action {
  color: inherit;
}

:host-context(.dark) .checklist-card {
  background: rgba(15, 23, 42, 0.75);
  border-color: rgba(148, 163, 184, 0.35);
  summary {
    color: #e2e8f0;
  }
  ul {
    color: #cbd5e1;
  }
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="tree">
        <div id="tree-container"></div>
        <div class="tree-legend">
            <div class="title">
                <b>Legend</b>
            </div>
            <div>
                <div class="color htmlelement"></div><span>Html element</span>
            </div>
            <div>
                <div class="color component"></div><span>Component</span>
            </div>
            <div>
                <div class="color directive"></div><span>Html element with directive</span>
            </div>
        </div>
    </div>

    
</div>

<script src="../js/libs/vis-network.min.js"></script>
<script src="../js/libs/htmlparser.js"></script>
<script src="../js/libs/deep-iterator.js"></script>
<script>
        var COMPONENT_TEMPLATE = '<div><div  class="min-h-screen bg-gray-50/50 dark:bg-[#0f1117] py-8 px-4 transition-colors duration-300 text-slate-800 dark:text-slate-200 font-sans">  <div class="max-w-5xl mx-auto">    <!-- 1. Header Minimalista e Inspirador -->    <header class="mb-10 text-center sm:text-left sm:flex sm:items-end sm:justify-between">      <div>        <h1          class="text-3xl sm:text-4xl font-extrabold tracking-tight text-slate-900 dark:text-white mb-2"        >          {{ editMode() ? \'Tu auto, mejorado.\' : \'Rentabilizá tu auto.\' }}        </h1>        <p class="text-lg text-slate-500 dark:text-slate-400 font-medium">          Configurá tu activo en minutos con seguridad garantizada.        </p>      </div>      <!-- Indicador de Progreso Sutil -->      <div class="hidden sm:block text-right">        <div          class="inline-flex items-center gap-2 bg-white dark:bg-neutral-800 px-4 py-2 rounded-full shadow-sm border border-slate-100 dark:border-neutral-700"        >          <span class="relative flex h-3 w-3">            <span              class="animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"            ></span>            <span class="relative inline-flex rounded-full h-3 w-3 bg-indigo-500"></span>          </span>          <span class="text-sm font-semibold text-slate-700 dark:text-slate-300">            {{ editMode() ? \'Edición activa\' : \'Creando publicación\' }}          </span>        </div>      </div>    </header>    <div class="grid gap-8 lg:grid-cols-12 items-start">      <!-- COLUMNA PRINCIPAL (Formulario) -->      <div class="lg:col-span-8 space-y-8">        <form          [formGroup]="publishForm"          (ngSubmit)="onSubmit()"          class="space-y-8"          data-testid="publish-form"        >          <!-- SECCIÓN 1: IDENTIDAD DEL VEHÍCULO (El "Qué") -->          <section            class="bg-white dark:bg-[#161821] rounded-3xl shadow-[0_2px_20px_rgba(0,0,0,0.04)] dark:shadow-none border border-slate-100 dark:border-neutral-800"          >            <div class="p-8">              <div class="flex items-center gap-3 mb-6">                <div                  class="w-10 h-10 rounded-xl bg-indigo-50 dark:bg-indigo-500/10 flex items-center justify-center text-indigo-600 dark:text-indigo-400"                >                  <svg                    xmlns="http://www.w3.org/2000/svg"                    class="h-6 w-6"                    fill="none"                    viewBox="0 0 24 24"                    stroke="currentColor"                  >                    <path                      stroke-linecap="round"                      stroke-linejoin="round"                      stroke-width="2"                      d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"                    />                  </svg>                </div>                <h2 class="text-xl font-bold text-slate-900 dark:text-white">                  ¿Qué auto vas a publicar?                </h2>              </div>              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">                <!-- Marca -->                <div class="md:col-span-2 relative z-20">                  <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2"                    >Marca</label                  >                  <app-fipe-autocomplete                    [placeholder]="\'Ej: Toyota, Ford, BMW...\'"                    [options]="fipeBrands()"                    [isLoading]="isLoadingFIPEBrands()"                    [selectedValue]="selectedFIPEBrand()"                    [minChars]="2"                    [showBrandLogos]="true"                    (optionSelected)="onFIPEBrandSelected($event)"                  ></app-fipe-autocomplete>                  @if (                    publishForm.get(\'brand_text_backup\')?.invalid &&                    (publishForm.get(\'brand_text_backup\')?.dirty ||                      publishForm.get(\'brand_text_backup\')?.touched)                  ) {                    <p class="mt-2 text-sm text-rose-500 flex items-center gap-1">                      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                        <path                          stroke-linecap="round"                          stroke-linejoin="round"                          stroke-width="2"                          d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"                        />                      </svg>                      Seleccioná una marca                    </p>                  }                </div>                <!-- Año -->                <div class="relative z-10">                  <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2"                    >Año</label                  >                  <select                    formControlName="year"                    (change)="onYearChange()"                    [disabled]="!selectedFIPEBrand()"                    class="w-full bg-slate-50 dark:bg-neutral-800 border-0 rounded-xl px-4 py-3.5 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 transition-all disabled:opacity-50 font-medium"                  >                    <option [ngValue]="null" disabled>Año...</option>                    @for (year of yearOptions; track year) {                      <option [ngValue]="year">{{ year }}</option>                    }                  </select>                  @if (                    publishForm.get(\'year\')?.invalid &&                    (publishForm.get(\'year\')?.dirty || publishForm.get(\'year\')?.touched)                  ) {                    <p class="mt-2 text-sm text-rose-500 flex items-center gap-1">                      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                        <path                          stroke-linecap="round"                          stroke-linejoin="round"                          stroke-width="2"                          d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"                        />                      </svg>                      Seleccioná un año                    </p>                  }                </div>                <!-- Modelo -->                <div class="relative z-10">                  <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2"                    >Modelo</label                  >                  <app-fipe-autocomplete                    [placeholder]="\'Ej: Corolla, Focus...\'"                    [options]="fipeModels()"                    [isLoading]="isLoadingFIPEModels()"                    [selectedValue]="selectedFIPEModel()"                    [disabled]="!selectedFIPEBrand() || !publishForm.get(\'year\')?.value"                    [minChars]="2"                    (optionSelected)="onFIPEModelSelected($event)"                  ></app-fipe-autocomplete>                  @if (                    publishForm.get(\'model_text_backup\')?.invalid &&                    (publishForm.get(\'model_text_backup\')?.dirty ||                      publishForm.get(\'model_text_backup\')?.touched)                  ) {                    <p class="mt-2 text-sm text-rose-500 flex items-center gap-1">                      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                        <path                          stroke-linecap="round"                          stroke-linejoin="round"                          stroke-width="2"                          d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"                        />                      </svg>                      Seleccioná un modelo                    </p>                  }                </div>              </div>            </div>            <!-- Barra "Smart" de estimación -->            <div              *ngIf="valueAutoCalculated()"              class="bg-emerald-50/50 dark:bg-emerald-900/10 px-8 py-4 border-t border-emerald-100 dark:border-emerald-900/30 flex items-center gap-3"            >              <span                class="flex h-8 w-8 items-center justify-center rounded-full bg-emerald-100 text-emerald-600 dark:bg-emerald-900/40 dark:text-emerald-400"              >                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">                  <path                    stroke-linecap="round"                    stroke-linejoin="round"                    stroke-width="2"                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"                  />                </svg>              </span>              <div>                <p class="text-sm font-bold text-emerald-900 dark:text-emerald-100">                  Vehículo reconocido                </p>                <p class="text-xs text-emerald-700 dark:text-emerald-300">                  Valor de mercado aprox: USD {{ publishForm.get(\'value_usd\')?.value | number }}                </p>              </div>            </div>          </section>          <!-- SECCIÓN 2: FOTOS (El "Wow" Visual) -->          <section            class="bg-white dark:bg-[#161821] rounded-3xl shadow-[0_2px_20px_rgba(0,0,0,0.04)] dark:shadow-none border border-slate-100 dark:border-neutral-800 p-8"          >            <div class="flex items-center justify-between mb-6">              <div class="flex items-center gap-3">                <div                  class="w-10 h-10 rounded-xl bg-purple-50 dark:bg-purple-500/10 flex items-center justify-center text-purple-600 dark:text-purple-400"                >                  <svg                    xmlns="http://www.w3.org/2000/svg"                    class="h-6 w-6"                    fill="none"                    viewBox="0 0 24 24"                    stroke="currentColor"                  >                    <path                      stroke-linecap="round"                      stroke-linejoin="round"                      stroke-width="2"                      d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"                    />                  </svg>                </div>                <div>                  <h2 class="text-xl font-bold text-slate-900 dark:text-white">Galería</h2>                  <p class="text-sm text-slate-500">La clave para alquilar más rápido.</p>                </div>              </div>              <!-- Botón WOW de IA -->              <button                type="button"                (click)="showAIPhotosModal.set(true)"                [disabled]="!selectedFIPEModel() || uploadedPhotos().length >= 10"                class="hidden sm:inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-xl shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-semibold"              >                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                  <path                    stroke-linecap="round"                    stroke-linejoin="round"                    stroke-width="2"                    d="M13 10V3L4 14h7v7l9-11h-7z"                  />                </svg>                Generar con IA              </button>            </div>            <!-- Área de Carga Visual -->            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">              <!-- Upload Button Slot -->              <label                class="aspect-[4/3] relative flex flex-col items-center justify-center border-2 border-dashed border-slate-200 dark:border-neutral-700 rounded-2xl hover:bg-slate-50 dark:hover:bg-neutral-800 transition cursor-pointer group"              >                <div                  class="p-3 bg-indigo-50 dark:bg-indigo-500/20 rounded-full group-hover:scale-110 transition-transform"                >                  <svg                    class="w-6 h-6 text-indigo-600 dark:text-indigo-400"                    fill="none"                    viewBox="0 0 24 24"                    stroke="currentColor"                  >                    <path                      stroke-linecap="round"                      stroke-linejoin="round"                      stroke-width="2"                      d="M12 4v16m8-8H4"                    />                  </svg>                </div>                <span class="mt-2 text-xs font-semibold text-slate-600 dark:text-slate-400"                  >Subir fotos</span                >                <input                  type="file"                  accept="image/*"                  multiple                  (change)="onPhotoSelected($event)"                  class="hidden"                />              </label>              <!-- Thumbnails -->              <div                *ngFor="let photo of uploadedPhotos(); let i = index"                class="relative group aspect-[4/3] rounded-2xl overflow-hidden shadow-sm"              >                <img [src]="photo.preview" class="w-full h-full object-cover" />                <div                  class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2"                >                  <button                    type="button"                    (click)="removePhoto(i)"                    class="p-2 bg-white/90 text-rose-600 rounded-full hover:bg-white"                  >                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                      <path                        stroke-linecap="round"                        stroke-linejoin="round"                        stroke-width="2"                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"                      />                    </svg>                  </button>                </div>                <div                  *ngIf="i === 0"                  class="absolute bottom-2 left-2 px-2 py-1 bg-black/60 backdrop-blur-md rounded-md"                >                  <span class="text-[10px] font-bold text-white uppercase tracking-wider"                    >Portada</span                  >                </div>              </div>              <!-- Empty Slots (Visual placeholders) -->              <ng-container *ngIf="uploadedPhotos().length === 0">                <div                  class="aspect-[4/3] rounded-2xl bg-slate-50 dark:bg-neutral-800/50 flex items-center justify-center border border-slate-100 dark:border-neutral-800"                >                  <span class="text-xs text-slate-300 dark:text-neutral-600">Foto lateral</span>                </div>                <div                  class="hidden md:flex aspect-[4/3] rounded-2xl bg-slate-50 dark:bg-neutral-800/50 items-center justify-center border border-slate-100 dark:border-neutral-800"                >                  <span class="text-xs text-slate-300 dark:text-neutral-600">Interior</span>                </div>              </ng-container>            </div>            <!-- Mobile AI Button -->            <button              type="button"              (click)="showAIPhotosModal.set(true)"              class="w-full sm:hidden flex items-center justify-center gap-2 px-4 py-3 bg-purple-600 text-white rounded-xl font-bold mb-4"            >              ✨ Generar fotos con IA            </button>            <!-- Tip sutil -->            <p class="text-sm text-slate-500 dark:text-slate-400 flex gap-2">              <span class="text-indigo-600">💡</span>              <span                >Las publicaciones con más de 5 fotos reciben un                <strong>40% más de reservas</strong>.</span              >            </p>          </section>          <!-- SECCIÓN 3: DETALLES TÉCNICOS (Colapsados visualmente en grid) -->          <section            class="bg-white dark:bg-[#161821] rounded-3xl shadow-[0_2px_20px_rgba(0,0,0,0.04)] dark:shadow-none border border-slate-100 dark:border-neutral-800 p-8"          >            <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-6">Detalles básicos</h3>            <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">              <div>                <label class="label-text">Kilometraje</label>                <div class="relative">                  <input                    type="number"                    formControlName="mileage"                    class="input-modern pl-10"                    placeholder="Ej: 45000"                  />                  <span class="absolute left-3.5 top-3.5 text-slate-400 text-xs font-bold">KM</span>                </div>                @if (                  publishForm.get(\'mileage\')?.invalid &&                  (publishForm.get(\'mileage\')?.dirty || publishForm.get(\'mileage\')?.touched)                ) {                  <p class="mt-2 text-sm text-rose-500 flex items-center gap-1">                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                      <path                        stroke-linecap="round"                        stroke-linejoin="round"                        stroke-width="2"                        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"                      />                    </svg>                    Ingresá el kilometraje (mínimo 0).                  </p>                }              </div>              <div>                <label class="label-text">Transmisión</label>                <div class="grid grid-cols-2 gap-2">                  <label class="cursor-pointer">                    <input                      type="radio"                      formControlName="transmission"                      value="manual"                      class="peer hidden"                    />                    <div                      class="radio-card peer-checked:bg-indigo-600 peer-checked:text-white peer-checked:border-indigo-600"                    >                      Manual                    </div>                  </label>                  <label class="cursor-pointer">                    <input                      type="radio"                      formControlName="transmission"                      value="automatic"                      class="peer hidden"                    />                    <div                      class="radio-card peer-checked:bg-indigo-600 peer-checked:text-white peer-checked:border-indigo-600"                    >                      Automática                    </div>                  </label>                </div>                @if (                  publishForm.get(\'transmission\')?.invalid &&                  (publishForm.get(\'transmission\')?.dirty ||                    publishForm.get(\'transmission\')?.touched)                ) {                  <p class="mt-2 text-sm text-rose-500 flex items-center gap-1">                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                      <path                        stroke-linecap="round"                        stroke-linejoin="round"                        stroke-width="2"                        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"                      />                    </svg>                    Seleccioná la transmisión.                  </p>                }              </div>              <div>                <label class="label-text">Combustible</label>                <select formControlName="fuel" class="input-modern">                  <option value="" disabled>Seleccionar</option>                  <option value="nafta">Nafta</option>                  <option value="gasoil">Diesel</option>                  <option value="electrico">Eléctrico</option>                  <option value="hibrido">Híbrido</option>                </select>                @if (                  publishForm.get(\'fuel\')?.invalid &&                  (publishForm.get(\'fuel\')?.dirty || publishForm.get(\'fuel\')?.touched)                ) {                  <p class="mt-2 text-sm text-rose-500 flex items-center gap-1">                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                      <path                        stroke-linecap="round"                        stroke-linejoin="round"                        stroke-width="2"                        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"                      />                    </svg>                    Seleccioná el tipo de combustible.                  </p>                }              </div>              <div>                <label class="label-text">Color</label>                <input                  type="text"                  formControlName="color"                  class="input-modern"                  placeholder="Ej: Blanco Perla"                />                @if (                  publishForm.get(\'color\')?.invalid &&                  (publishForm.get(\'color\')?.dirty || publishForm.get(\'color\')?.touched)                ) {                  <p class="mt-2 text-sm text-rose-500 flex items-center gap-1">                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                      <path                        stroke-linecap="round"                        stroke-linejoin="round"                        stroke-width="2"                        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"                      />                    </svg>                    Ingresá el color del auto.                  </p>                }              </div>            </div>            <div class="mt-6">              <label class="label-text">Descripción para el viajero</label>              <textarea                formControlName="description"                rows="3"                class="input-modern w-full resize-none"                placeholder="Contanos qué hace especial a tu auto. Ej: \'Ideal para ruta, bajo consumo, baúl amplio...\'"              ></textarea>              <div class="flex justify-between mt-1">                <p class="text-xs text-slate-400">Mínimo 40 caracteres.</p>                @if (                  publishForm.get(\'description\')?.hasError(\'required\') &&                  (publishForm.get(\'description\')?.dirty || publishForm.get(\'description\')?.touched)                ) {                  <p class="text-xs text-rose-500">La descripción es obligatoria.</p>                } @else if (                  publishForm.get(\'description\')?.hasError(\'minlength\') &&                  (publishForm.get(\'description\')?.dirty || publishForm.get(\'description\')?.touched)                ) {                  <p class="text-xs text-rose-500">                    Faltan al menos                    {{ 40 - (publishForm.get(\'description\')?.value?.length || 0) }} caracteres.                  </p>                }              </div>            </div>          </section>          <!-- SECCIÓN 4: PRECIO Y GANANCIA (El "Why") -->          <section            class="bg-white dark:bg-[#161821] rounded-3xl shadow-[0_2px_20px_rgba(0,0,0,0.04)] dark:shadow-none border border-slate-100 dark:border-neutral-800 p-8"          >            <div class="flex items-center gap-3 mb-6">              <div                class="w-10 h-10 rounded-xl bg-emerald-50 dark:bg-emerald-500/10 flex items-center justify-center text-emerald-600 dark:text-emerald-400"              >                <span class="text-lg font-bold">$</span>              </div>              <div>                <h2 class="text-xl font-bold text-slate-900 dark:text-white">Precio y Ganancias</h2>              </div>            </div>            <!-- Selector de Estrategia -->            <div class="bg-slate-50 dark:bg-neutral-800/50 p-1.5 rounded-xl flex gap-2 mb-6">              <button                type="button"                (click)="setPricingStrategy(\'dynamic\')"                class="flex-1 py-2.5 rounded-lg text-sm font-semibold transition-all"                [class.bg-white]="isDynamicPricingSignal()"                [class.shadow-sm]="isDynamicPricingSignal()"                [class.text-indigo-600]="isDynamicPricingSignal()"                [class.text-slate-500]="!isDynamicPricingSignal()"              >                ⚡ Precio Dinámico (Recomendado)              </button>              <button                type="button"                (click)="setPricingStrategy(\'custom\')"                class="flex-1 py-2.5 rounded-lg text-sm font-semibold transition-all"                [class.bg-white]="!isDynamicPricingSignal()"                [class.shadow-sm]="!isDynamicPricingSignal()"                [class.text-slate-900]="!isDynamicPricingSignal()"                [class.text-slate-500]="isDynamicPricingSignal()"              >                Precio Fijo              </button>            </div>            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">              <div>                <label class="label-text"                  >Precio por día ({{ publishForm.get(\'currency\')?.value }})</label                >                <div class="relative">                  <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold"                    >$</span                  >                  <input                    type="number"                    formControlName="price_per_day"                    class="input-modern pl-8 text-2xl font-bold text-slate-900 dark:text-white h-14"                    [readonly]="isDynamicPricingSignal()"                  />                </div>                @if (                  publishForm.get(\'price_per_day\')?.invalid &&                  (publishForm.get(\'price_per_day\')?.dirty ||                    publishForm.get(\'price_per_day\')?.touched)                ) {                  <p class="mt-2 text-sm text-rose-500 flex items-center gap-1">                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                      <path                        stroke-linecap="round"                        stroke-linejoin="round"                        stroke-width="2"                        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"                      />                    </svg>                    Ingresá un precio por día válido (mínimo $1).                  </p>                }                <p                  *ngIf="isDynamicPricingSignal()"                  class="text-xs text-indigo-600 mt-2 font-medium"                >                  🤖 Ajustado automáticamente según demanda                </p>              </div>              <div                class="bg-indigo-50 dark:bg-indigo-900/20 rounded-2xl p-5 border border-indigo-100 dark:border-indigo-900/30"              >                <p class="text-sm text-indigo-900 dark:text-indigo-200 font-medium mb-1">                  Potencial mensual estimado                </p>                <div class="text-3xl font-black text-indigo-600 dark:text-indigo-400">                  {{                    (publishForm.get(\'price_per_day\')?.value || 0) * 10                      | currency: publishForm.get(\'currency\')?.value : \'symbol\' : \'1.0-0\'                  }}                </div>                <p class="text-xs text-indigo-700/70 dark:text-indigo-300/70 mt-1">                  Calculado con 10 días de alquiler/mes                </p>              </div>            </div>            <!-- Configuraciones avanzadas (Depósito, Seguros) colapsadas o simplificadas -->            <div              class="mt-8 pt-6 border-t border-slate-100 dark:border-neutral-800 grid grid-cols-1 sm:grid-cols-2 gap-4"            >              <label                class="flex items-center p-4 border border-slate-200 dark:border-neutral-700 rounded-xl cursor-pointer hover:bg-slate-50 dark:hover:bg-neutral-800 transition"              >                <input                  type="checkbox"                  formControlName="deposit_required"                  class="w-5 h-5 text-indigo-600 rounded border-slate-300 focus:ring-indigo-500"                />                <div class="ml-3">                  <span class="block text-sm font-semibold text-slate-700 dark:text-slate-300"                    >Solicitar Depósito</span                  >                  <span class="block text-xs text-slate-500">Garantía para el anfitrión</span>                </div>              </label>              <label                class="flex items-center p-4 border border-slate-200 dark:border-neutral-700 rounded-xl cursor-pointer hover:bg-slate-50 dark:hover:bg-neutral-800 transition"              >                <input                  type="checkbox"                  formControlName="auto_approval"                  class="w-5 h-5 text-indigo-600 rounded border-slate-300 focus:ring-indigo-500"                />                <div class="ml-3">                  <span class="block text-sm font-semibold text-slate-700 dark:text-slate-300"                    >Reserva Inmediata</span                  >                  <span class="block text-xs text-slate-500">Acepta viajes automáticamente</span>                </div>              </label>            </div>          </section>          <!-- SECCIÓN 5: UBICACIÓN -->          <section            class="bg-white dark:bg-[#161821] rounded-3xl shadow-[0_2px_20px_rgba(0,0,0,0.04)] dark:shadow-none border border-slate-100 dark:border-neutral-800 p-8"          >            <div class="flex items-center justify-between mb-6">              <h2 class="text-xl font-bold text-slate-900 dark:text-white">Ubicación del auto</h2>              <button                type="button"                (click)="useCurrentLocation()"                class="text-indigo-600 text-sm font-bold hover:underline flex items-center gap-1"              >                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                  <path                    stroke-linecap="round"                    stroke-linejoin="round"                    stroke-width="2"                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"                  />                  <path                    stroke-linecap="round"                    stroke-linejoin="round"                    stroke-width="2"                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"                  />                </svg>                Usar mi ubicación actual              </button>            </div>            <div class="grid grid-cols-2 gap-4">              <div class="col-span-2">                <input                  type="text"                  formControlName="location_street"                  placeholder="Dirección / Calle"                  class="input-modern"                  data-testid="location-street-input"                />                @if (                  publishForm.get(\'location_street\')?.invalid &&                  (publishForm.get(\'location_street\')?.dirty ||                    publishForm.get(\'location_street\')?.touched)                ) {                  <p class="mt-2 text-sm text-rose-500 flex items-center gap-1">                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                      <path                        stroke-linecap="round"                        stroke-linejoin="round"                        stroke-width="2"                        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"                      />                    </svg>                    Ingresá la dirección.                  </p>                }              </div>              <div>                <input                  type="text"                  formControlName="location_city"                  placeholder="Ciudad"                  class="input-modern"                  data-testid="location-city-input"                />                @if (                  publishForm.get(\'location_city\')?.invalid &&                  (publishForm.get(\'location_city\')?.dirty ||                    publishForm.get(\'location_city\')?.touched)                ) {                  <p class="mt-2 text-sm text-rose-500 flex items-center gap-1">                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                      <path                        stroke-linecap="round"                        stroke-linejoin="round"                        stroke-width="2"                        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"                      />                    </svg>                    Ingresá la ciudad.                  </p>                }              </div>              <div>                <input                  type="text"                  formControlName="location_state"                  placeholder="Provincia"                  class="input-modern"                  data-testid="location-state-input"                />                @if (                  publishForm.get(\'location_state\')?.invalid &&                  (publishForm.get(\'location_state\')?.dirty ||                    publishForm.get(\'location_state\')?.touched)                ) {                  <p class="mt-2 text-sm text-rose-500 flex items-center gap-1">                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">                      <path                        stroke-linecap="round"                        stroke-linejoin="round"                        stroke-width="2"                        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"                      />                    </svg>                    Ingresá la provincia.                  </p>                }              </div>              <div class="col-span-2 text-xs text-slate-400">                * Tu dirección exacta solo se comparte al confirmar una reserva.              </div>            </div>          </section>          <!-- BOTONES DE ACCIÓN FLOTANTES O FINALES -->          <div class="pt-6 flex flex-col sm:flex-row items-center gap-4">            <button              type="submit"              [disabled]="isSubmitting() || !canSubmit()"              class="w-full sm:w-auto px-8 py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold text-lg shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2"              data-testid="publish-submit"            >              <span                *ngIf="isSubmitting()"                class="animate-spin h-5 w-5 border-2 border-white/30 border-t-white rounded-full"              ></span>              {{ editMode() ? \'Guardar Cambios\' : \'Publicar Vehículo\' }}            </button>            <button              type="button"              (click)="goBack()"              class="text-slate-500 font-medium hover:text-slate-800 transition"            >              Cancelar            </button>          </div>        </form>      </div>      <!-- COLUMNA LATERAL (Trust & Preview) -->      <aside class="lg:col-span-4 space-y-6 lg:sticky lg:top-8">        <!-- Tarjeta de Confianza -->        <div          class="bg-gradient-to-br from-indigo-600 to-blue-700 rounded-3xl p-6 text-white shadow-xl relative overflow-hidden"        >          <div            class="absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white/10 rounded-full blur-2xl"          ></div>          <h3 class="font-bold text-lg mb-4 relative z-10">Tu seguridad es primero</h3>          <ul class="space-y-3 text-sm text-indigo-100 relative z-10">            <li class="flex gap-2">              <svg                class="w-5 h-5 text-indigo-300"                fill="none"                viewBox="0 0 24 24"                stroke="currentColor"              >                <path                  stroke-linecap="round"                  stroke-linejoin="round"                  stroke-width="2"                  d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"                />              </svg>              Cobertura de seguro incluida en cada viaje.            </li>            <li class="flex gap-2">              <svg                class="w-5 h-5 text-indigo-300"                fill="none"                viewBox="0 0 24 24"                stroke="currentColor"              >                <path                  stroke-linecap="round"                  stroke-linejoin="round"                  stroke-width="2"                  d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"                />              </svg>              Pagos protegidos hasta finalizar el alquiler.            </li>            <li class="flex gap-2">              <svg                class="w-5 h-5 text-indigo-300"                fill="none"                viewBox="0 0 24 24"                stroke="currentColor"              >                <path                  stroke-linecap="round"                  stroke-linejoin="round"                  stroke-width="2"                  d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"                />              </svg>              Conductores verificados con biometría.            </li>          </ul>        </div>        <!-- Preview Simplificado -->        <div          class="bg-white dark:bg-[#161821] rounded-3xl shadow-soft p-6 border border-slate-100 dark:border-neutral-800"        >          <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">            Vista Previa          </h4>          <div            class="aspect-[4/3] bg-slate-100 dark:bg-neutral-800 rounded-xl mb-4 overflow-hidden relative"          >            <img              *ngIf="uploadedPhotos().length > 0"              [src]="uploadedPhotos()[0].preview"              class="w-full h-full object-cover"            />            <div              *ngIf="uploadedPhotos().length === 0"              class="flex items-center justify-center h-full text-slate-300"            >              <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">                <path                  stroke-linecap="round"                  stroke-linejoin="round"                  stroke-width="2"                  d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"                />              </svg>            </div>          </div>          <div>            <p class="font-bold text-slate-900 dark:text-white truncate">              {{ getCurrentBrand() || \'Marca\' }} {{ getCurrentModel() || \'Modelo\' }}              {{ getCurrentYear() }}            </p>            <p class="text-sm text-slate-500 truncate">              {{ publishForm.get(\'location_city\')?.value || \'Ubicación\' }}            </p>            <div class="mt-3 flex items-baseline gap-1">              <span class="text-lg font-bold text-indigo-600"                >${{ publishForm.get(\'price_per_day\')?.value || 0 }}</span              >              <span class="text-xs text-slate-400">/ día</span>            </div>          </div>        </div>      </aside>    </div>    <!-- Modals (Sin cambios estructurales profundos, solo wrappers) -->    @if (showStockPhotosModal()) {      <div        class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4"      >        <div          class="bg-white dark:bg-[#161821] rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto"        >          <app-stock-photos-selector            [brand]="getCurrentBrand()"            [model]="getCurrentModel()"            [year]="getCurrentYear()"            (photosSelected)="onStockPhotosSelected($event)"          ></app-stock-photos-selector>          <div class="p-4 border-t border-slate-100 dark:border-neutral-800 text-right">            <button              (click)="showStockPhotosModal.set(false)"              class="text-slate-500 font-bold hover:text-slate-800"            >              Cerrar            </button>          </div>        </div>      </div>    }    @if (showAIPhotosModal()) {      <div        class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4"      >        <div          class="bg-white dark:bg-[#161821] rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto"        >          <app-ai-photo-generator            [brand]="getCurrentBrand()"            [model]="getCurrentModel()"            [year]="getCurrentYear()"            (photosGenerated)="onAIPhotosGenerated($event)"          ></app-ai-photo-generator>          <div class="p-4 border-t border-slate-100 dark:border-neutral-800 text-right">            <button              (click)="showAIPhotosModal.set(false)"              class="text-slate-500 font-bold hover:text-slate-800"            >              Cerrar            </button>          </div>        </div>      </div>    }  </div></div><!-- Styles helper for this page specifically --><style>  .label-text {    @apply block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2;  }  .input-modern {    @apply w-full bg-slate-50 dark:bg-neutral-800 border-0 rounded-xl px-4 py-3 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 transition-all placeholder:text-slate-400;  }  .radio-card {    @apply flex items-center justify-center px-4 py-3 rounded-xl border border-slate-200 dark:border-neutral-700 text-slate-600 dark:text-slate-300 font-medium hover:bg-slate-50 dark:hover:bg-neutral-800 transition cursor-pointer text-sm;  }</style></div>'
    var COMPONENTS = [{'name': 'AccordionComponent', 'selector': 'app-accordion'},{'name': 'AccountingAdminPage', 'selector': 'autorenta-accounting-admin-page'},{'name': 'AccountingDashboardComponent', 'selector': 'app-accounting-dashboard'},{'name': 'AccountingDashboardPage', 'selector': 'app-accounting-dashboard'},{'name': 'AdminAnalyticsPage', 'selector': 'app-admin-analytics-page'},{'name': 'AdminClaimDetailPage', 'selector': 'app-admin-claim-detail'},{'name': 'AdminClaimsPage', 'selector': 'app-admin-claims'},{'name': 'AdminDashboardPage', 'selector': 'autorenta-admin-dashboard-page'},{'name': 'AdminDisputesPage', 'selector': 'app-admin-disputes'},{'name': 'AdminFeatureFlagsPage', 'selector': 'app-admin-feature-flags'},{'name': 'AdminPricingPage', 'selector': 'app-admin-pricing-page'},{'name': 'AdminRefundsPage', 'selector': 'autorenta-admin-refunds-page'},{'name': 'AdminReviewsPage', 'selector': 'app-admin-reviews'},{'name': 'AdminSettlementsPage', 'selector': 'app-admin-settlements-page'},{'name': 'AdminVerificationsPage', 'selector': 'autorenta-admin-verifications-page'},{'name': 'AdminWithdrawalsPage', 'selector': 'autorenta-admin-withdrawals-page'},{'name': 'AiPhotoGeneratorComponent', 'selector': 'app-ai-photo-generator'},{'name': 'AnalyticsDemoComponent', 'selector': 'app-analytics-demo'},{'name': 'AppComponent', 'selector': 'app-root'},{'name': 'AppHeaderComponent', 'selector': 'app-app-header'},{'name': 'AuditLogsPage', 'selector': 'app-audit-logs'},{'name': 'AuthCallbackPage', 'selector': 'app-auth-callback-page'},{'name': 'AutorentarCreditCardComponent', 'selector': 'app-autorentar-credit-card'},{'name': 'AvailabilityAlertComponent', 'selector': 'app-availability-alert'},{'name': 'AvailabilityCalendarPage', 'selector': 'app-availability-calendar'},{'name': 'BadgeComponent', 'selector': 'app-badge'},{'name': 'BalanceSheetPage', 'selector': 'app-balance-sheet'},{'name': 'BankAccountFormComponent', 'selector': 'app-bank-account-form'},{'name': 'BankAccountsComponent', 'selector': 'app-bank-accounts'},{'name': 'BankAccountsListComponent', 'selector': 'app-bank-accounts-list'},{'name': 'BaseChatComponent', 'selector': 'app-base-chat'},{'name': 'BecomeRenterPage', 'selector': 'app-become-renter'},{'name': 'BirthDateModalComponent', 'selector': 'app-birth-date-modal'},{'name': 'BlockDateModalComponent', 'selector': 'app-block-date-modal'},{'name': 'BonusProtectorPurchaseComponent', 'selector': 'app-bonus-protector-purchase'},{'name': 'BonusProtectorSimulatorComponent', 'selector': 'app-bonus-protector-simulator'},{'name': 'BookingBenefitsComponent', 'selector': 'app-booking-benefits'},{'name': 'BookingChatComponent', 'selector': 'app-booking-chat'},{'name': 'BookingChatWrapperComponent', 'selector': 'app-booking-chat'},{'name': 'BookingCheckoutPage', 'selector': 'app-booking-checkout'},{'name': 'BookingConfirmationPage', 'selector': 'app-booking-confirmation'},{'name': 'BookingConfirmationStepComponent', 'selector': 'app-booking-confirmation-step'},{'name': 'BookingConfirmationTimelineComponent', 'selector': 'app-booking-confirmation-timeline'},{'name': 'BookingContractComponent', 'selector': 'app-booking-contract'},{'name': 'BookingContractPage', 'selector': 'app-booking-contract-page'},{'name': 'BookingDatesLocationStepComponent', 'selector': 'app-booking-dates-location-step'},{'name': 'BookingDatesStepComponent', 'selector': 'app-booking-dates-step'},{'name': 'BookingDetailPage', 'selector': 'app-booking-detail'},{'name': 'BookingDetailPaymentPage', 'selector': 'app-booking-detail-payment'},{'name': 'BookingDriverStepComponent', 'selector': 'app-booking-driver-step'},{'name': 'BookingExtrasStepComponent', 'selector': 'app-booking-extras-step'},{'name': 'BookingFlowMetricsComponent', 'selector': 'app-booking-flow-metrics'},{'name': 'BookingInsuranceStepComponent', 'selector': 'app-booking-insurance-step'},{'name': 'BookingInsuranceSummaryComponent', 'selector': 'app-booking-insurance-summary'},{'name': 'BookingLocationFormComponent', 'selector': 'app-booking-location-form'},{'name': 'BookingLocationFormComponent', 'selector': 'app-booking-location-form'},{'name': 'BookingOpsTimelineComponent', 'selector': 'app-booking-ops-timeline'},{'name': 'BookingPaymentCoverageStepComponent', 'selector': 'app-booking-payment-coverage-step'},{'name': 'BookingPaymentPage', 'selector': 'app-booking-payment'},{'name': 'BookingPaymentStepComponent', 'selector': 'app-booking-payment-step'},{'name': 'BookingPendingPage', 'selector': 'app-booking-pending'},{'name': 'BookingPickerPage', 'selector': 'app-booking-picker'},{'name': 'BookingPricingBreakdownComponent', 'selector': 'app-booking-pricing-breakdown'},{'name': 'BookingPricingBreakdownComponent', 'selector': 'app-booking-pricing-breakdown'},{'name': 'BookingReviewStepComponent', 'selector': 'app-booking-review-step'},{'name': 'BookingStatusComponent', 'selector': 'app-booking-status'},{'name': 'BookingStepIndicatorComponent', 'selector': 'app-booking-step-indicator'},{'name': 'BookingSuccessPage', 'selector': 'app-booking-success'},{'name': 'BookingSummaryCardComponent', 'selector': 'app-booking-summary-card'},{'name': 'BookingTrackingComponent', 'selector': 'app-booking-tracking'},{'name': 'BookingWizardPage', 'selector': 'app-booking-wizard'},{'name': 'BottomSheetComponent', 'selector': 'app-bottom-sheet'},{'name': 'BottomSheetComponent', 'selector': 'app-bottom-sheet'},{'name': 'BottomSheetFiltersComponent', 'selector': 'app-bottom-sheet-filters'},{'name': 'BulkBlockingPage', 'selector': 'app-bulk-blocking'},{'name': 'ButtonComponent', 'selector': 'app-button'},{'name': 'ButtonV2Component', 'selector': 'app-button-v2'},{'name': 'CalendarComponent', 'selector': 'app-calendar'},{'name': 'CalendarEventsListComponent', 'selector': 'app-calendar-events-list'},{'name': 'CalendarPage', 'selector': 'app-calendar'},{'name': 'CalendarWidgetComponent', 'selector': 'app-calendar-widget'},{'name': 'Car3dViewerComponent', 'selector': 'app-car-3d-viewer'},{'name': 'CarBookingPage', 'selector': 'app-car-booking'},{'name': 'CarCard', 'selector': 'app-car-card'},{'name': 'CarCardComponent', 'selector': 'app-car-card'},{'name': 'CarChatComponent', 'selector': 'app-car-chat'},{'name': 'CardComponent', 'selector': 'app-card'},{'name': 'CardComponent', 'selector': 'app-card'},{'name': 'CarDetailPage', 'selector': 'app-car-detail-page'},{'name': 'CardHoldPanelComponent', 'selector': 'app-card-hold-panel'},{'name': 'CarReviewsSectionComponent', 'selector': 'app-car-reviews-section'},{'name': 'CarsConversionPage', 'selector': 'app-cars-conversion'},{'name': 'CarsDrawerComponent', 'selector': 'app-cars-drawer'},{'name': 'CarsListComponent', 'selector': 'app-cars-list'},{'name': 'CarsListPage', 'selector': 'app-cars-list-page'},{'name': 'CarsMapComponent', 'selector': 'app-cars-map'},{'name': 'CashFlowPage', 'selector': 'app-cash-flow'},{'name': 'ChatShellComponent', 'selector': 'app-chat-shell'},{'name': 'CheckInPage', 'selector': 'app-check-in'},{'name': 'CheckOutPage', 'selector': 'app-check-out'},{'name': 'ChipComponent', 'selector': 'app-chip'},{'name': 'CitySelectComponent', 'selector': 'app-city-select'},{'name': 'ClaimFormComponent', 'selector': 'app-claim-form'},{'name': 'ClassBenefitsModalComponent', 'selector': 'app-class-benefits-modal'},{'name': 'ComparePage', 'selector': 'app-compare-page'},{'name': 'ContractPdfViewerComponent', 'selector': 'app-contract-pdf-viewer'},{'name': 'ContractSignModalComponent', 'selector': 'app-contract-sign-modal'},{'name': 'ContractsManagementPage', 'selector': 'app-contracts-management'},{'name': 'CoverageFundDashboardComponent', 'selector': 'app-coverage-fund-dashboard'},{'name': 'CoverageUpgradeSelectorComponent', 'selector': 'app-coverage-upgrade-selector'},{'name': 'CreditSecurityPanelComponent', 'selector': 'app-credit-security-panel'},{'name': 'CustomFeatureComponent', 'selector': 'app-custom-feature'},{'name': 'DamageComparisonComponent', 'selector': 'app-damage-comparison'},{'name': 'DarkModeToggleComponent', 'selector': 'app-dark-mode-toggle'},{'name': 'DashboardCalendarPage', 'selector': 'app-dashboard-calendar-page'},{'name': 'DashboardPage', 'selector': 'app-dashboard-page'},{'name': 'DatabaseExportPage', 'selector': 'app-database-export'},{'name': 'DateRangePickerComponent', 'selector': 'app-date-range-picker'},{'name': 'DateSearchComponent', 'selector': 'app-date-search'},{'name': 'DepositPage', 'selector': 'app-deposit'},{'name': 'DepositsMonitoringPage', 'selector': 'app-deposits-monitoring'},{'name': 'DepositStatusBadgeComponent', 'selector': 'app-deposit-status-badge'},{'name': 'DepositWarningComponent', 'selector': 'app-deposit-warning'},{'name': 'DevToolsComponent', 'selector': 'app-dev-tools'},{'name': 'DismissibleTourComponent', 'selector': 'app-dismissible-tour'},{'name': 'DisputeDetailPage', 'selector': 'app-dispute-detail-page'},{'name': 'DisputeFormComponent', 'selector': 'app-dispute-form'},{'name': 'DisputesListComponent', 'selector': 'app-disputes-list'},{'name': 'DisputesManagementPage', 'selector': 'app-disputes-management'},{'name': 'DistanceBadgeComponent', 'selector': 'app-distance-badge'},{'name': 'DistanceRiskTierBadgeComponent', 'selector': 'app-distance-risk-tier-badge'},{'name': 'DistanceSummaryComponent', 'selector': 'app-distance-summary'},{'name': 'DniUploaderComponent', 'selector': 'app-dni-uploader'},{'name': 'DriverProfileAdvancedComponent', 'selector': 'app-driver-profile-advanced'},{'name': 'DriverProfileCardComponent', 'selector': 'app-driver-profile-card'},{'name': 'DriverProfilePage', 'selector': 'app-driver-profile-page'},{'name': 'DrivingStatsPage', 'selector': 'app-driving-stats'},{'name': 'DynamicPriceBreakdownModalComponent', 'selector': 'app-dynamic-price-breakdown-modal'},{'name': 'DynamicPriceDisplayComponent', 'selector': 'app-dynamic-price-display'},{'name': 'DynamicPriceLockPanelComponent', 'selector': 'app-dynamic-price-lock-panel'},{'name': 'DynamicPricingBadgeComponent', 'selector': 'app-dynamic-pricing-badge'},{'name': 'EarningsCardComponent', 'selector': 'app-earnings-card'},{'name': 'EarningsPage', 'selector': 'app-earnings-page'},{'name': 'EmailVerificationComponent', 'selector': 'app-email-verification'},{'name': 'EmptyStateComponent', 'selector': 'app-empty-state'},{'name': 'EnhancedMapTooltipComponent', 'selector': 'app-enhanced-map-tooltip'},{'name': 'ErrorStateComponent', 'selector': 'app-error-state'},{'name': 'EvidenceUploaderComponent', 'selector': 'app-evidence-uploader'},{'name': 'ExchangeRatesPage', 'selector': 'app-exchange-rates'},{'name': 'ExplorePage', 'selector': 'app-explore'},{'name': 'FABComponent', 'selector': 'app-fab'},{'name': 'FacebookSidebarComponent', 'selector': 'app-facebook-sidebar'},{'name': 'FAQSectionComponent', 'selector': 'app-faq-section'},{'name': 'FavoriteButtonComponent', 'selector': 'app-favorite-button'},{'name': 'FavoritesPage', 'selector': 'app-favorites-page'},{'name': 'FgoManagementComponent', 'selector': 'app-fgo-management'},{'name': 'FgoOverviewPage', 'selector': 'app-fgo-overview'},{'name': 'FinancialHealthPage', 'selector': 'app-financial-health'},{'name': 'FipeAutocompleteComponent', 'selector': 'app-fipe-autocomplete'},{'name': 'FlagReviewModalComponent', 'selector': 'app-flag-review-modal'},{'name': 'FloatingActionFabComponent', 'selector': 'app-floating-action-fab'},{'name': 'FooterComponent', 'selector': 'app-footer'},{'name': 'GuaranteeOptionsInfoComponent', 'selector': 'app-guarantee-options-info'},{'name': 'HelpButtonComponent', 'selector': 'app-help-button'},{'name': 'HelpMenuComponent', 'selector': 'app-help-menu'},{'name': 'HostSupportInfoPanelComponent', 'selector': 'app-host-support-info-panel'},{'name': 'IconComponent', 'selector': 'app-icon'},{'name': 'InboxPage', 'selector': 'app-inbox'},{'name': 'IncomeStatementPage', 'selector': 'app-income-statement'},{'name': 'InfoBannerComponent', 'selector': 'app-info-banner'},{'name': 'InitialGoalModalComponent', 'selector': 'app-initial-goal-modal'},{'name': 'InputComponent', 'selector': 'app-input'},{'name': 'InspectionUploaderComponent', 'selector': 'app-inspection-uploader'},{'name': 'InsurancePage', 'selector': 'app-insurance-page'},{'name': 'InsurancePolicyPage', 'selector': 'app-insurance-policy'},{'name': 'InsuranceSelectorComponent', 'selector': 'app-insurance-selector'},{'name': 'InsuranceSummaryCardComponent', 'selector': 'app-insurance-summary-card'},{'name': 'JournalEntriesPage', 'selector': 'app-journal-entries'},{'name': 'KpiCardComponent', 'selector': 'app-kpi-card'},{'name': 'LanguageSelectorComponent', 'selector': 'app-language-selector'},{'name': 'LayoutComponent', 'selector': 'app-layout'},{'name': 'LedgerHistoryComponent', 'selector': 'app-ledger-history'},{'name': 'LedgerPage', 'selector': 'app-ledger'},{'name': 'LicenseUploaderComponent', 'selector': 'app-license-uploader'},{'name': 'LiveTrackingMapComponent', 'selector': 'app-live-tracking-map'},{'name': 'LoadingStateComponent', 'selector': 'app-loading-state'},{'name': 'LocationMapPickerComponent', 'selector': 'app-location-map-picker'},{'name': 'LocationPickerComponent', 'selector': 'app-location-picker'},{'name': 'LocationSettingsPage', 'selector': 'app-location-settings-page'},{'name': 'LoginPage', 'selector': 'app-login-page'},{'name': 'MakeCalendarPublicButtonComponent', 'selector': 'app-make-calendar-public-button'},{'name': 'ManualJournalEntryPage', 'selector': 'app-manual-journal-entry'},{'name': 'MapBookingPanelComponent', 'selector': 'app-map-booking-panel'},{'name': 'MapCardTooltipComponent', 'selector': 'app-map-card-tooltip'},{'name': 'MapControlsComponent', 'selector': 'app-map-controls'},{'name': 'MapDetailsPanelComponent', 'selector': 'app-map-details-panel'},{'name': 'MapDrawerComponent', 'selector': 'app-map-drawer'},{'name': 'MapFiltersComponent', 'selector': 'app-map-filters'},{'name': 'MapLayersControlComponent', 'selector': 'app-map-layers-control'},{'name': 'MapMarkerComponent', 'selector': 'app-map-marker'},{'name': 'MarketplaceV2Page', 'selector': 'app-marketplace-v2-page'},{'name': 'MercadoPagoCallbackPage', 'selector': 'app-mercadopago-callback'},{'name': 'MercadopagoCardFormComponent', 'selector': 'app-mercadopago-card-form'},{'name': 'MercadoPagoConnectComponent', 'selector': 'app-mercadopago-connect'},{'name': 'MercadopagoPaymentBrickComponent', 'selector': 'app-mercadopago-payment-brick'},{'name': 'MessagesPage', 'selector': 'app-messages'},{'name': 'MissingDocumentsWidgetComponent', 'selector': 'app-missing-documents-widget'},{'name': 'MobileBottomNavComponent', 'selector': 'app-mobile-bottom-nav'},{'name': 'ModalComponent', 'selector': 'app-modal'},{'name': 'ModerateReviewsPage', 'selector': 'app-moderate-reviews'},{'name': 'MpCallbackPage', 'selector': 'app-mp-callback'},{'name': 'MpOnboardingModalComponent', 'selector': 'app-mp-onboarding-modal'},{'name': 'MultiCarCalendarComponent', 'selector': 'app-multi-car-calendar'},{'name': 'MyBookingsPage', 'selector': 'app-my-bookings-page'},{'name': 'MyCarsPage', 'selector': 'app-my-cars-page'},{'name': 'MyClaimsPage', 'selector': 'app-my-claims'},{'name': 'NotificationPreferencesPage', 'selector': 'app-notification-preferences'},{'name': 'NotificationsComponent', 'selector': 'app-notifications'},{'name': 'NotificationsPage', 'selector': 'app-notifications-page'},{'name': 'NotificationsSettingsPage', 'selector': 'app-notifications-settings'},{'name': 'OfflineBannerComponent', 'selector': 'app-offline-banner'},{'name': 'OfflineMessagesIndicatorComponent', 'selector': 'app-offline-messages-indicator'},{'name': 'OfflineMessagesPanelComponent', 'selector': 'app-offline-messages-panel'},{'name': 'OnboardingComponent', 'selector': 'app-onboarding'},{'name': 'OnboardingPage', 'selector': 'app-onboarding-page'},{'name': 'OrganizationDashboardComponent', 'selector': 'app-organization-dashboard'},{'name': 'OwnerBookingsPage', 'selector': 'app-owner-bookings-page'},{'name': 'OwnerCheckInPage', 'selector': 'app-owner-check-in'},{'name': 'OwnerCheckOutPage', 'selector': 'app-owner-check-out'},{'name': 'OwnerConfirmationComponent', 'selector': 'app-owner-confirmation'},{'name': 'OwnerDamageReportPage', 'selector': 'app-owner-damage-report'},{'name': 'OwnerDashboardPage', 'selector': 'app-owner-dashboard'},{'name': 'PaymentActionsComponent', 'selector': 'app-payment-actions'},{'name': 'PaymentMethodButtonsComponent', 'selector': 'app-payment-method-buttons'},{'name': 'PaymentMethodComparisonModalComponent', 'selector': 'app-payment-method-comparison-modal'},{'name': 'PaymentMethodSelectorComponent', 'selector': 'app-payment-method-selector'},{'name': 'PaymentModeAlertComponent', 'selector': 'app-payment-mode-alert'},{'name': 'PaymentModeToggleComponent', 'selector': 'app-payment-mode-toggle'},{'name': 'PaymentProviderSelectorComponent', 'selector': 'app-payment-provider-selector'},{'name': 'PaymentSummaryPanelComponent', 'selector': 'app-payment-summary-panel'},{'name': 'PayoutHistoryComponent', 'selector': 'app-payout-history'},{'name': 'PayoutsHistoryComponent', 'selector': 'app-payouts-history'},{'name': 'PayoutsPage', 'selector': 'app-payouts-page'},{'name': 'PayoutStatsComponent', 'selector': 'app-payout-stats'},{'name': 'PayoutsWidgetComponent', 'selector': 'app-payouts-widget'},{'name': 'PayPalButtonComponent', 'selector': 'app-paypal-button'},{'name': 'PendingApprovalPage', 'selector': 'app-pending-approval'},{'name': 'PendingReviewsBannerComponent', 'selector': 'app-pending-reviews-banner'},{'name': 'PendingReviewsListComponent', 'selector': 'app-pending-reviews-list'},{'name': 'PendingReviewsPage', 'selector': 'app-pending-reviews'},{'name': 'PeriodClosuresPage', 'selector': 'app-period-closures'},{'name': 'PersonalizedDashboardComponent', 'selector': 'app-personalized-dashboard'},{'name': 'PersonalizedLocationComponent', 'selector': 'app-personalized-location'},{'name': 'PhoneVerificationComponent', 'selector': 'app-phone-verification'},{'name': 'PickupLocationSelectorComponent', 'selector': 'app-pickup-location-selector'},{'name': 'PremiumFeatureComponent', 'selector': 'app-premium-feature'},{'name': 'ProfessionalDateInputComponent', 'selector': 'app-professional-date-input'},{'name': 'ProfileContactPage', 'selector': 'app-profile-contact'},{'name': 'ProfileContactSectionComponent', 'selector': 'app-profile-contact-section'},{'name': 'ProfileExpandedPage', 'selector': 'app-profile-expanded-page'},{'name': 'ProfileHeaderComponent', 'selector': 'app-profile-header'},{'name': 'ProfileIdentitySectionComponent', 'selector': 'app-profile-identity-section'},{'name': 'ProfileKpisComponent', 'selector': 'app-profile-kpis'},{'name': 'ProfilePage', 'selector': 'app-profile-page'},{'name': 'ProfilePreferencesPage', 'selector': 'app-profile-preferences'},{'name': 'ProfileSecurityPage', 'selector': 'app-profile-security'},{'name': 'ProfileVerificationPage', 'selector': 'app-profile-verification'},{'name': 'ProfileWizardComponent', 'selector': 'app-profile-wizard'},{'name': 'PromoCodeInputComponent', 'selector': 'app-promo-code-input'},{'name': 'ProtectionCreditCardComponent', 'selector': 'app-protection-credit-card'},{'name': 'ProtectionCreditExplanationModalComponent', 'selector': 'app-protection-credit-explanation-modal'},{'name': 'ProtectionsPage', 'selector': 'app-protections-page'},{'name': 'ProvisionsPage', 'selector': 'app-provisions'},{'name': 'PublicProfilePage', 'selector': 'app-public-profile'},{'name': 'PublishCarV2Page', 'selector': 'app-publish-car-v2'},{'name': 'PullToRefreshComponent', 'selector': 'app-pull-to-refresh'},{'name': 'PwaCapabilitiesComponent', 'selector': 'app-pwa-capabilities'},{'name': 'PwaInstallBannerComponent', 'selector': 'app-pwa-install-banner'},{'name': 'PwaInstallPromptComponent', 'selector': 'app-pwa-install-prompt'},{'name': 'PwaTitlebarComponent', 'selector': 'app-pwa-titlebar'},{'name': 'PwaUpdatePromptComponent', 'selector': 'app-pwa-update-prompt'},{'name': 'QuickBookingModalComponent', 'selector': 'app-quick-booking-modal'},{'name': 'QuickBookPage', 'selector': 'app-quick-book-page'},{'name': 'ReconciliationPage', 'selector': 'app-reconciliation'},{'name': 'ReembolsabilityBadgeComponent', 'selector': 'app-reembolsability-badge'},{'name': 'ReferralLandingPage', 'selector': 'app-referral-landing'},{'name': 'ReferralsPage', 'selector': 'app-referrals'},{'name': 'RefundRequestComponent', 'selector': 'app-refund-request'},{'name': 'RefundStatusComponent', 'selector': 'app-refund-status'},{'name': 'RegisterPage', 'selector': 'app-register-page'},{'name': 'RenterConfirmationComponent', 'selector': 'app-renter-confirmation'},{'name': 'ReportClaimPage', 'selector': 'app-report-claim'},{'name': 'RequestPayoutModalComponent', 'selector': 'app-request-payout-modal'},{'name': 'ResetPasswordPage', 'selector': 'app-reset-password-page'},{'name': 'ResponsiveFeatureComponent', 'selector': 'app-responsive-feature'},{'name': 'RevenueRecognitionPage', 'selector': 'app-revenue-recognition'},{'name': 'ReviewCardComponent', 'selector': 'app-review-card'},{'name': 'ReviewFormComponent', 'selector': 'app-review-form'},{'name': 'ReviewManagementComponent', 'selector': 'app-review-management'},{'name': 'ReviewRadarChartComponent', 'selector': 'app-review-radar-chart'},{'name': 'ReviewsPage', 'selector': 'app-reviews-page'},{'name': 'ReviewSummaryComponent', 'selector': 'app-review-summary'},{'name': 'RiskCalculatorViewerComponent', 'selector': 'app-risk-calculator-viewer'},{'name': 'RiskPolicyTableComponent', 'selector': 'app-risk-policy-table'},{'name': 'SectionCardComponent', 'selector': 'app-section-card'},{'name': 'SelfieCaptureComponent', 'selector': 'app-selfie-capture'},{'name': 'SettlementSimulatorComponent', 'selector': 'app-settlement-simulator'},{'name': 'ShareButtonComponent', 'selector': 'app-share-button'},{'name': 'ShareMenuComponent', 'selector': 'app-share-menu'},{'name': 'SimpleCheckoutComponent', 'selector': 'app-simple-checkout'},{'name': 'SkeletonComponent', 'selector': 'app-skeleton'},{'name': 'SkeletonLoaderComponent', 'selector': 'app-skeleton-loader'},{'name': 'SmartOnboardingComponent', 'selector': 'app-smart-onboarding'},{'name': 'SplashComponent', 'selector': 'app-splash'},{'name': 'SplashLoaderComponent', 'selector': 'app-splash-loader'},{'name': 'StatisticsWidgetComponent', 'selector': 'app-statistics-widget'},{'name': 'StatsPage', 'selector': 'app-stats-page'},{'name': 'StatsStripComponent', 'selector': 'app-stats-strip'},{'name': 'StepperModalComponent', 'selector': 'app-stepper-modal'},{'name': 'StickyCtaMobileComponent', 'selector': 'app-sticky-cta-mobile'},{'name': 'StockPhotosSelectorComponent', 'selector': 'app-stock-photos-selector'},{'name': 'TermsAndConsentsComponent', 'selector': 'app-terms-and-consents'},{'name': 'TermsPage', 'selector': 'app-terms'},{'name': 'ThreeCanvasComponent', 'selector': 'app-three-canvas'},{'name': 'ToastComponent', 'selector': 'app-toast'},{'name': 'TooltipComponent', 'selector': 'app-tooltip'},{'name': 'TourStatusComponent', 'selector': 'app-tour-status'},{'name': 'TransactionHistoryComponent', 'selector': 'app-transaction-history'},{'name': 'TransferFundsComponent', 'selector': 'app-transfer-funds'},{'name': 'UploadImageComponent', 'selector': 'app-upload-image'},{'name': 'UrgencyBannerComponent', 'selector': 'app-urgency-banner'},{'name': 'UrgentBookingPage', 'selector': 'app-urgent-booking'},{'name': 'UrgentRentalBannerComponent', 'selector': 'app-urgent-rental-banner'},{'name': 'UserBadgesComponent', 'selector': 'app-user-badges'},{'name': 'UtilityBarComponent', 'selector': 'app-utility-bar'},{'name': 'VehicleDocumentsPage', 'selector': 'app-vehicle-documents'},{'name': 'VerificationBadgeComponent', 'selector': 'app-verification-badge'},{'name': 'VerificationBlockingModalComponent', 'selector': 'app-verification-blocking-modal'},{'name': 'VerificationPage', 'selector': 'app-verification'},{'name': 'VerificationProgressComponent', 'selector': 'app-verification-progress'},{'name': 'VerificationPromptBannerComponent', 'selector': 'app-verification-prompt-banner'},{'name': 'WaitlistCountComponent', 'selector': 'app-waitlist-count'},{'name': 'WaitlistPage', 'selector': 'app-waitlist-page'},{'name': 'WalletAccountNumberCardComponent', 'selector': 'app-wallet-account-number-card'},{'name': 'WalletBalanceCardComponent', 'selector': 'app-wallet-balance-card'},{'name': 'WalletFaqComponent', 'selector': 'app-wallet-faq'},{'name': 'WalletPage', 'selector': 'app-wallet'},{'name': 'WalletTransfersComponent', 'selector': 'app-wallet-transfers'},{'name': 'WaterfallSimulatorComponent', 'selector': 'app-waterfall-simulator'},{'name': 'WazeLiveMapComponent', 'selector': 'app-waze-live-map'},{'name': 'WithdrawalHistoryComponent', 'selector': 'app-withdrawal-history'},{'name': 'WithdrawalRequestFormComponent', 'selector': 'app-withdrawal-request-form'},{'name': 'WithdrawalsAdminPage', 'selector': 'app-withdrawals-admin'},{'name': 'WizardComponent', 'selector': 'app-wizard'},{'name': 'WizardStepComponent', 'selector': 'app-wizard-step'}];
    var DIRECTIVES = [{'name': 'AutoAltDirective', 'selector': 'img[appAutoAlt]'},{'name': 'ClickOutsideDirective', 'selector': '[appClickOutside]'},{'name': 'EscapeKeyDirective', 'selector': '[appEscapeKey]'},{'name': 'FeatureFlagDirective', 'selector': '[appFeatureFlag]'},{'name': 'FocusTrapDirective', 'selector': '[appFocusTrap]'},{'name': 'FocusTrapDirective', 'selector': '[appFocusTrap]'},{'name': 'FormErrorAriaDirective', 'selector': 'input[appFormErrorAria], textarea[appFormErrorAria], select[appFormErrorAria]'},{'name': 'ResponsiveImageDirective', 'selector': 'img[appResponsiveImage]'}];
    var ACTUAL_COMPONENT = {'name': 'PublishCarV2Page'};
</script>
<script src="../js/tree.js"></script>

















                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'component';
            var COMPODOC_CURRENT_PAGE_URL = 'PublishCarV2Page.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
