<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>autorenta-web documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">autorenta-web documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content component">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Components</li>
  <li class="breadcrumb-item"
  >
  CarsMapComponent</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" class="nav-link"
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
        <li class="nav-item">
            <a href="#templateData" class="nav-link"
                role="tab" id="templateData-tab" data-bs-toggle="tab" data-link="template">Template</a>
        </li>
        <li class="nav-item">
            <a href="#styleData" class="nav-link"
                role="tab" id="styleData-tab" data-bs-toggle="tab" data-link="style">Styles</a>
        </li>
        <li class="nav-item">
            <a href="#tree" class="nav-link"
                role="tab" id="tree-tab" data-bs-toggle="tab" data-link="dom-tree">DOM Tree</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/shared/components/cars-map/cars-map.component.ts</code>
</p>




    <p class="comment">
        <h3>Implements</h3>
    </p>
    <p class="comment">
                <code>OnInit</code>
                <code>AfterViewInit</code>
                <code>OnDestroy</code>
                <code>OnChanges</code>
    </p>


<section data-compodoc="block-metadata">
    <h3>Metadata</h3>
    <table class="table table-sm table-hover metadata">
        <tbody>


            <tr>
                <td class="col-md-3">encapsulation</td>
                <td class="col-md-9"><code>ViewEncapsulation.None</code></td>
            </tr>










            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>app-cars-map</code></td>
            </tr>

            <tr>
                <td class="col-md-3">standalone</td>
                <td class="col-md-9"><code>true</code></td>
            </tr>

            <tr>
                <td class="col-md-3">imports</td>
                <td class="col-md-9">
                            <code>CommonModule</code>
                                <code><a href="../components/MapBookingPanelComponent.html" target="_self" >MapBookingPanelComponent</a></code>
                                <code><a href="../components/MapDetailsPanelComponent.html" target="_self" >MapDetailsPanelComponent</a></code>
                                <code><a href="../components/MapLayersControlComponent.html" target="_self" >MapLayersControlComponent</a></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-3">styleUrls</td>
                <td class="col-md-9"><code>./cars-map.component.css</code></td>
            </tr>



            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>./cars-map.component.html</code></td>
            </tr>








        </tbody>
    </table>
</section>

    <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#applicationRef" >applicationRef</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#bookingPanelOpen" >bookingPanelOpen</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#carMarkers" >carMarkers</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#circleSizeMultiplier" >circleSizeMultiplier</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#clusterCountLayerId" >clusterCountLayerId</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#clusteringThreshold" >clusteringThreshold</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#clusterLayerId" >clusterLayerId</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#clusterSourceId" >clusterSourceId</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#directionsService" >directionsService</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#error" >error</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#followLocationInterval" >followLocationInterval</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#hoverTimeouts" >hoverTimeouts</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#injector" >injector</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#isBrowser" >isBrowser</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#isDarkMode" >isDarkMode</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#isochroneLayerId" >isochroneLayerId</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#isochroneOutlineLayerId" >isochroneOutlineLayerId</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#isochroneSourceId" >isochroneSourceId</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#loading" >loading</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#map" >map</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#mapboxgl" >mapboxgl</a>
                            </li>
                            <li>
                                    <span class="modifier"></span>
                                <a href="#mapContainer" >mapContainer</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#mapLayers" >mapLayers</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#markerComponentPool" >markerComponentPool</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#maxPoolSize" >maxPoolSize</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#maxVisibleMarkers" >maxVisibleMarkers</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#pendingUpdate" >pendingUpdate</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#platformId" >platformId</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#routeLayerId" >routeLayerId</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#routeOutlineLayerId" >routeOutlineLayerId</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#routeSourceId" >routeSourceId</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#searchRadiusLayerId" >searchRadiusLayerId</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#searchRadiusSourceId" >searchRadiusSourceId</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#selectedCar" >selectedCar</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#selectedCarForBooking" >selectedCarForBooking</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#showBaseMap" >showBaseMap</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#showMarketplaceCars" >showMarketplaceCars</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#showUserLocation" >showUserLocation</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#spatialIndex" >spatialIndex</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#tooltipComponentPool" >tooltipComponentPool</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#tooltipComponents" >tooltipComponents</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#tooltipPopups" >tooltipPopups</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#useClustering" >useClustering</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#userLocationMarker" >userLocationMarker</a>
                            </li>
                            <li>
                                    <span class="modifier">Readonly</span>
                                <a href="#viewMode" >viewMode</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#viewportBuffer" >viewportBuffer</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#virtualizationThreshold" >virtualizationThreshold</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#visibleCarIds" >visibleCarIds</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#addDeliveryIsochrone" >addDeliveryIsochrone</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#addDirectionsRoute" >addDirectionsRoute</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#addSearchRadiusLayer" >addSearchRadiusLayer</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#addUserLocationMarker" >addUserLocationMarker</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#animateMarkerUpdate" >animateMarkerUpdate</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#buildSpatialIndex" >buildSpatialIndex</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#calculateDistance" >calculateDistance</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#calculateDistanceKm" >calculateDistanceKm</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#cleanup" >cleanup</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#clearComponentPools" >clearComponentPools</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#clearMarkers" >clearMarkers</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#createCarMarker" >createCarMarker</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#createCircleGeometry" >createCircleGeometry</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#createTooltipPopup" >createTooltipPopup</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#createUserLocationPopup" >createUserLocationPopup</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#deg2rad" >deg2rad</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#destinationPoint" >destinationPoint</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#detectDarkMode" >detectDarkMode</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#emitBounds" >emitBounds</a>
                            </li>
                            <li>
                                <a href="#flyTo" >flyTo</a>
                            </li>
                            <li>
                                <a href="#flyToCarLocation" >flyToCarLocation</a>
                            </li>
                            <li>
                                <a href="#flyToLocation" >flyToLocation</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#formatUpdateTime" >formatUpdateTime</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getAdaptiveClusterMaxZoom" >getAdaptiveClusterMaxZoom</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getAdaptiveClusterRadius" >getAdaptiveClusterRadius</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getAvailableCarsCount" >getAvailableCarsCount</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getCssVariableValue" >getCssVariableValue</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getInUseCarsCount" >getInUseCarsCount</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getLocationUpdateText" >getLocationUpdateText</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getMarkerComponentFromPool" >getMarkerComponentFromPool</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getNearbyCarsCount" >getNearbyCarsCount</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getSoonAvailableCarsCount" >getSoonAvailableCarsCount</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getTimeBasedLightPreset" >getTimeBasedLightPreset</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getTooltipComponentFromPool" >getTooltipComponentFromPool</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getUnavailableCarsCount" >getUnavailableCarsCount</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getVisibleCarsInViewport" >getVisibleCarsInViewport</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#groupCarsByAvailability" >groupCarsByAvailability</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#hideTooltipForCar" >hideTooltipForCar</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#highlightSelectedCar" >highlightSelectedCar</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#initializeMap" >initializeMap</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#ngAfterViewInit" >ngAfterViewInit</a>
                            </li>
                            <li>
                                <a href="#ngOnChanges" >ngOnChanges</a>
                            </li>
                            <li>
                                <a href="#ngOnDestroy" >ngOnDestroy</a>
                            </li>
                            <li>
                                <a href="#ngOnInit" >ngOnInit</a>
                            </li>
                            <li>
                                <a href="#onBookingConfirmed" >onBookingConfirmed</a>
                            </li>
                            <li>
                                <a href="#onBookingPanelClose" >onBookingPanelClose</a>
                            </li>
                            <li>
                                <a href="#onDetailsPanelClose" >onDetailsPanelClose</a>
                            </li>
                            <li>
                                <a href="#onLayerToggle" >onLayerToggle</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#onSearchRadiusChange" >onSearchRadiusChange</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#preWarmComponentPoolDuringIdle" >preWarmComponentPoolDuringIdle</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#removeDeliveryIsochrone" >removeDeliveryIsochrone</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#removeDirectionsRoute" >removeDirectionsRoute</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#removeHighlightFromCar" >removeHighlightFromCar</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#removeSearchRadiusLayer" >removeSearchRadiusLayer</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#renderCarMarkers" >renderCarMarkers</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#renderVirtualizedMarkers" >renderVirtualizedMarkers</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#returnMarkerComponentToPool" >returnMarkerComponentToPool</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#returnTooltipComponentToPool" >returnTooltipComponentToPool</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#scheduleDebouncedUpdate" >scheduleDebouncedUpdate</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#setupClustering" >setupClustering</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#setupFollowLocation" >setupFollowLocation</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#setupLockControls" >setupLockControls</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#setupViewportChangeListener" >setupViewportChangeListener</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#showTooltipForCar" >showTooltipForCar</a>
                            </li>
                            <li>
                                <a href="#startFollowingLocation" >startFollowingLocation</a>
                            </li>
                            <li>
                                <a href="#stopFollowingLocation" >stopFollowingLocation</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#toggleDeliveryZone" >toggleDeliveryZone</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#toggleDirections" >toggleDirections</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#toggleFollowLocation" >toggleFollowLocation</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#toggleLock" >toggleLock</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#triggerLocationPulse" >triggerLocationPulse</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#updateMapTheme" >updateMapTheme</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#updateMarkersBasedOnCount" >updateMarkersBasedOnCount</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#updateMarkerStyles" >updateMarkerStyles</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#updateSpatialIndex" >updateSpatialIndex</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#updateVirtualizedMarkers" >updateVirtualizedMarkers</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Inputs</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#cars" >cars</a>
                            </li>
                            <li>
                                <a href="#deliveryTimeMinutes" >deliveryTimeMinutes</a>
                            </li>
                            <li>
                                <a href="#followUserLocation" >followUserLocation</a>
                            </li>
                            <li>
                                <a href="#lastLocationUpdate" >lastLocationUpdate</a>
                            </li>
                            <li>
                                <a href="#locationAccuracy" >locationAccuracy</a>
                            </li>
                            <li>
                                <a href="#locationMode" >locationMode</a>
                            </li>
                            <li>
                                <a href="#lockZoomRotation" >lockZoomRotation</a>
                            </li>
                            <li>
                                <a href="#markerVariant" >markerVariant</a>
                            </li>
                            <li>
                                <a href="#searchRadiusKm" >searchRadiusKm</a>
                            </li>
                            <li>
                                <a href="#selectedCarId" >selectedCarId</a>
                            </li>
                            <li>
                                <a href="#showDeliveryIsochrone" >showDeliveryIsochrone</a>
                            </li>
                            <li>
                                <a href="#showDirectionsRoute" >showDirectionsRoute</a>
                            </li>
                            <li>
                                <a href="#showSearchRadius" >showSearchRadius</a>
                            </li>
                            <li>
                                <a href="#userAvatarUrl" >userAvatarUrl</a>
                            </li>
                            <li>
                                <a href="#userLocation" >userLocation</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Outputs</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#bookingConfirmed" >bookingConfirmed</a>
                            </li>
                            <li>
                                <a href="#boundsChange" >boundsChange</a>
                            </li>
                            <li>
                                <a href="#carSelected" >carSelected</a>
                            </li>
                            <li>
                                <a href="#followLocationToggle" >followLocationToggle</a>
                            </li>
                            <li>
                                <a href="#lockToggle" >lockToggle</a>
                            </li>
                            <li>
                                <a href="#quickBook" >quickBook</a>
                            </li>
                            <li>
                                <a href="#searchRadiusChange" >searchRadiusChange</a>
                            </li>
                            <li>
                                <a href="#userLocationChange" >userLocationChange</a>
                            </li>
                        </ul>
                    </td>
                </tr>



                    <tr>
                        <td class="col-md-4">
                            <h6><b>Accessors</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                    <a href="#mapInstance" >mapInstance</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
        </tbody>
    </table>
</section>


    <section data-compodoc="block-inputs">
    <h3 id="inputs">Inputs</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cars"></a>
                        <b>cars</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>CarMapLocation[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="196" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:196</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="deliveryTimeMinutes"></a>
                        <b>deliveryTimeMinutes</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>30</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="204" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:204</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="followUserLocation"></a>
                        <b>followUserLocation</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="206" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:206</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="lastLocationUpdate"></a>
                        <b>lastLocationUpdate</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="209" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:209</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="locationAccuracy"></a>
                        <b>locationAccuracy</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="208" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:208</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="locationMode"></a>
                        <b>locationMode</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>&quot;searching&quot; | &quot;booking-confirmed&quot; | &quot;default&quot;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;default&#x27;</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="200" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:200</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="lockZoomRotation"></a>
                        <b>lockZoomRotation</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="207" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:207</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="markerVariant"></a>
                        <b>markerVariant</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>&quot;photo&quot; | &quot;price&quot;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;photo&#x27;</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="210" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:210</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="searchRadiusKm"></a>
                        <b>searchRadiusKm</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>5</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="201" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:201</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="selectedCarId"></a>
                        <b>selectedCarId</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>string | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="197" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:197</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="showDeliveryIsochrone"></a>
                        <b>showDeliveryIsochrone</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="203" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:203</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="showDirectionsRoute"></a>
                        <b>showDirectionsRoute</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="205" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:205</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="showSearchRadius"></a>
                        <b>showSearchRadius</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>true</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="202" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:202</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="userAvatarUrl"></a>
                        <b>userAvatarUrl</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>string | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="199" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:199</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="userLocation"></a>
                        <b>userLocation</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>literal type | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="198" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:198</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
</section>
    <section data-compodoc="block-outputs">
    <h3 id="outputs">Outputs</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="bookingConfirmed"></a>
                        <b>bookingConfirmed</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>EventEmitter</code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="218" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:218</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="boundsChange"></a>
                        <b>boundsChange</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>EventEmitter</code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="222" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:222</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="carSelected"></a>
                        <b>carSelected</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>EventEmitter</code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="212" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:212</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="followLocationToggle"></a>
                        <b>followLocationToggle</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>EventEmitter</code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="216" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:216</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="lockToggle"></a>
                        <b>lockToggle</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>EventEmitter</code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="217" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:217</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="quickBook"></a>
                        <b>quickBook</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>EventEmitter</code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="214" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:214</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="searchRadiusChange"></a>
                        <b>searchRadiusChange</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>EventEmitter</code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="215" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:215</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="userLocationChange"></a>
                        <b>userLocationChange</b>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>EventEmitter</code>

                    </td>
                </tr>
                        <tr>
                            <td class="col-md-2" colspan="2">
                                    <div class="io-line">Defined in <a href="" data-line="213" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:213</a></div>
                            </td>
                        </tr>
            </tbody>
        </table>
</section>


    <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addDeliveryIsochrone"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>addDeliveryIsochrone</b></span>
                        <a href="#addDeliveryIsochrone"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addDeliveryIsochrone()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2130"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2130</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Add delivery isochrone layer for selected car
Shows the area reachable from the car&#39;s location within deliveryTimeMinutes</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addDirectionsRoute"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>addDirectionsRoute</b></span>
                        <a href="#addDirectionsRoute"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addDirectionsRoute()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2240"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2240</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Add directions route layer from user location to selected car
Shows turn-by-turn directions with estimated time and distance</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addSearchRadiusLayer"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>addSearchRadiusLayer</b></span>
                        <a href="#addSearchRadiusLayer"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addSearchRadiusLayer()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1783"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1783</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Add search radius layer (circle around user location)</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addUserLocationMarker"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>addUserLocationMarker</b></span>
                        <a href="#addUserLocationMarker"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addUserLocationMarker()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1482"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1482</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Add user location marker with custom styling and animations</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="animateMarkerUpdate"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>animateMarkerUpdate</b></span>
                        <a href="#animateMarkerUpdate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>animateMarkerUpdate()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1716"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1716</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Animate marker update with smooth transitions</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="buildSpatialIndex"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>buildSpatialIndex</b></span>
                        <a href="#buildSpatialIndex"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>buildSpatialIndex()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="825"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:825</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Build spatial index for efficient queries</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="calculateDistance"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>calculateDistance</b></span>
                        <a href="#calculateDistance"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>calculateDistance(lat1: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, lon1: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, lat2: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, lon2: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1748"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1748</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Calculate distance between two coordinates (Haversine formula)</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>lat1</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>lon1</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>lat2</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>lon2</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="calculateDistanceKm"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>calculateDistanceKm</b></span>
                        <a href="#calculateDistanceKm"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>calculateDistanceKm(lat1: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, lon1: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, lat2: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, lon2: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1622"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1622</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Calculate distance between two points in km</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>lat1</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>lon1</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>lat2</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>lon2</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cleanup"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>cleanup</b></span>
                        <a href="#cleanup"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>cleanup()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2384"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2384</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Cleanup on destroy</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clearComponentPools"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>clearComponentPools</b></span>
                        <a href="#clearComponentPools"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>clearComponentPools()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1048"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1048</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Clear component pools (called during cleanup)</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clearMarkers"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>clearMarkers</b></span>
                        <a href="#clearMarkers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>clearMarkers()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2081"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2081</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Clear all markers and related resources</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createCarMarker"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>createCarMarker</b></span>
                        <a href="#createCarMarker"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createCarMarker(car: <a href="../interfaces/CarMapLocation.html" target="_self">CarMapLocation</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1332"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1332</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Create a car marker with custom tooltip</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>car</td>
                                            <td>
                                                            <code><a href="../interfaces/CarMapLocation.html" target="_self" >CarMapLocation</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>literal type | null</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createCircleGeometry"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>createCircleGeometry</b></span>
                        <a href="#createCircleGeometry"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createCircleGeometry(lat: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, lng: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, radiusMeters: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1849"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1849</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Create circle geometry for search radius</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>lat</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>lng</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>radiusMeters</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>GeoJSON.Polygon</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createTooltipPopup"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>createTooltipPopup</b></span>
                        <a href="#createTooltipPopup"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createTooltipPopup(car: <a href="../interfaces/CarMapLocation.html" target="_self">CarMapLocation</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1385"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1385</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Create tooltip popup with Angular component (using EnhancedMapTooltipComponent)</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>car</td>
                                            <td>
                                                            <code><a href="../interfaces/CarMapLocation.html" target="_self" >CarMapLocation</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../miscellaneous/typealiases.html#MapboxPopup" target="_self" >MapboxPopup</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createUserLocationPopup"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>createUserLocationPopup</b></span>
                        <a href="#createUserLocationPopup"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createUserLocationPopup()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1575"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1575</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Create HTML content for user location popup</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deg2rad"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>deg2rad</b></span>
                        <a href="#deg2rad"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deg2rad(deg: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1637"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1637</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>deg</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="destinationPoint"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>destinationPoint</b></span>
                        <a href="#destinationPoint"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>destinationPoint(lat: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, lng: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, distanceMeters: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, bearingDegrees: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1868"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1868</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Calculate destination point given start point, distance and bearing</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>lat</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>lng</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>distanceMeters</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>bearingDegrees</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>literal type</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="detectDarkMode"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>detectDarkMode</b></span>
                        <a href="#detectDarkMode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>detectDarkMode()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="346"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:346</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="emitBounds"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>emitBounds</b></span>
                        <a href="#emitBounds"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>emitBounds()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="869"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:869</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Emit current map bounds</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="flyTo"></a>
                    <span class="name">
                        <span ><b>flyTo</b></span>
                        <a href="#flyTo"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>flyTo(location: literal type, zoom: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="279"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:279</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Fly to a specific location</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>location</td>
                                            <td>
                                                        <code>literal type</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>zoom</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>15</code>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="flyToCarLocation"></a>
                    <span class="name">
                        <span ><b>flyToCarLocation</b></span>
                        <a href="#flyToCarLocation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>flyToCarLocation(carId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2434"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2434</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Public method to fly to car location with smooth 3D animation</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>carId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="flyToLocation"></a>
                    <span class="name">
                        <span ><b>flyToLocation</b></span>
                        <a href="#flyToLocation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>flyToLocation(lat: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, lng: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, zoom: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2452"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2452</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Public method to fly to a specific location (lat/lng)</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>lat</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>lng</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>zoom</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>14</code>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="formatUpdateTime"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>formatUpdateTime</b></span>
                        <a href="#formatUpdateTime"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>formatUpdateTime(date: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank">Date</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1665"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1665</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Format update time for display</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>date</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAdaptiveClusterMaxZoom"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getAdaptiveClusterMaxZoom</b></span>
                        <a href="#getAdaptiveClusterMaxZoom"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAdaptiveClusterMaxZoom()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="769"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:769</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get adaptive cluster max zoom based on car count
Optimized for 10K+ cars following Mapbox benchmarks
Mapbox recommendation: clusterMaxZoom: 14 is optimal for most datasets
Note: We use fixed value of 14 as recommended, keeping this method for backward compatibility</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAdaptiveClusterRadius"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getAdaptiveClusterRadius</b></span>
                        <a href="#getAdaptiveClusterRadius"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAdaptiveClusterRadius()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="780"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:780</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get adaptive cluster radius based on car count
Mapbox recommendation: clusterRadius: 50 is optimal balance
Note: We use fixed value of 50 as recommended, keeping this method for backward compatibility</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAvailableCarsCount"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getAvailableCarsCount</b></span>
                        <a href="#getAvailableCarsCount"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAvailableCarsCount()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1688"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1688</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get count of available cars</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCssVariableValue"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getCssVariableValue</b></span>
                        <a href="#getCssVariableValue"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getCssVariableValue(variableName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, defaultValue: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="359"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:359</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Helper to get CSS variable value</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>variableName</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>defaultValue</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getInUseCarsCount"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getInUseCarsCount</b></span>
                        <a href="#getInUseCarsCount"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getInUseCarsCount()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1695"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1695</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get count of cars in use</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getLocationUpdateText"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getLocationUpdateText</b></span>
                        <a href="#getLocationUpdateText"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getLocationUpdateText()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1680"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1680</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get location update text for info layer</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getMarkerComponentFromPool"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getMarkerComponentFromPool</b></span>
                        <a href="#getMarkerComponentFromPool"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getMarkerComponentFromPool()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="951"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:951</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get a marker component from pool or create new one</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../components/MapMarkerComponent.html" target="_self" >ComponentRef&lt;MapMarkerComponent&gt;</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getNearbyCarsCount"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getNearbyCarsCount</b></span>
                        <a href="#getNearbyCarsCount"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getNearbyCarsCount()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1647"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1647</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get count of cars near user location</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getSoonAvailableCarsCount"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getSoonAvailableCarsCount</b></span>
                        <a href="#getSoonAvailableCarsCount"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getSoonAvailableCarsCount()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1702"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1702</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get count of soon available cars</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getTimeBasedLightPreset"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getTimeBasedLightPreset</b></span>
                        <a href="#getTimeBasedLightPreset"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getTimeBasedLightPreset()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="371"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:371</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get light preset based on current time of day
Returns: &#39;dawn&#39;, &#39;day&#39;, &#39;dusk&#39;, or &#39;night&#39;</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>&quot;dawn&quot; | &quot;day&quot; | &quot;dusk&quot; | &quot;night&quot;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getTooltipComponentFromPool"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getTooltipComponentFromPool</b></span>
                        <a href="#getTooltipComponentFromPool"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getTooltipComponentFromPool()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="994"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:994</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get a tooltip component from pool or create new one</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>ComponentRef&lt;EnhancedMapTooltipComponent&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getUnavailableCarsCount"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>getUnavailableCarsCount</b></span>
                        <a href="#getUnavailableCarsCount"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getUnavailableCarsCount()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1709"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1709</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get count of unavailable cars</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getVisibleCarsInViewport"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getVisibleCarsInViewport</b></span>
                        <a href="#getVisibleCarsInViewport"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getVisibleCarsInViewport()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1186"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1186</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Get cars visible in current viewport with buffer</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>CarMapLocation[]</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="groupCarsByAvailability"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>groupCarsByAvailability</b></span>
                        <a href="#groupCarsByAvailability"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>groupCarsByAvailability()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1277"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1277</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Group cars by availability (immediate vs scheduled)
Prioritizes cars available today with instant booking</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>CarMapLocation[]</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hideTooltipForCar"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>hideTooltipForCar</b></span>
                        <a href="#hideTooltipForCar"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>hideTooltipForCar(carId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1458"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1458</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Hide tooltip for a car</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>carId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="highlightSelectedCar"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>highlightSelectedCar</b></span>
                        <a href="#highlightSelectedCar"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>highlightSelectedCar(carId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2039"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2039</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Highlight selected car marker</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>carId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="initializeMap"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>initializeMap</b></span>
                        <a href="#initializeMap"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>initializeMap()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="443"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:443</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Initialize Mapbox map with neutral light style</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngAfterViewInit"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>ngAfterViewInit</b></span>
                        <a href="#ngAfterViewInit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>ngAfterViewInit()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="428"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:428</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnChanges"></a>
                    <span class="name">
                        <span ><b>ngOnChanges</b></span>
                        <a href="#ngOnChanges"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnChanges(changes: SimpleChanges)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2493"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2493</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Update markers when cars input changes</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>changes</td>
                                            <td>
                                                        <code>SimpleChanges</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnDestroy"></a>
                    <span class="name">
                        <span ><b>ngOnDestroy</b></span>
                        <a href="#ngOnDestroy"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnDestroy()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="436"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:436</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnInit"></a>
                    <span class="name">
                        <span ><b>ngOnInit</b></span>
                        <a href="#ngOnInit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnInit()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="330"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:330</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onBookingConfirmed"></a>
                    <span class="name">
                        <span ><b>onBookingConfirmed</b></span>
                        <a href="#onBookingConfirmed"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onBookingConfirmed(bookingData: <a href="../interfaces/BookingFormData.html" target="_self">BookingFormData</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2481"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2481</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handle booking confirmed</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>bookingData</td>
                                            <td>
                                                            <code><a href="../interfaces/BookingFormData.html" target="_self" >BookingFormData</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onBookingPanelClose"></a>
                    <span class="name">
                        <span ><b>onBookingPanelClose</b></span>
                        <a href="#onBookingPanelClose"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onBookingPanelClose()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2466"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2466</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handle booking panel close</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onDetailsPanelClose"></a>
                    <span class="name">
                        <span ><b>onDetailsPanelClose</b></span>
                        <a href="#onDetailsPanelClose"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onDetailsPanelClose()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2471"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2471</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onLayerToggle"></a>
                    <span class="name">
                        <span ><b>onLayerToggle</b></span>
                        <a href="#onLayerToggle"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onLayerToggle(event: literal type)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2581"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2581</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Maneja el toggle de capas del mapa</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>event</td>
                                            <td>
                                                        <code>literal type</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onSearchRadiusChange"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>onSearchRadiusChange</b></span>
                        <a href="#onSearchRadiusChange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>onSearchRadiusChange(event: Event)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2021"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2021</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Handle search radius slider change</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>event</td>
                                            <td>
                                                        <code>Event</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="preWarmComponentPoolDuringIdle"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>preWarmComponentPoolDuringIdle</b></span>
                        <a href="#preWarmComponentPoolDuringIdle"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>preWarmComponentPoolDuringIdle()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="892"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:892</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Pre-warm component pool during idle time using requestIdleCallback
Creates 50 components progressively to avoid blocking main thread</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removeDeliveryIsochrone"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>removeDeliveryIsochrone</b></span>
                        <a href="#removeDeliveryIsochrone"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>removeDeliveryIsochrone()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2218"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2218</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Remove delivery isochrone layer</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removeDirectionsRoute"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>removeDirectionsRoute</b></span>
                        <a href="#removeDirectionsRoute"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>removeDirectionsRoute()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2363"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2363</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Remove directions route layer</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removeHighlightFromCar"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>removeHighlightFromCar</b></span>
                        <a href="#removeHighlightFromCar"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>removeHighlightFromCar(carId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2065"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2065</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Remove highlight from car marker</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>carId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removeSearchRadiusLayer"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>removeSearchRadiusLayer</b></span>
                        <a href="#removeSearchRadiusLayer"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>removeSearchRadiusLayer()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2111"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2111</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Remove search radius layer</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="renderCarMarkers"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>renderCarMarkers</b></span>
                        <a href="#renderCarMarkers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>renderCarMarkers()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1245"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1245</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Render car markers with custom tooltips</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="renderVirtualizedMarkers"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>renderVirtualizedMarkers</b></span>
                        <a href="#renderVirtualizedMarkers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>renderVirtualizedMarkers()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1101"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1101</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Render only visible markers within viewport + buffer</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="returnMarkerComponentToPool"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>returnMarkerComponentToPool</b></span>
                        <a href="#returnMarkerComponentToPool"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>returnMarkerComponentToPool(componentRef: <a href="../components/MapMarkerComponent.html" target="_self">ComponentRef&lt;MapMarkerComponent&gt;</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="971"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:971</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Return marker component to pool for reuse</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>componentRef</td>
                                            <td>
                                                            <code><a href="../components/MapMarkerComponent.html" target="_self" >ComponentRef&lt;MapMarkerComponent&gt;</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="returnTooltipComponentToPool"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>returnTooltipComponentToPool</b></span>
                        <a href="#returnTooltipComponentToPool"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>returnTooltipComponentToPool(componentRef: ComponentRef<EnhancedMapTooltipComponent>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1014"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1014</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Return tooltip component to pool for reuse</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>componentRef</td>
                                            <td>
                                                        <code>ComponentRef&lt;EnhancedMapTooltipComponent&gt;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="scheduleDebouncedUpdate"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>scheduleDebouncedUpdate</b></span>
                        <a href="#scheduleDebouncedUpdate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>scheduleDebouncedUpdate(callback: () => void)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="811"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:811</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Schedule a debounced update using requestAnimationFrame</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>callback</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setupClustering"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>setupClustering</b></span>
                        <a href="#setupClustering"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setupClustering()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="570"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:570</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Setup clustering for car markers
Optimized for 10,000+ cars following Mapbox recommendations</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setupFollowLocation"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>setupFollowLocation</b></span>
                        <a href="#setupFollowLocation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setupFollowLocation()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1900"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1900</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Setup follow user location functionality</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setupLockControls"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>setupLockControls</b></span>
                        <a href="#setupLockControls"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setupLockControls()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1956"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1956</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Setup lock controls for zoom and rotation</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setupViewportChangeListener"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>setupViewportChangeListener</b></span>
                        <a href="#setupViewportChangeListener"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setupViewportChangeListener()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1067"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1067</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Setup listener for viewport changes to update virtualized markers</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showTooltipForCar"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>showTooltipForCar</b></span>
                        <a href="#showTooltipForCar"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>showTooltipForCar(marker: <a href="../undefineds/MapboxMarker.html" target="_self">MapboxMarker</a>, car: <a href="../interfaces/CarMapLocation.html" target="_self">CarMapLocation</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1438"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1438</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Show tooltip for a car on-demand</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>marker</td>
                                            <td>
                                                            <code><a href="../miscellaneous/typealiases.html#MapboxMarker" target="_self" >MapboxMarker</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>car</td>
                                            <td>
                                                            <code><a href="../interfaces/CarMapLocation.html" target="_self" >CarMapLocation</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="startFollowingLocation"></a>
                    <span class="name">
                        <span ><b>startFollowingLocation</b></span>
                        <a href="#startFollowingLocation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>startFollowingLocation()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1909"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1909</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Start following user location</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="stopFollowingLocation"></a>
                    <span class="name">
                        <span ><b>stopFollowingLocation</b></span>
                        <a href="#stopFollowingLocation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>stopFollowingLocation()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1944"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1944</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Stop following user location</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="toggleDeliveryZone"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>toggleDeliveryZone</b></span>
                        <a href="#toggleDeliveryZone"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>toggleDeliveryZone()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1997"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1997</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Toggle delivery zone (isochrone)</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="toggleDirections"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>toggleDirections</b></span>
                        <a href="#toggleDirections"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>toggleDirections()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2009"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:2009</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Toggle directions route</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="toggleFollowLocation"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>toggleFollowLocation</b></span>
                        <a href="#toggleFollowLocation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>toggleFollowLocation()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1986"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1986</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Toggle follow location</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="toggleLock"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>toggleLock</b></span>
                        <a href="#toggleLock"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>toggleLock()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1977"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1977</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Toggle lock state</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="triggerLocationPulse"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>triggerLocationPulse</b></span>
                        <a href="#triggerLocationPulse"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>triggerLocationPulse()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1733"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1733</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Trigger pulse animation on location update</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateMapTheme"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>updateMapTheme</b></span>
                        <a href="#updateMapTheme"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateMapTheme()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="384"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:384</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Update map theme based on time of day and marker variant
Uses Mapbox Standard style configuration for native theme support</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateMarkersBasedOnCount"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>updateMarkersBasedOnCount</b></span>
                        <a href="#updateMarkersBasedOnCount"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateMarkersBasedOnCount()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="789"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:789</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Update markers based on car count - clustering, virtualization, or normal render</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateMarkerStyles"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>updateMarkerStyles</b></span>
                        <a href="#updateMarkerStyles"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateMarkerStyles()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1766"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1766</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Update marker styles based on mode and theme</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateSpatialIndex"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>updateSpatialIndex</b></span>
                        <a href="#updateSpatialIndex"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateSpatialIndex()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="884"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:884</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Update spatial index when cars change</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateVirtualizedMarkers"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>updateVirtualizedMarkers</b></span>
                        <a href="#updateVirtualizedMarkers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateVirtualizedMarkers()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1133"
                                    class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:1133</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Update virtualized markers when viewport changes</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
    <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="applicationRef"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>applicationRef</b></span>
                        <a href="#applicationRef"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(ApplicationRef)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="231" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:231</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="bookingPanelOpen"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>bookingPanelOpen</b></span>
                        <a href="#bookingPanelOpen"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="237" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:237</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="carMarkers"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>carMarkers</b></span>
                        <a href="#carMarkers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Map&lt;
    string,
    { marker: MapboxMarker; componentRef: ComponentRef&lt;MapMarkerComponent&gt; }
  &gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="291" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:291</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="circleSizeMultiplier"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>circleSizeMultiplier</b></span>
                        <a href="#circleSizeMultiplier"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(1.0)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="328" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:328</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clusterCountLayerId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>clusterCountLayerId</b></span>
                        <a href="#clusterCountLayerId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;cars-cluster-count&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="302" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:302</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clusteringThreshold"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>clusteringThreshold</b></span>
                        <a href="#clusteringThreshold"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>50</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="304" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:304</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clusterLayerId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>clusterLayerId</b></span>
                        <a href="#clusterLayerId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;cars-cluster-layer&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="301" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:301</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clusterSourceId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>clusterSourceId</b></span>
                        <a href="#clusterSourceId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;cars-cluster-source&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="300" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:300</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="directionsService"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>directionsService</b></span>
                        <a href="#directionsService"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(MapboxDirectionsService)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="233" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:233</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="error"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>error</b></span>
                        <a href="#error"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;string | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="236" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:236</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="followLocationInterval"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>followLocationInterval</b></span>
                        <a href="#followLocationInterval"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>ReturnType&lt;unknown&gt; | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="326" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:326</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hoverTimeouts"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>hoverTimeouts</b></span>
                        <a href="#hoverTimeouts"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Map&lt;string, ReturnType&lt;typeof setTimeout&gt;&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="298" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:298</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="injector"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>injector</b></span>
                        <a href="#injector"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(EnvironmentInjector)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="232" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:232</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isBrowser"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>isBrowser</b></span>
                        <a href="#isBrowser"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>isPlatformBrowser(this.platformId)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="230" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:230</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isDarkMode"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>isDarkMode</b></span>
                        <a href="#isDarkMode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="327" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:327</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isochroneLayerId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>isochroneLayerId</b></span>
                        <a href="#isochroneLayerId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;delivery-isochrone-layer&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="321" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:321</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isochroneOutlineLayerId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>isochroneOutlineLayerId</b></span>
                        <a href="#isochroneOutlineLayerId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;delivery-isochrone-outline-layer&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="322" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:322</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isochroneSourceId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>isochroneSourceId</b></span>
                        <a href="#isochroneSourceId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;delivery-isochrone-source&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="320" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:320</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loading"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>loading</b></span>
                        <a href="#loading"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(true)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="235" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:235</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="map"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>map</b></span>
                        <a href="#map"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../miscellaneous/typealiases.html#MapboxMap" target="_self" >MapboxMap | null</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="290" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:290</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mapboxgl"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>mapboxgl</b></span>
                        <a href="#mapboxgl"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>MapboxGL | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="289" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:289</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mapContainer"></a>
                    <span class="name">
                            <span class="modifier"></span>
                        <span ><b>mapContainer</b></span>
                        <a href="#mapContainer"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>ElementRef&lt;HTMLDivElement&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <b>Decorators : </b>
                        <br />
                        <code>
                            @ViewChild(&#x27;mapContainer&#x27;)<br />
                        </code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="194" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:194</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mapLayers"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>mapLayers</b></span>
                        <a href="#mapLayers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>computed&lt;MapLayer[]&gt;(() &#x3D;&gt; [
    {
      id: &#x27;base-map&#x27;,
      label: &#x27;Mapa Base&#x27;,
      icon: &#x27;&#x27;,
      visible: this.showBaseMap(),
      enabled: true,
    },
    {
      id: &#x27;user-location&#x27;,
      label: &#x27;Ubicacin Central&#x27;,
      icon: &#x27;&#x27;,
      visible: this.showUserLocation(),
      enabled: !!this.userLocation,
    },
    {
      id: &#x27;marketplace-cars&#x27;,
      label: &#x27;Autos del Marketplace&#x27;,
      icon: &#x27;&#x27;,
      visible: this.showMarketplaceCars(),
      enabled: this.cars.length &gt; 0,
    },
  ])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="247" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:247</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="markerComponentPool"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>markerComponentPool</b></span>
                        <a href="#markerComponentPool"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../components/MapMarkerComponent.html" target="_self" >ComponentRef&lt;MapMarkerComponent&gt;[]</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="313" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:313</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="maxPoolSize"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>maxPoolSize</b></span>
                        <a href="#maxPoolSize"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>100</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="315" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:315</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="maxVisibleMarkers"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>maxVisibleMarkers</b></span>
                        <a href="#maxVisibleMarkers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>500</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="307" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:307</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pendingUpdate"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>pendingUpdate</b></span>
                        <a href="#pendingUpdate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>number | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="309" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:309</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="platformId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>platformId</b></span>
                        <a href="#platformId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>inject(PLATFORM_ID)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="229" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:229</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="routeLayerId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>routeLayerId</b></span>
                        <a href="#routeLayerId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;directions-route-layer&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="324" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:324</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="routeOutlineLayerId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>routeOutlineLayerId</b></span>
                        <a href="#routeOutlineLayerId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;directions-route-outline-layer&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="325" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:325</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="routeSourceId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>routeSourceId</b></span>
                        <a href="#routeSourceId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;directions-route-source&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="323" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:323</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="searchRadiusLayerId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>searchRadiusLayerId</b></span>
                        <a href="#searchRadiusLayerId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;search-radius-layer&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="319" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:319</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="searchRadiusSourceId"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>searchRadiusSourceId</b></span>
                        <a href="#searchRadiusSourceId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;search-radius-source&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="318" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:318</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectedCar"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>selectedCar</b></span>
                        <a href="#selectedCar"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;CarMapLocation | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="239" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:239</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectedCarForBooking"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>selectedCarForBooking</b></span>
                        <a href="#selectedCarForBooking"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;CarMapLocation | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="238" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:238</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showBaseMap"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>showBaseMap</b></span>
                        <a href="#showBaseMap"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(true)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="243" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:243</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showMarketplaceCars"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>showMarketplaceCars</b></span>
                        <a href="#showMarketplaceCars"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(true)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="245" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:245</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showUserLocation"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>showUserLocation</b></span>
                        <a href="#showUserLocation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal(true)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="244" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:244</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="spatialIndex"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>spatialIndex</b></span>
                        <a href="#spatialIndex"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>QuadTree | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="310" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:310</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="tooltipComponentPool"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>tooltipComponentPool</b></span>
                        <a href="#tooltipComponentPool"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>ComponentRef&lt;EnhancedMapTooltipComponent&gt;[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="314" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:314</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="tooltipComponents"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>tooltipComponents</b></span>
                        <a href="#tooltipComponents"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Map&lt;string, ComponentRef&lt;EnhancedMapTooltipComponent&gt;&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="297" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:297</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="tooltipPopups"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>tooltipPopups</b></span>
                        <a href="#tooltipPopups"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Map&lt;string, MapboxPopup&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="296" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:296</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="useClustering"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>useClustering</b></span>
                        <a href="#useClustering"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>true</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="299" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:299</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="userLocationMarker"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>userLocationMarker</b></span>
                        <a href="#userLocationMarker"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../miscellaneous/typealiases.html#MapboxMarker" target="_self" >MapboxMarker | null</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="295" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:295</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="viewMode"></a>
                    <span class="name">
                            <span class="modifier">Readonly</span>
                        <span ><b>viewMode</b></span>
                        <a href="#viewMode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>signal&lt;&#x27;map&#x27; | &#x27;list&#x27;&gt;(&#x27;map&#x27;)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="240" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:240</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="viewportBuffer"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>viewportBuffer</b></span>
                        <a href="#viewportBuffer"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>0.1</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="306" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:306</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="virtualizationThreshold"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>virtualizationThreshold</b></span>
                        <a href="#virtualizationThreshold"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>1000</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="305" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:305</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="visibleCarIds"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>visibleCarIds</b></span>
                        <a href="#visibleCarIds"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>unknown</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Set&lt;string&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="308" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:308</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    <section data-compodoc="block-accessors">
    <h3 id="accessors">
        Accessors
    </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="mapInstance"></a>
                        <span class="name"><b>mapInstance</b><a href="#mapInstance"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>mapInstance()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="272" class="link-to-prism">src/app/shared/components/cars-map/cars-map.component.ts:272</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
</section>
</div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { CommonModule, isPlatformBrowser } from &#x27;@angular/common&#x27;;
import {
  AfterViewInit,
  ApplicationRef,
  Component,
  ComponentRef,
  computed,
  createComponent,
  ElementRef,
  EnvironmentInjector,
  EventEmitter,
  inject,
  Input,
  OnChanges,
  OnDestroy,
  OnInit,
  Output,
  PLATFORM_ID,
  signal,
  SimpleChanges,
  ViewChild,
  ViewEncapsulation,
} from &#x27;@angular/core&#x27;;
import { environment } from &#x27;../../../../environments/environment&#x27;;
import type { CarMapLocation } from &#x27;../../../core/services/car-locations.service&#x27;;
import { MapboxDirectionsService } from &#x27;../../../core/services/mapbox-directions.service&#x27;;
import { EnhancedMapTooltipComponent } from &#x27;../enhanced-map-tooltip/enhanced-map-tooltip.component&#x27;;
import type { BookingFormData } from &#x27;../map-booking-panel/map-booking-panel.component&#x27;;
import { MapBookingPanelComponent } from &#x27;../map-booking-panel/map-booking-panel.component&#x27;;
import { MapDetailsPanelComponent } from &#x27;../map-details-panel/map-details-panel.component&#x27;;
import {
  MapLayersControlComponent,
  type MapLayer,
} from &#x27;../map-layers-control/map-layers-control.component&#x27;;
import { MapMarkerComponent } from &#x27;../map-marker/map-marker.component&#x27;;

type MapboxGL &#x3D; typeof import(&#x27;mapbox-gl&#x27;).default;
type MapboxMap &#x3D; import(&#x27;mapbox-gl&#x27;).Map;
type MapboxMarker &#x3D; import(&#x27;mapbox-gl&#x27;).Marker;
type MapboxPopup &#x3D; import(&#x27;mapbox-gl&#x27;).Popup;
type MapboxGeoJSONSource &#x3D; import(&#x27;mapbox-gl&#x27;).GeoJSONSource;
type MapLayerMouseEvent &#x3D; import(&#x27;mapbox-gl&#x27;).MapLayerMouseEvent;
type MapboxErrorEvent &#x3D; import(&#x27;mapbox-gl&#x27;).ErrorEvent;
type MapboxGeoJSONFeature &#x3D; import(&#x27;mapbox-gl&#x27;).MapboxGeoJSONFeature;

type MapboxErrorDetails &#x3D; MapboxErrorEvent &amp; {
  status?: number;
  error?: (Error &amp; { status?: number }) | undefined;
};

/**
 * MAPBOX 10K+ CARS OPTIMIZATION
 * &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
 * This component is optimized to handle 10,000+ cars efficiently following Mapbox recommendations.
 *
 * Key optimizations implemented:
 * - Clustering: clusterMaxZoom&#x3D;14, clusterRadius&#x3D;50 (Mapbox recommended)
 * - GeoJSON: maxzoom&#x3D;12, buffer&#x3D;0, tolerance&#x3D;0.375 (optimal for points)
 * - Coordinate precision: 6 decimals (~11cm accuracy) for smaller payload
 * - Feature-state: generateId&#x3D;true for efficient hover/selection updates
 * - Performance: Supercluster handles 400K points at these settings
 *
 * Expected performance with 10K cars:
 * - Initial load: &lt; 2s
 * - Cluster render: &lt; 100ms
 * - 60fps panning/zooming
 * - Memory usage: &lt; 150MB
 *
 * See: docs/guides/performance/MAPBOX_10K_CARS_OPTIMIZATION.md
 */

/**
 * Simple QuadTree implementation for spatial indexing
 */
class QuadTree {
  private bounds: { x: number; y: number; width: number; height: number };
  private capacity: number;
  private points: CarMapLocation[] &#x3D; [];
  private divided &#x3D; false;
  private northeast?: QuadTree;
  private northwest?: QuadTree;
  private southeast?: QuadTree;
  private southwest?: QuadTree;

  constructor(bounds: { x: number; y: number; width: number; height: number }, capacity &#x3D; 4) {
    this.bounds &#x3D; bounds;
    this.capacity &#x3D; capacity;
  }

  insert(point: CarMapLocation): boolean {
    if (!this.contains(point)) {
      return false;
    }

    if (this.points.length &lt; this.capacity) {
      this.points.push(point);
      return true;
    }

    if (!this.divided) {
      this.subdivide();
    }

    return (
      this.northeast!.insert(point) ||
      this.northwest!.insert(point) ||
      this.southeast!.insert(point) ||
      this.southwest!.insert(point)
    );
  }

  query(range: { x: number; y: number; width: number; height: number }): CarMapLocation[] {
    const found: CarMapLocation[] &#x3D; [];

    if (!this.intersects(range)) {
      return found;
    }

    for (const point of this.points) {
      if (this.pointInRange(point, range)) {
        found.push(point);
      }
    }

    if (this.divided) {
      found.push(...this.northeast!.query(range));
      found.push(...this.northwest!.query(range));
      found.push(...this.southeast!.query(range));
      found.push(...this.southwest!.query(range));
    }

    return found;
  }

  private contains(point: CarMapLocation): boolean {
    return (
      point.lng &gt;&#x3D; this.bounds.x &amp;&amp;
      point.lng &lt;&#x3D; this.bounds.x + this.bounds.width &amp;&amp;
      point.lat &gt;&#x3D; this.bounds.y &amp;&amp;
      point.lat &lt;&#x3D; this.bounds.y + this.bounds.height
    );
  }

  private intersects(range: { x: number; y: number; width: number; height: number }): boolean {
    return !(
      range.x &gt; this.bounds.x + this.bounds.width ||
      range.x + range.width &lt; this.bounds.x ||
      range.y &gt; this.bounds.y + this.bounds.height ||
      range.y + range.height &lt; this.bounds.y
    );
  }

  private pointInRange(
    point: CarMapLocation,
    range: { x: number; y: number; width: number; height: number },
  ): boolean {
    return (
      point.lng &gt;&#x3D; range.x &amp;&amp;
      point.lng &lt;&#x3D; range.x + range.width &amp;&amp;
      point.lat &gt;&#x3D; range.y &amp;&amp;
      point.lat &lt;&#x3D; range.y + range.height
    );
  }

  private subdivide(): void {
    const x &#x3D; this.bounds.x;
    const y &#x3D; this.bounds.y;
    const w &#x3D; this.bounds.width / 2;
    const h &#x3D; this.bounds.height / 2;

    this.northeast &#x3D; new QuadTree({ x: x + w, y: y, width: w, height: h }, this.capacity);
    this.northwest &#x3D; new QuadTree({ x, y, width: w, height: h }, this.capacity);
    this.southeast &#x3D; new QuadTree({ x: x + w, y: y + h, width: w, height: h }, this.capacity);
    this.southwest &#x3D; new QuadTree({ x, y: y + h, width: w, height: h }, this.capacity);

    this.divided &#x3D; true;
  }
}

@Component({
  selector: &#x27;app-cars-map&#x27;,
  standalone: true,
  imports: [
    CommonModule,
    MapBookingPanelComponent,
    MapDetailsPanelComponent,
    MapLayersControlComponent,
  ],
  templateUrl: &#x27;./cars-map.component.html&#x27;,
  styleUrls: [&#x27;./cars-map.component.css&#x27;],
  encapsulation: ViewEncapsulation.None,
})
export class CarsMapComponent implements OnInit, AfterViewInit, OnDestroy, OnChanges {
  @ViewChild(&#x27;mapContainer&#x27;) mapContainer!: ElementRef&lt;HTMLDivElement&gt;;

  @Input() cars: CarMapLocation[] &#x3D; [];
  @Input() selectedCarId: string | null &#x3D; null;
  @Input() userLocation: { lat: number; lng: number } | null &#x3D; null;
  @Input() userAvatarUrl: string | null &#x3D; null; // URL del avatar del usuario para el marcador de ubicacin
  @Input() locationMode: &#x27;searching&#x27; | &#x27;booking-confirmed&#x27; | &#x27;default&#x27; &#x3D; &#x27;default&#x27;;
  @Input() searchRadiusKm: number &#x3D; 5;
  @Input() showSearchRadius: boolean &#x3D; true;
  @Input() showDeliveryIsochrone: boolean &#x3D; false; // Show isochrone for selected car delivery area
  @Input() deliveryTimeMinutes: number &#x3D; 30; // Default delivery time for isochrone
  @Input() showDirectionsRoute: boolean &#x3D; false; // Show turn-by-turn route to selected car
  @Input() followUserLocation: boolean &#x3D; false;
  @Input() lockZoomRotation: boolean &#x3D; false;
  @Input() locationAccuracy?: number; // Precisin GPS en metros
  @Input() lastLocationUpdate?: Date; // ltima actualizacin de ubicacin
  @Input() markerVariant: &#x27;photo&#x27; | &#x27;price&#x27; &#x3D; &#x27;photo&#x27;; // Change default to &#x27;photo&#x27;

  @Output() readonly carSelected &#x3D; new EventEmitter&lt;string&gt;();
  @Output() readonly userLocationChange &#x3D; new EventEmitter&lt;{ lat: number; lng: number }&gt;();
  @Output() readonly quickBook &#x3D; new EventEmitter&lt;string&gt;();
  @Output() readonly searchRadiusChange &#x3D; new EventEmitter&lt;number&gt;();
  @Output() readonly followLocationToggle &#x3D; new EventEmitter&lt;boolean&gt;();
  @Output() readonly lockToggle &#x3D; new EventEmitter&lt;boolean&gt;();
  @Output() readonly bookingConfirmed &#x3D; new EventEmitter&lt;{
    carId: string;
    bookingData: BookingFormData;
  }&gt;();
  @Output() readonly boundsChange &#x3D; new EventEmitter&lt;{
    north: number;
    south: number;
    east: number;
    west: number;
  }&gt;();

  private readonly platformId &#x3D; inject(PLATFORM_ID);
  private readonly isBrowser &#x3D; isPlatformBrowser(this.platformId);
  private readonly applicationRef &#x3D; inject(ApplicationRef);
  private readonly injector &#x3D; inject(EnvironmentInjector);
  private readonly directionsService &#x3D; inject(MapboxDirectionsService);

  readonly loading &#x3D; signal(true);
  readonly error &#x3D; signal&lt;string | null&gt;(null);
  readonly bookingPanelOpen &#x3D; signal(false);
  readonly selectedCarForBooking &#x3D; signal&lt;CarMapLocation | null&gt;(null);
  readonly selectedCar &#x3D; signal&lt;CarMapLocation | null&gt;(null);
  readonly viewMode &#x3D; signal&lt;&#x27;map&#x27; | &#x27;list&#x27;&gt;(&#x27;map&#x27;);

  // Map Layers Control
  readonly showBaseMap &#x3D; signal(true);
  readonly showUserLocation &#x3D; signal(true);
  readonly showMarketplaceCars &#x3D; signal(true);

  readonly mapLayers &#x3D; computed&lt;MapLayer[]&gt;(() &#x3D;&gt; [
    {
      id: &#x27;base-map&#x27;,
      label: &#x27;Mapa Base&#x27;,
      icon: &#x27;&#x27;,
      visible: this.showBaseMap(),
      enabled: true,
    },
    {
      id: &#x27;user-location&#x27;,
      label: &#x27;Ubicacin Central&#x27;,
      icon: &#x27;&#x27;,
      visible: this.showUserLocation(),
      enabled: !!this.userLocation,
    },
    {
      id: &#x27;marketplace-cars&#x27;,
      label: &#x27;Autos del Marketplace&#x27;,
      icon: &#x27;&#x27;,
      visible: this.showMarketplaceCars(),
      enabled: this.cars.length &gt; 0,
    },
  ]);

  // Expose map instance for external components
  get mapInstance(): MapboxMap | null {
    return this.map;
  }

  /**
   * Fly to a specific location
   */
  flyTo(location: { lat: number; lng: number }, zoom &#x3D; 15): void {
    if (this.map) {
      this.map.flyTo({
        center: [location.lng, location.lat],
        zoom,
        essential: true,
      });
    }
  }

  private mapboxgl: MapboxGL | null &#x3D; null;
  private map: MapboxMap | null &#x3D; null;
  private carMarkers &#x3D; new Map&lt;
    string,
    { marker: MapboxMarker; componentRef: ComponentRef&lt;MapMarkerComponent&gt; }
  &gt;();
  private userLocationMarker: MapboxMarker | null &#x3D; null;
  private tooltipPopups &#x3D; new Map&lt;string, MapboxPopup&gt;();
  private tooltipComponents &#x3D; new Map&lt;string, ComponentRef&lt;EnhancedMapTooltipComponent&gt;&gt;();
  private hoverTimeouts &#x3D; new Map&lt;string, ReturnType&lt;typeof setTimeout&gt;&gt;();
  public useClustering &#x3D; true; // Enable clustering by default - public for template access
  private clusterSourceId &#x3D; &#x27;cars-cluster-source&#x27;;
  private clusterLayerId &#x3D; &#x27;cars-cluster-layer&#x27;;
  private clusterCountLayerId &#x3D; &#x27;cars-cluster-count&#x27;;
  // Mapbox optimization: Clustering is efficient for 10K+ cars (Supercluster handles 400K)
  public clusteringThreshold &#x3D; 50; // Activate clustering at 50+ cars - public for template access
  private virtualizationThreshold &#x3D; 1000; // Only virtualize if NOT clustering (10K+ without clustering)
  private viewportBuffer &#x3D; 0.1; // 10% buffer around viewport for smoother experience
  private maxVisibleMarkers &#x3D; 500; // Increased for better 10K+ experience when not clustering
  private visibleCarIds &#x3D; new Set&lt;string&gt;(); // Track currently visible cars
  private pendingUpdate: number | null &#x3D; null; // For debounced updates
  private spatialIndex: QuadTree | null &#x3D; null; // Spatial index for efficient queries

  // Component pools for memory management
  private markerComponentPool: ComponentRef&lt;MapMarkerComponent&gt;[] &#x3D; [];
  private tooltipComponentPool: ComponentRef&lt;EnhancedMapTooltipComponent&gt;[] &#x3D; [];
  private maxPoolSize &#x3D; 100; // Maximum components to keep in pool

  // User location tracking
  private searchRadiusSourceId &#x3D; &#x27;search-radius-source&#x27;;
  private searchRadiusLayerId &#x3D; &#x27;search-radius-layer&#x27;;
  private isochroneSourceId &#x3D; &#x27;delivery-isochrone-source&#x27;;
  private isochroneLayerId &#x3D; &#x27;delivery-isochrone-layer&#x27;;
  private isochroneOutlineLayerId &#x3D; &#x27;delivery-isochrone-outline-layer&#x27;;
  private routeSourceId &#x3D; &#x27;directions-route-source&#x27;;
  private routeLayerId &#x3D; &#x27;directions-route-layer&#x27;;
  private routeOutlineLayerId &#x3D; &#x27;directions-route-outline-layer&#x27;;
  private followLocationInterval: ReturnType&lt;typeof setInterval&gt; | null &#x3D; null;
  private isDarkMode &#x3D; signal(false);
  private circleSizeMultiplier &#x3D; signal(1.0); // Para ajustar tamao del crculo

  ngOnInit(): void {
    if (!this.isBrowser) {
      this.loading.set(false);
      return;
    }

    // Detectar modo oscuro
    this.detectDarkMode();

    // Escuchar cambios de tema
    if (this.isBrowser) {
      const mediaQuery &#x3D; window.matchMedia(&#x27;(prefers-color-scheme: dark)&#x27;);
      mediaQuery.addEventListener(&#x27;change&#x27;, () &#x3D;&gt; this.detectDarkMode());
    }
  }

  private detectDarkMode(): void {
    if (!this.isBrowser) return;
    const isDark &#x3D;
      window.matchMedia(&#x27;(prefers-color-scheme: dark)&#x27;).matches ||
      document.documentElement.classList.contains(&#x27;dark&#x27;);
    this.isDarkMode.set(isDark);
    this.updateMarkerStyles();
    this.updateMapTheme();
  }

  /**
   * Helper to get CSS variable value
   */
  private getCssVariableValue(variableName: string, defaultValue: string): string {
    if (!this.isBrowser) return defaultValue;
    return (
      getComputedStyle(document.documentElement).getPropertyValue(variableName).trim() ||
      defaultValue
    );
  }

  /**
   * Get light preset based on current time of day
   * Returns: &#x27;dawn&#x27;, &#x27;day&#x27;, &#x27;dusk&#x27;, or &#x27;night&#x27;
   */
  private getTimeBasedLightPreset(): &#x27;dawn&#x27; | &#x27;day&#x27; | &#x27;dusk&#x27; | &#x27;night&#x27; {
    const hour &#x3D; new Date().getHours();

    if (hour &gt;&#x3D; 6 &amp;&amp; hour &lt; 11) return &#x27;dawn&#x27;; // 6am - 11am: Amanecer
    if (hour &gt;&#x3D; 11 &amp;&amp; hour &lt; 18) return &#x27;day&#x27;; // 11am - 6pm: Da
    if (hour &gt;&#x3D; 18 &amp;&amp; hour &lt; 21) return &#x27;dusk&#x27;; // 6pm - 9pm: Atardecer
    return &#x27;night&#x27;; // 9pm - 6am: Noche
  }

  /**
   * Update map theme based on time of day and marker variant
   * Uses Mapbox Standard style configuration for native theme support
   */
  private updateMapTheme(): void {
    if (!this.isBrowser) return;

    const lightPreset &#x3D; this.getTimeBasedLightPreset();
    const variant &#x3D; this.markerVariant;

    // Update Mapbox Standard style theme
    if (this.map &amp;&amp; this.map.isStyleLoaded()) {
      try {
        this.map.setConfigProperty(&#x27;basemap&#x27;, &#x27;lightPreset&#x27;, lightPreset);

        // No need for canvas filters with Standard style - it handles theming natively
      } catch (error) {
        console.warn(&#x27;[CarsMap] Could not update theme, falling back to canvas filter&#x27;, error);
        // Fallback for older Mapbox versions or non-Standard styles
        const canvas &#x3D; this.map.getCanvas();
        if (canvas) {
          const isDark &#x3D; lightPreset &#x3D;&#x3D;&#x3D; &#x27;night&#x27; || lightPreset &#x3D;&#x3D;&#x3D; &#x27;dusk&#x27;;
          const brightness &#x3D; isDark ? &#x27;0.95&#x27; : &#x27;1&#x27;;
          const contrast &#x3D; isDark ? &#x27;1.1&#x27; : &#x27;1&#x27;;
          const saturate &#x3D; isDark ? &#x27;0.95&#x27; : &#x27;1&#x27;;
          canvas.style.filter &#x3D; &#x60;brightness(${brightness}) contrast(${contrast}) saturate(${saturate})&#x60;;
        }
      }
    }

    // Ensure container has correct classes (template binding handles this, but we verify)
    const container &#x3D; this.mapContainer?.nativeElement?.parentElement;
    if (container) {
      // Remove old variant classes
      container.classList.remove(&#x27;map-variant-photo&#x27;, &#x27;map-variant-price&#x27;);
      // Add current variant class
      container.classList.add(&#x60;map-variant-${variant}&#x60;);

      // Apply dark mode class for night/dusk themes
      const isDark &#x3D; lightPreset &#x3D;&#x3D;&#x3D; &#x27;night&#x27; || lightPreset &#x3D;&#x3D;&#x3D; &#x27;dusk&#x27;;
      if (isDark) {
        container.classList.add(&#x27;dark&#x27;);
      } else {
        container.classList.remove(&#x27;dark&#x27;);
      }
    }
  }

  async ngAfterViewInit(): Promise&lt;void&gt; {
    if (!this.isBrowser || !this.mapContainer) {
      return;
    }

    await this.initializeMap();
  }

  ngOnDestroy(): void {
    this.cleanup();
  }

  /**
   * Initialize Mapbox map with neutral light style
   */
  private async initializeMap(): Promise&lt;void&gt; {
    try {
      this.loading.set(true);

      // Lazy load Mapbox GL
      const mapboxModule &#x3D; await import(&#x27;mapbox-gl&#x27;);
      this.mapboxgl &#x3D; mapboxModule.default;

      if (!this.mapboxgl) {
        throw new Error(&#x27;Mapbox GL library failed to load&#x27;);
      }

      // Validate Mapbox access token
      if (!environment.mapboxAccessToken || environment.mapboxAccessToken.trim() &#x3D;&#x3D;&#x3D; &#x27;&#x27;) {
        throw new Error(
          &#x27;Mapbox access token no configurado. Por favor, configura NG_APP_MAPBOX_ACCESS_TOKEN en .env.local&#x27;,
        );
      }

      // Validate token format (should start with &#x27;pk.&#x27;)
      if (!environment.mapboxAccessToken.startsWith(&#x27;pk.&#x27;)) {
        throw new Error(
          &#x27;Token de Mapbox invlido. El token debe comenzar con &quot;pk.&quot; y ser un Public Access Token vlido.&#x27;,
        );
      }

      this.mapboxgl.accessToken &#x3D; environment.mapboxAccessToken;

      // Get initial light preset based on current time
      const initialLightPreset &#x3D; this.getTimeBasedLightPreset();

      // Initialize map with Mapbox Standard style (v12+ with theme support)
      this.map &#x3D; new this.mapboxgl.Map({
        container: this.mapContainer.nativeElement,
        style: &#x27;mapbox://styles/mapbox/standard&#x27;, // Modern Standard style with theme support
        center: [-58.3816, -34.6037], // Buenos Aires center
        zoom: 15.5, // Higher zoom to show 3D buildings immediately
        maxBounds: [
          [-58.8, -34.9], // Southwest
          [-57.9, -34.3], // Northeast
        ],
        // Mapbox Standard configuration - OPTIMIZED for car marketplace
        config: {
          basemap: {
            lightPreset: initialLightPreset, // Auto-detect based on time: &#x27;day&#x27;, &#x27;dusk&#x27;, &#x27;dawn&#x27;, &#x27;night&#x27;
            showPointOfInterestLabels: false, // Hide restaurants, hotels, shops (performance + cleaner)
            showTransitLabels: false, // Hide transit for cleaner car-focused map
            showPlaceLabels: true, // Keep neighborhood/area names
            showRoadLabels: true, // Keep street names (essential for car location)
            show3dObjects: true, // Enable 3D buildings for immersive marketplace view
          },
        },
        // 3D View Configuration - User controlled
        pitch: 60, // Deep 3D perspective view (60 angle for immersive effect)
        bearing: 0, // North-up orientation (user can rotate)
        antialias: true, // Enable antialiasing for smooth 3D buildings
        // Enable 3D interactions - full user control
        dragRotate: true, // Enable rotation drag
        pitchWithRotate: true, // Enable pitch on rotate
        touchPitch: true, // Enable touch pitch gestures
      });

      // Add navigation controls (zoom + compass for full 3D control)
      this.map.addControl(new this.mapboxgl.NavigationControl(), &#x27;top-right&#x27;);

      // Wait for map to load
      this.map.on(&#x27;load&#x27;, () &#x3D;&gt; {
        this.loading.set(false);
        this.updateMapTheme(); // Apply theme on load
        this.updateMarkersBasedOnCount();
        this.setupViewportChangeListener();
        this.addUserLocationMarker();
        if (this.showSearchRadius) {
          this.addSearchRadiusLayer();
        }
        this.setupFollowLocation();
        this.setupLockControls();

        // Emit initial bounds
        this.emitBounds();

        // Listen for move end to emit bounds
        this.map.on(&#x27;moveend&#x27;, () &#x3D;&gt; {
          this.emitBounds();
        });

        // Pre-warm component pool during idle time for better performance
        this.preWarmComponentPoolDuringIdle();
      });

      // Handle map errors
      this.map.on(&#x27;error&#x27;, (event: MapboxErrorDetails) &#x3D;&gt; {
        console.error(&#x27;[CarsMap] Map error:&#x27;, event);

        const errorStatus &#x3D;
          (event.error &amp;&amp; &#x27;status&#x27; in event.error ? event.error.status : undefined) ?? event.status;
        const errorMessage &#x3D;
          (event.error &amp;&amp; event.error.message) || (&#x27;message&#x27; in event ? event.message : &#x27;&#x27;);

        if (
          errorStatus &#x3D;&#x3D;&#x3D; 401 ||
          (typeof errorMessage &#x3D;&#x3D;&#x3D; &#x27;string&#x27; &amp;&amp; errorMessage.includes(&#x27;401&#x27;))
        ) {
          this.error.set(
            &#x27;Token de Mapbox invlido o expirado. Por favor, verifica tu NG_APP_MAPBOX_ACCESS_TOKEN en .env.local&#x27;,
          );
        } else if (event.error?.message) {
          this.error.set(&#x60;Error al cargar el mapa: ${event.error.message}&#x60;);
        } else {
          this.error.set(
            &#x27;Error al cargar el mapa. Por favor, verifica tu conexin e intenta nuevamente.&#x27;,
          );
        }

        this.loading.set(false);
      });
    } catch (err) {
      console.error(&#x27;[CarsMap] Initialization error:&#x27;, err);
      this.error.set(err instanceof Error ? err.message : &#x27;Error al inicializar el mapa&#x27;);
      this.loading.set(false);
    }
  }

  /**
   * Setup clustering for car markers
   * Optimized for 10,000+ cars following Mapbox recommendations
   */
  private setupClustering(): void {
    if (!this.map || !this.mapboxgl) return;

    // Remove existing markers
    this.clearMarkers();

    // Create GeoJSON source from cars with optimized coordinate precision
    const features &#x3D; this.cars.map((car) &#x3D;&gt; ({
      type: &#x27;Feature&#x27; as const,
      geometry: {
        type: &#x27;Point&#x27; as const,
        // Limit to 6 decimal places (~11cm accuracy) for smaller payload
        coordinates: [parseFloat(car.lng.toFixed(6)), parseFloat(car.lat.toFixed(6))],
      },
      properties: {
        carId: car.carId,
        title: car.title,
        pricePerDay: car.pricePerDay,
        currency: car.currency || &#x27;ARS&#x27;,
        photoUrl: car.photoUrl,
        availabilityStatus: car.availabilityStatus || &#x27;available&#x27;,
      },
    }));

    // Add source with Mapbox-recommended optimizations
    const existingClusterSource &#x3D; this.map.getSource(this.clusterSourceId) as
      | MapboxGeoJSONSource
      | undefined;

    if (existingClusterSource) {
      existingClusterSource.setData({
        type: &#x27;FeatureCollection&#x27;,
        features,
      });
    } else {
      this.map.addSource(this.clusterSourceId, {
        type: &#x27;geojson&#x27;,
        data: {
          type: &#x27;FeatureCollection&#x27;,
          features,
        },
        cluster: true,
        // Mapbox recommendation for 10K+ points
        clusterMaxZoom: 14, // Don&#x27;t cluster beyond zoom 14
        clusterRadius: 50, // 50px radius for optimal clustering
        clusterProperties: {
          sum: [&#x27;+&#x27;, [&#x27;get&#x27;, &#x27;pricePerDay&#x27;]],
          count: [&#x27;+&#x27;, 1],
        },
        // GeoJSON optimization for points (Mapbox recommendation)
        maxzoom: 12, // Limit tile generation to zoom 12 for points
        buffer: 0, // No buffer needed for simple points
        tolerance: 0.375, // Balance precision vs performance
        generateId: true, // Enable efficient feature-state updates
      });
    }

    // Resolve colors from CSS variables
    const colorAvailable &#x3D; this.getCssVariableValue(&#x27;--map-marker-available-color&#x27;, &#x27;#9db38b&#x27;); // Olive
    const colorSoon &#x3D; this.getCssVariableValue(&#x27;--map-marker-soon-available-color&#x27;, &#x27;#c4a882&#x27;); // Beige
    const colorInUse &#x3D; this.getCssVariableValue(&#x27;--map-marker-in-use-color&#x27;, &#x27;#4e4e4e&#x27;); // Gray
    const colorUnavailable &#x3D; this.getCssVariableValue(&#x27;--map-marker-unavailable-color&#x27;, &#x27;#b25e5e&#x27;); // Rust

    // Add cluster circles layer
    if (!this.map.getLayer(this.clusterLayerId)) {
      this.map.addLayer({
        id: this.clusterLayerId,
        type: &#x27;circle&#x27;,
        source: this.clusterSourceId,
        filter: [&#x27;has&#x27;, &#x27;point_count&#x27;],
        paint: {
          &#x27;circle-color&#x27;: [
            &#x27;step&#x27;,
            [&#x27;get&#x27;, &#x27;point_count&#x27;],
            colorAvailable, // Green for available
            5,
            colorSoon, // Amber for medium clusters
            20,
            colorInUse, // Neutral/Blue for large clusters
          ],
          &#x27;circle-radius&#x27;: [&#x27;step&#x27;, [&#x27;get&#x27;, &#x27;point_count&#x27;], 20, 5, 30, 20, 40, 50, 50],
          &#x27;circle-stroke-width&#x27;: 2,
          &#x27;circle-stroke-color&#x27;: &#x27;var(--surface-primary, #ffffff)&#x27;,
          &#x27;circle-opacity&#x27;: 0.8,
        },
      });
    }

    // Add cluster count labels
    if (!this.map.getLayer(this.clusterCountLayerId)) {
      this.map.addLayer({
        id: this.clusterCountLayerId,
        type: &#x27;symbol&#x27;,
        source: this.clusterSourceId,
        filter: [&#x27;has&#x27;, &#x27;point_count&#x27;],
        layout: {
          &#x27;text-field&#x27;: &#x27;{point_count_abbreviated}&#x27;,
          &#x27;text-font&#x27;: [&#x27;Open Sans Semibold&#x27;, &#x27;Arial Unicode MS Bold&#x27;],
          &#x27;text-size&#x27;: 12,
        },
        paint: {
          &#x27;text-color&#x27;: &#x27;var(--surface-primary, #ffffff)&#x27;,
        },
      });
    }

    // Add unclustered points (individual cars)
    if (!this.map.getLayer(&#x27;cars-unclustered&#x27;)) {
      this.map.addLayer({
        id: &#x27;cars-unclustered&#x27;,
        type: &#x27;circle&#x27;,
        source: this.clusterSourceId,
        filter: [&#x27;!&#x27;, [&#x27;has&#x27;, &#x27;point_count&#x27;]],
        paint: {
          &#x27;circle-color&#x27;: [
            &#x27;case&#x27;,
            [&#x27;&#x3D;&#x3D;&#x27;, [&#x27;get&#x27;, &#x27;availabilityStatus&#x27;], &#x27;available&#x27;],
            colorAvailable,
            [&#x27;&#x3D;&#x3D;&#x27;, [&#x27;get&#x27;, &#x27;availabilityStatus&#x27;], &#x27;soon_available&#x27;],
            colorSoon,
            [&#x27;&#x3D;&#x3D;&#x27;, [&#x27;get&#x27;, &#x27;availabilityStatus&#x27;], &#x27;in_use&#x27;],
            colorInUse,
            colorUnavailable, // unavailable
          ],
          &#x27;circle-radius&#x27;: 8,
          &#x27;circle-stroke-width&#x27;: 2,
          &#x27;circle-stroke-color&#x27;: &#x27;var(--surface-primary, #ffffff)&#x27;,
          &#x27;circle-opacity&#x27;: [&#x27;case&#x27;, [&#x27;&#x3D;&#x3D;&#x27;, [&#x27;get&#x27;, &#x27;availabilityStatus&#x27;], &#x27;unavailable&#x27;], 0.5, 1],
        },
      });
    }

    // Handle cluster clicks
    this.map.on(&#x27;click&#x27;, this.clusterLayerId, (event: MapLayerMouseEvent) &#x3D;&gt; {
      if (!this.map) return;

      const features &#x3D; this.map.queryRenderedFeatures(event.point, {
        layers: [this.clusterLayerId],
      }) as MapboxGeoJSONFeature[];

      if (!features.length) {
        return;
      }

      const properties &#x3D; (features[0].properties || {}) as Record&lt;string, unknown&gt;;
      const clusterId &#x3D;
        typeof properties.cluster_id &#x3D;&#x3D;&#x3D; &#x27;number&#x27; ? (properties.cluster_id as number) : undefined;

      if (clusterId &#x3D;&#x3D;&#x3D; undefined) {
        return;
      }

      const source &#x3D; this.map.getSource(this.clusterSourceId) as MapboxGeoJSONSource | undefined;
      if (!source) {
        return;
      }

      source.getClusterExpansionZoom(clusterId, (err, zoom) &#x3D;&gt; {
        if (err || zoom &#x3D;&#x3D;&#x3D; null || zoom &#x3D;&#x3D;&#x3D; undefined) return;
        this.map?.easeTo({
          center: event.lngLat,
          zoom,
        });
      });
    });

    // Handle individual car clicks
    this.map.on(&#x27;click&#x27;, &#x27;cars-unclustered&#x27;, (event: MapLayerMouseEvent) &#x3D;&gt; {
      const carFeature &#x3D; event.features?.[0] as MapboxGeoJSONFeature | undefined;
      const properties &#x3D; (carFeature?.properties || {}) as Record&lt;string, unknown&gt;;
      const carId &#x3D; typeof properties.carId &#x3D;&#x3D;&#x3D; &#x27;string&#x27; ? (properties.carId as string) : undefined;
      if (carId) {
        this.carSelected.emit(carId);
        const car &#x3D; this.cars.find((c) &#x3D;&gt; c.carId &#x3D;&#x3D;&#x3D; carId);
        if (car) {
          this.selectedCar.set(car);
        }
      }
    });

    // Change cursor on hover
    this.map.on(&#x27;mouseenter&#x27;, this.clusterLayerId, () &#x3D;&gt; {
      if (this.map) {
        this.map.getCanvas().style.cursor &#x3D; &#x27;pointer&#x27;;
      }
    });
    this.map.on(&#x27;mouseleave&#x27;, this.clusterLayerId, () &#x3D;&gt; {
      if (this.map) {
        this.map.getCanvas().style.cursor &#x3D; &#x27;&#x27;;
      }
    });
  }

  /**
   * Get adaptive cluster max zoom based on car count
   * Optimized for 10K+ cars following Mapbox benchmarks
   * Mapbox recommendation: clusterMaxZoom: 14 is optimal for most datasets
   * Note: We use fixed value of 14 as recommended, keeping this method for backward compatibility
   */
  private getAdaptiveClusterMaxZoom(): number {
    // Mapbox recommendation: Always use 14 for points datasets
    // Supercluster can handle 400K points efficiently at this setting
    return 14;
  }

  /**
   * Get adaptive cluster radius based on car count
   * Mapbox recommendation: clusterRadius: 50 is optimal balance
   * Note: We use fixed value of 50 as recommended, keeping this method for backward compatibility
   */
  private getAdaptiveClusterRadius(): number {
    // Mapbox recommendation: 50px radius provides optimal clustering
    // This works well from 100 to 400,000 points
    return 50;
  }

  /**
   * Update markers based on car count - clustering, virtualization, or normal render
   */
  private updateMarkersBasedOnCount(): void {
    if (!this.map) return;

    const carCount &#x3D; this.cars.length;

    // Ensure spatial index is built for large datasets
    if (carCount &gt;&#x3D; this.virtualizationThreshold &amp;&amp; !this.spatialIndex) {
      this.buildSpatialIndex();
    }

    if (this.useClustering &amp;&amp; carCount &gt; this.clusteringThreshold) {
      this.setupClustering();
    } else if (carCount &gt; this.virtualizationThreshold) {
      this.renderVirtualizedMarkers();
    } else {
      this.renderCarMarkers();
    }
  }

  /**
   * Schedule a debounced update using requestAnimationFrame
   */
  private scheduleDebouncedUpdate(callback: () &#x3D;&gt; void): void {
    if (this.pendingUpdate) {
      cancelAnimationFrame(this.pendingUpdate);
    }

    this.pendingUpdate &#x3D; requestAnimationFrame(() &#x3D;&gt; {
      callback();
      this.pendingUpdate &#x3D; null;
    });
  }

  /**
   * Build spatial index for efficient queries
   */
  private buildSpatialIndex(): void {
    if (this.cars.length &lt; this.virtualizationThreshold) {
      this.spatialIndex &#x3D; null;
      return;
    }

    // Calculate bounds for the QuadTree (covering all cars with padding)
    let minLng &#x3D; Infinity,
      maxLng &#x3D; -Infinity;
    let minLat &#x3D; Infinity,
      maxLat &#x3D; -Infinity;

    for (const car of this.cars) {
      minLng &#x3D; Math.min(minLng, car.lng);
      maxLng &#x3D; Math.max(maxLng, car.lng);
      minLat &#x3D; Math.min(minLat, car.lat);
      maxLat &#x3D; Math.max(maxLat, car.lat);
    }

    // Add padding
    const padding &#x3D; 0.01; // ~1km padding
    minLng -&#x3D; padding;
    maxLng +&#x3D; padding;
    minLat -&#x3D; padding;
    maxLat +&#x3D; padding;

    this.spatialIndex &#x3D; new QuadTree(
      {
        x: minLng,
        y: minLat,
        width: maxLng - minLng,
        height: maxLat - minLat,
      },
      8,
    );

    for (const car of this.cars) {
      this.spatialIndex.insert(car);
    }
  }

  /**
   * Emit current map bounds
   */
  private emitBounds(): void {
    if (!this.map) return;

    const bounds &#x3D; this.map.getBounds();
    this.boundsChange.emit({
      north: bounds.getNorth(),
      south: bounds.getSouth(),
      east: bounds.getEast(),
      west: bounds.getWest(),
    });
  }

  /**
   * Update spatial index when cars change
   */
  private updateSpatialIndex(): void {
    this.buildSpatialIndex();
  }

  /**
   * Pre-warm component pool during idle time using requestIdleCallback
   * Creates 50 components progressively to avoid blocking main thread
   */
  private preWarmComponentPoolDuringIdle(): void {
    // Only pre-warm if pool is small
    if (this.markerComponentPool.length &gt; 50) {
      return;
    }

    const targetPoolSize &#x3D; 100;
    const componentsPerBatch &#x3D; 5; // Create 5 at a time

    const createBatch &#x3D; () &#x3D;&gt; {
      if (this.markerComponentPool.length &gt;&#x3D; targetPoolSize) {
        return; // Done warming
      }

      // Create a batch during idle time
      for (
        let i &#x3D; 0;
        i &lt; componentsPerBatch &amp;&amp; this.markerComponentPool.length &lt; targetPoolSize;
        i++
      ) {
        const newComponentRef &#x3D; createComponent(MapMarkerComponent, {
          environmentInjector: this.injector,
        });

        this.applicationRef.attachView(newComponentRef.hostView);

        // Hide the element
        const element &#x3D; newComponentRef.location.nativeElement as HTMLElement;
        if (element) {
          element.style.display &#x3D; &#x27;none&#x27;;
        }

        this.markerComponentPool.push(newComponentRef);
      }

      // Schedule next batch if needed
      if (this.markerComponentPool.length &lt; targetPoolSize) {
        if (&#x27;requestIdleCallback&#x27; in window) {
          // Modern browsers with requestIdleCallback
          requestIdleCallback(() &#x3D;&gt; createBatch(), { timeout: 2000 });
        } else {
          // Fallback for older browsers
          setTimeout(() &#x3D;&gt; createBatch(), 100);
        }
      }
    };

    // Start warming with requestIdleCallback if available
    if (&#x27;requestIdleCallback&#x27; in window) {
      requestIdleCallback(() &#x3D;&gt; createBatch(), { timeout: 1000 });
    } else {
      // Fallback for older browsers
      setTimeout(() &#x3D;&gt; createBatch(), 500);
    }
  }

  /**
   * Get a marker component from pool or create new one
   */
  private getMarkerComponentFromPool(): ComponentRef&lt;MapMarkerComponent&gt; {
    const componentRef &#x3D; this.markerComponentPool.pop();
    if (componentRef) {
      return componentRef;
    }

    // Create new component if pool is empty
    const newComponentRef &#x3D; createComponent(MapMarkerComponent, {
      environmentInjector: this.injector,
    });

    // Attach to application
    this.applicationRef.attachView(newComponentRef.hostView);

    return newComponentRef;
  }

  /**
   * Return marker component to pool for reuse
   */
  private returnMarkerComponentToPool(componentRef: ComponentRef&lt;MapMarkerComponent&gt;): void {
    if (this.markerComponentPool.length &lt; this.maxPoolSize) {
      // Reset component state before pooling
      componentRef.setInput(&#x27;car&#x27;, null);
      componentRef.setInput(&#x27;isSelected&#x27;, false);

      // Hide the element
      const element &#x3D; componentRef.location.nativeElement as HTMLElement;
      if (element) {
        element.style.display &#x3D; &#x27;none&#x27;;
      }

      this.markerComponentPool.push(componentRef);
    } else {
      // Pool is full, destroy component
      this.applicationRef.detachView(componentRef.hostView);
      componentRef.destroy();
    }
  }

  /**
   * Get a tooltip component from pool or create new one
   */
  private getTooltipComponentFromPool(): ComponentRef&lt;EnhancedMapTooltipComponent&gt; {
    const componentRef &#x3D; this.tooltipComponentPool.pop();
    if (componentRef) {
      return componentRef;
    }

    // Create new component if pool is empty
    const newComponentRef &#x3D; createComponent(EnhancedMapTooltipComponent, {
      environmentInjector: this.injector,
    });

    // Attach to application
    this.applicationRef.attachView(newComponentRef.hostView);

    return newComponentRef;
  }

  /**
   * Return tooltip component to pool for reuse
   */
  private returnTooltipComponentToPool(
    componentRef: ComponentRef&lt;EnhancedMapTooltipComponent&gt;,
  ): void {
    if (this.tooltipComponentPool.length &lt; this.maxPoolSize) {
      // Reset component state before pooling
      componentRef.setInput(&#x27;car&#x27;, null);
      componentRef.setInput(&#x27;selected&#x27;, false);
      componentRef.setInput(&#x27;userLocation&#x27;, undefined);

      // Clear event subscriptions
      if (componentRef.instance.viewDetails) {
        componentRef.instance.viewDetails.unsubscribe();
      }
      if (componentRef.instance.quickBook) {
        componentRef.instance.quickBook.unsubscribe();
      }

      // Hide the element
      const element &#x3D; componentRef.location.nativeElement as HTMLElement;
      if (element) {
        element.style.display &#x3D; &#x27;none&#x27;;
      }

      this.tooltipComponentPool.push(componentRef);
    } else {
      // Pool is full, destroy component
      this.applicationRef.detachView(componentRef.hostView);
      componentRef.destroy();
    }
  }

  /**
   * Clear component pools (called during cleanup)
   */
  private clearComponentPools(): void {
    // Destroy all pooled marker components
    this.markerComponentPool.forEach((componentRef) &#x3D;&gt; {
      this.applicationRef.detachView(componentRef.hostView);
      componentRef.destroy();
    });
    this.markerComponentPool &#x3D; [];

    // Destroy all pooled tooltip components
    this.tooltipComponentPool.forEach((componentRef) &#x3D;&gt; {
      this.applicationRef.detachView(componentRef.hostView);
      componentRef.destroy();
    });
    this.tooltipComponentPool &#x3D; [];
  }

  /**
   * Setup listener for viewport changes to update virtualized markers
   */
  private setupViewportChangeListener(): void {
    if (!this.map) return;

    // Use requestAnimationFrame with cooldown to prevent excessive updates
    let animationFrameId: number;
    let lastUpdateTime &#x3D; 0;
    const cooldownMs &#x3D; 300; // Wait at least 300ms between updates
    const throttledUpdate &#x3D; () &#x3D;&gt; {
      const now &#x3D; Date.now();
      if (now - lastUpdateTime &lt; cooldownMs) {
        // Skip if within cooldown period
        return;
      }

      if (animationFrameId) {
        cancelAnimationFrame(animationFrameId);
      }

      animationFrameId &#x3D; requestAnimationFrame(() &#x3D;&gt; {
        if (this.cars.length &gt; this.virtualizationThreshold &amp;&amp; !this.useClustering) {
          lastUpdateTime &#x3D; Date.now();
          this.updateVirtualizedMarkers();
        }
        animationFrameId &#x3D; 0;
      });
    };

    this.map.on(&#x27;moveend&#x27;, throttledUpdate);
    this.map.on(&#x27;zoomend&#x27;, throttledUpdate);
  }

  /**
   * Render only visible markers within viewport + buffer
   */
  private renderVirtualizedMarkers(): void {
    if (!this.map) return;

    // Clear existing markers
    this.clearMarkers();

    // Get visible cars in current viewport
    const visibleCars &#x3D; this.getVisibleCarsInViewport();

    // Limit to max visible markers
    const carsToRender &#x3D; visibleCars.slice(0, this.maxVisibleMarkers);

    // Update visible car IDs
    this.visibleCarIds &#x3D; new Set(carsToRender.map((car) &#x3D;&gt; car.carId));

    // Render markers for visible cars
    carsToRender.forEach((car) &#x3D;&gt; {
      const markerData &#x3D; this.createCarMarker(car);
      if (markerData) {
        this.carMarkers.set(car.carId, markerData);
      }
    });

    // Highlight selected car if it&#x27;s visible
    if (this.selectedCarId &amp;&amp; this.visibleCarIds.has(this.selectedCarId)) {
      this.highlightSelectedCar(this.selectedCarId);
    }
  }

  /**
   * Update virtualized markers when viewport changes
   */
  private updateVirtualizedMarkers(): void {
    if (!this.map) return;

    const newVisibleCars &#x3D; this.getVisibleCarsInViewport();
    const newVisibleCarIds &#x3D; new Set(newVisibleCars.map((car) &#x3D;&gt; car.carId));

    // Find cars that are no longer visible (need to be removed)
    const carsToRemove &#x3D; Array.from(this.visibleCarIds).filter((id) &#x3D;&gt; !newVisibleCarIds.has(id));

    // Find cars that are newly visible (need to be added)
    const carsToAdd &#x3D; newVisibleCars.filter((car) &#x3D;&gt; !this.visibleCarIds.has(car.carId));

    // Remove markers for cars that are no longer visible
    carsToRemove.forEach((carId) &#x3D;&gt; {
      const markerData &#x3D; this.carMarkers.get(carId);
      if (markerData) {
        markerData.marker.remove();
        this.returnMarkerComponentToPool(markerData.componentRef);
        this.carMarkers.delete(carId);
      }
    });

    // Add markers for newly visible cars (limited by maxVisibleMarkers)
    const currentVisibleCount &#x3D; this.carMarkers.size;
    const availableSlots &#x3D; Math.max(0, this.maxVisibleMarkers - currentVisibleCount);
    const carsToAddLimited &#x3D; carsToAdd.slice(0, availableSlots);

    carsToAddLimited.forEach((car) &#x3D;&gt; {
      const markerData &#x3D; this.createCarMarker(car);
      if (markerData) {
        this.carMarkers.set(car.carId, markerData);
      }
    });

    // Update visible car IDs
    this.visibleCarIds &#x3D; new Set([
      ...Array.from(this.visibleCarIds).filter((id) &#x3D;&gt; !carsToRemove.includes(id)),
      ...carsToAddLimited.map((car) &#x3D;&gt; car.carId),
    ]);

    // Update selected car highlight if needed
    if (this.selectedCarId) {
      if (this.visibleCarIds.has(this.selectedCarId)) {
        this.highlightSelectedCar(this.selectedCarId);
      } else {
        this.removeHighlightFromCar(this.selectedCarId);
      }
    }
  }

  /**
   * Get cars visible in current viewport with buffer
   */
  private getVisibleCarsInViewport(): CarMapLocation[] {
    if (!this.map) return [];

    const bounds &#x3D; this.map.getBounds();
    if (!bounds) return [];

    const zoom &#x3D; this.map.getZoom();

    // Expand bounds with buffer for smoother experience
    const latDiff &#x3D; (bounds.getNorth() - bounds.getSouth()) * this.viewportBuffer;
    const lngDiff &#x3D; (bounds.getEast() - bounds.getWest()) * this.viewportBuffer;

    const expandedBounds &#x3D; {
      north: bounds.getNorth() + latDiff,
      south: bounds.getSouth() - latDiff,
      east: bounds.getEast() + lngDiff,
      west: bounds.getWest() - lngDiff,
    };

    let visibleCars: CarMapLocation[];

    // Use spatial index for large datasets, fallback to linear search
    if (this.spatialIndex &amp;&amp; this.cars.length &gt;&#x3D; this.virtualizationThreshold) {
      const queryBounds &#x3D; {
        x: expandedBounds.west,
        y: expandedBounds.south,
        width: expandedBounds.east - expandedBounds.west,
        height: expandedBounds.north - expandedBounds.south,
      };

      visibleCars &#x3D; this.spatialIndex.query(queryBounds);
    } else {
      // Fallback to linear search for smaller datasets
      visibleCars &#x3D; this.cars.filter((car) &#x3D;&gt; {
        return (
          car.lat &gt;&#x3D; expandedBounds.south &amp;&amp;
          car.lat &lt;&#x3D; expandedBounds.north &amp;&amp;
          car.lng &gt;&#x3D; expandedBounds.west &amp;&amp;
          car.lng &lt;&#x3D; expandedBounds.east
        );
      });
    }

    // Sort by priority (distance from center for higher zoom levels)
    if (zoom &gt; 12) {
      const center &#x3D; this.map.getCenter();
      visibleCars.sort((a, b) &#x3D;&gt; {
        const distA &#x3D; this.calculateDistance(center.lat, center.lng, a.lat, a.lng);
        const distB &#x3D; this.calculateDistance(center.lat, center.lng, b.lat, b.lng);
        return distA - distB;
      });
    }

    return visibleCars;
  }

  /**
   * Render car markers with custom tooltips
   */
  private renderCarMarkers(): void {
    if (!this.map || !this.mapboxgl) return;

    // Clear existing markers
    this.clearMarkers();

    // Si la capa de autos est oculta, no renderizar
    if (!this.showMarketplaceCars()) {
      return;
    }

    // Group cars by availability and price for visual organization
    const groupedCars &#x3D; this.groupCarsByAvailability();

    // Create markers for each car
    groupedCars.forEach((car) &#x3D;&gt; {
      const markerData &#x3D; this.createCarMarker(car);
      if (markerData) {
        this.carMarkers.set(car.carId, markerData);
      }
    });

    // Highlight selected car
    if (this.selectedCarId) {
      this.highlightSelectedCar(this.selectedCarId);
    }
  }

  /**
   * Group cars by availability (immediate vs scheduled)
   * Prioritizes cars available today with instant booking
   */
  private groupCarsByAvailability(): CarMapLocation[] {
    const cars &#x3D; [...this.cars];

    // Group cars by priority:
    // 1. Available today + instant booking (highest priority)
    // 2. Available today (no instant booking)
    // 3. Available tomorrow + instant booking
    // 4. Available tomorrow
    // 5. Soon available (within 7 days)
    // 6. Unavailable or unknown status

    const groups &#x3D; {
      immediateInstant: [] as CarMapLocation[],
      immediate: [] as CarMapLocation[],
      tomorrowInstant: [] as CarMapLocation[],
      tomorrow: [] as CarMapLocation[],
      soonAvailable: [] as CarMapLocation[],
      unavailable: [] as CarMapLocation[],
    };

    cars.forEach((car) &#x3D;&gt; {
      const status &#x3D; car.availabilityStatus || &#x27;unavailable&#x27;;
      const isInstant &#x3D; car.instantBooking &#x3D;&#x3D;&#x3D; true;
      const availableToday &#x3D; car.availableToday &#x3D;&#x3D;&#x3D; true;
      const availableTomorrow &#x3D; car.availableTomorrow &#x3D;&#x3D;&#x3D; true;

      if (status &#x3D;&#x3D;&#x3D; &#x27;available&#x27; &amp;&amp; availableToday &amp;&amp; isInstant) {
        groups.immediateInstant.push(car);
      } else if (status &#x3D;&#x3D;&#x3D; &#x27;available&#x27; &amp;&amp; availableToday) {
        groups.immediate.push(car);
      } else if (status &#x3D;&#x3D;&#x3D; &#x27;available&#x27; &amp;&amp; availableTomorrow &amp;&amp; isInstant) {
        groups.tomorrowInstant.push(car);
      } else if (status &#x3D;&#x3D;&#x3D; &#x27;available&#x27; &amp;&amp; availableTomorrow) {
        groups.tomorrow.push(car);
      } else if (status &#x3D;&#x3D;&#x3D; &#x27;soon_available&#x27;) {
        groups.soonAvailable.push(car);
      } else {
        groups.unavailable.push(car);
      }
    });

    // Return prioritized list
    return [
      ...groups.immediateInstant,
      ...groups.immediate,
      ...groups.tomorrowInstant,
      ...groups.tomorrow,
      ...groups.soonAvailable,
      ...groups.unavailable,
    ];
  }

  /**
   * Create a car marker with custom tooltip
   */
  private createCarMarker(
    car: CarMapLocation,
  ): { marker: MapboxMarker; componentRef: ComponentRef&lt;MapMarkerComponent&gt; } | null {
    if (!this.map || !this.mapboxgl) return null;

    // Get component from pool or create new one
    const componentRef &#x3D; this.getMarkerComponentFromPool();

    // Set inputs
    componentRef.setInput(&#x27;car&#x27;, car);
    componentRef.setInput(&#x27;isSelected&#x27;, this.selectedCarId &#x3D;&#x3D;&#x3D; car.carId);

    // Show the element (it might have been hidden in pool)
    const markerElement &#x3D; componentRef.location.nativeElement as HTMLElement;
    markerElement.style.display &#x3D; &#x27;block&#x27;;

    // Create marker
    const marker &#x3D; new this.mapboxgl.Marker({
      element: markerElement,
      anchor: &#x27;center&#x27;,
    })
      .setLngLat([car.lng, car.lat])
      .addTo(this.map);

    // Handle hover with delay (150ms) - create tooltip on-demand
    markerElement.addEventListener(&#x27;mouseenter&#x27;, () &#x3D;&gt; {
      const timeout &#x3D; setTimeout(() &#x3D;&gt; {
        this.showTooltipForCar(marker, car);
      }, 150);
      this.hoverTimeouts.set(car.carId, timeout);
    });

    markerElement.addEventListener(&#x27;mouseleave&#x27;, () &#x3D;&gt; {
      const timeout &#x3D; this.hoverTimeouts.get(car.carId);
      if (timeout) {
        clearTimeout(timeout);
        this.hoverTimeouts.delete(car.carId);
      }
      this.hideTooltipForCar(car.carId);
    });

    // Handle click
    markerElement.addEventListener(&#x27;click&#x27;, () &#x3D;&gt; {
      this.carSelected.emit(car.carId);
      this.selectedCar.set(car);
    });

    return { marker, componentRef };
  }

  /**
   * Create tooltip popup with Angular component (using EnhancedMapTooltipComponent)
   */
  private createTooltipPopup(car: CarMapLocation): MapboxPopup {
    if (!this.mapboxgl) {
      throw new Error(&#x27;Mapbox GL not initialized&#x27;);
    }

    // Create container wrapper for the popup
    const container &#x3D; document.createElement(&#x27;div&#x27;);
    container.className &#x3D; &#x27;map-tooltip-container&#x27;;

    // Get component from pool or create new one
    const componentRef &#x3D; this.getTooltipComponentFromPool();

    // Set inputs
    componentRef.setInput(&#x27;car&#x27;, car);
    componentRef.setInput(&#x27;selected&#x27;, this.selectedCarId &#x3D;&#x3D;&#x3D; car.carId);
    componentRef.setInput(&#x27;userLocation&#x27;, this.userLocation || undefined);

    // Subscribe to output events
    componentRef.instance.viewDetails.subscribe((carId: string) &#x3D;&gt; {
      this.carSelected.emit(carId);
    });

    componentRef.instance.quickBook.subscribe((carId: string) &#x3D;&gt; {
      this.quickBook.emit(carId);
    });

    // Show the element (it might have been hidden in pool)
    const element &#x3D; componentRef.location.nativeElement as HTMLElement;
    element.style.display &#x3D; &#x27;block&#x27;;

    // Append the component&#x27;s native element to the container
    container.appendChild(element);

    // Store component reference
    this.tooltipComponents.set(car.carId, componentRef);

    // Create popup with larger maxWidth for enhanced tooltip
    const popup &#x3D; new this.mapboxgl.Popup({
      offset: 25,
      closeButton: false,
      closeOnClick: false,
      maxWidth: &#x27;320px&#x27;,
    }).setDOMContent(container);

    // Store popup reference
    this.tooltipPopups.set(car.carId, popup);

    return popup;
  }

  /**
   * Show tooltip for a car on-demand
   */
  private showTooltipForCar(marker: MapboxMarker, car: CarMapLocation): void {
    // Check if tooltip already exists
    let popup &#x3D; this.tooltipPopups.get(car.carId);

    if (!popup) {
      // Create tooltip on-demand
      popup &#x3D; this.createTooltipPopup(car);
      this.tooltipPopups.set(car.carId, popup);
      marker.setPopup(popup);
    }

    // Show the popup if not already open
    if (!popup.isOpen()) {
      marker.togglePopup();
    }
  }

  /**
   * Hide tooltip for a car
   */
  private hideTooltipForCar(carId: string): void {
    const popup &#x3D; this.tooltipPopups.get(carId);
    if (popup &amp;&amp; popup.isOpen()) {
      // Find the marker and toggle popup
      const markerData &#x3D; this.carMarkers.get(carId);
      if (markerData &amp;&amp; markerData.marker.getPopup() &#x3D;&#x3D;&#x3D; popup) {
        markerData.marker.togglePopup();
      }
    }

    // Return tooltip component to pool after a delay to allow animations
    const componentRef &#x3D; this.tooltipComponents.get(carId);
    if (componentRef) {
      setTimeout(() &#x3D;&gt; {
        this.returnTooltipComponentToPool(componentRef);
        this.tooltipComponents.delete(carId);
        this.tooltipPopups.delete(carId);
      }, 300); // Allow time for fade out animation
    }
  }

  /**
   * Add user location marker with custom styling and animations
   */
  private addUserLocationMarker(): void {
    if (!this.map || !this.mapboxgl || !this.userLocation) return;

    // Si la capa de ubicacin est oculta, remover el marcador si existe
    if (!this.showUserLocation()) {
      if (this.userLocationMarker) {
        this.userLocationMarker.remove();
        this.userLocationMarker &#x3D; null;
      }
      return;
    }

    // Save previous location before removing marker
    let previousLocation: { lat: number; lng: number } | null &#x3D; null;
    if (this.userLocationMarker) {
      const prevLngLat &#x3D; this.userLocationMarker.getLngLat();
      previousLocation &#x3D; { lat: prevLngLat.lat, lng: prevLngLat.lng };
      this.userLocationMarker.remove();
    }

    // Create custom marker element with contextual classes
    const el &#x3D; document.createElement(&#x27;div&#x27;);
    el.className &#x3D; &#x60;user-location-marker user-location-marker--${this.locationMode}&#x60;;
    if (this.isDarkMode()) {
      el.classList.add(&#x27;user-location-marker--dark&#x27;);
    }

    const circleSize &#x3D; 20 * this.circleSizeMultiplier();
    el.style.setProperty(&#x27;--circle-size&#x27;, &#x60;${circleSize}px&#x60;);

    //  P0-005 FIX: Use safe DOM methods instead of innerHTML
    const haloDiv &#x3D; document.createElement(&#x27;div&#x27;);
    haloDiv.className &#x3D; &#x27;user-marker-halo&#x27;;

    const imgElement &#x3D; document.createElement(&#x27;img&#x27;);
    imgElement.src &#x3D; this.userAvatarUrl || &#x27;assets/images/default-avatar.svg&#x27;;
    imgElement.className &#x3D; &#x27;user-marker-avatar&#x27;;
    imgElement.alt &#x3D; &#x27;Tu ubicacin&#x27;;
    imgElement.addEventListener(&#x27;error&#x27;, function handleImageError(this: HTMLImageElement) {
      this.src &#x3D; &#x27;assets/images/default-avatar.svg&#x27;;
    });

    el.appendChild(haloDiv);
    el.appendChild(imgElement);

    // Create marker
    this.userLocationMarker &#x3D; new this.mapboxgl.Marker({
      element: el,
      anchor: &#x27;center&#x27;,
    })
      .setLngLat([this.userLocation.lng, this.userLocation.lat])
      .addTo(this.map);

    // Animate marker movement if location changed
    if (previousLocation) {
      const distance &#x3D; this.calculateDistance(
        previousLocation.lat,
        previousLocation.lng,
        this.userLocation.lat,
        this.userLocation.lng,
      );

      if (distance &gt; 10) {
        // Solo animar si se movi ms de 10 metros
        this.animateMarkerUpdate();
      } else {
        // Trigger pulse even for small movements
        this.triggerLocationPulse();
      }
    }

    // Create enhanced popup with contextual information
    const popupHTML &#x3D; this.createUserLocationPopup();
    const popup &#x3D; new this.mapboxgl.Popup({
      offset: 25,
      closeButton: true,
      closeOnClick: false,
    }).setHTML(popupHTML);

    this.userLocationMarker.setPopup(popup);

    // Show popup initially with pulse animation (only if it&#x27;s the first time)
    if (!previousLocation) {
      setTimeout(() &#x3D;&gt; {
        this.userLocationMarker?.togglePopup();
        this.triggerLocationPulse();
      }, 1000);
    }
  }

  /**
   * Create HTML content for user location popup
   */
  private createUserLocationPopup(): string {
    const modeText &#x3D; this.viewMode() &#x3D;&#x3D;&#x3D; &#x27;map&#x27; ? &#x27;Tu ubicacin actual&#x27; : &#x27;Ests aqu&#x27;;
    const accuracyText &#x3D; this.locationAccuracy
      ? &#x60;Precisin: ${Math.round(this.locationAccuracy)}m&#x60;
      : &#x27;Precisin: Desconocida&#x27;;

    const updateTime &#x3D; this.lastLocationUpdate
      ? this.formatUpdateTime(this.lastLocationUpdate)
      : &#x27;Actualizado ahora&#x27;;

    // Calculate nearby cars
    const nearbyCars &#x3D; this.getNearbyCarsCount();
    const carsText &#x3D;
      nearbyCars &gt; 0 ? &#x60; Hay &lt;b&gt;${nearbyCars}&lt;/b&gt; autos cerca&#x60; : &#x27;No hay autos cerca&#x27;;

    const popupHTML &#x3D; &#x60;
      &lt;div class&#x3D;&quot;user-location-popup&quot; style&#x3D;&quot;font-family: &#x27;Inter&#x27;, sans-serif; padding: 4px;&quot;&gt;
        &lt;div style&#x3D;&quot;display: flex; align-items: center; gap: 8px; margin-bottom: 4px;&quot;&gt;
          &lt;div style&#x3D;&quot;width: 8px; height: 8px; background-color: var(--success-default, #10b981); border-radius: 50%; box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);&quot;&gt;&lt;/div&gt;
          &lt;p class&#x3D;&quot;font-semibold text-slate-800 dark:text-white&quot; style&#x3D;&quot;margin: 0; font-size: 14px;&quot;&gt;${modeText}&lt;/p&gt;
        &lt;/div&gt;

        &lt;div style&#x3D;&quot;display: flex; flex-direction: column; gap: 2px; margin-bottom: 8px; padding-left: 16px;&quot;&gt;
          &lt;p class&#x3D;&quot;text-xs text-slate-500 dark:text-slate-400&quot; style&#x3D;&quot;margin: 0;&quot;&gt;${accuracyText}&lt;/p&gt;
          &lt;p class&#x3D;&quot;text-xs text-slate-400 dark:text-slate-500&quot; style&#x3D;&quot;margin: 0;&quot;&gt;${updateTime}&lt;/p&gt;
          &lt;p class&#x3D;&quot;text-xs text-cyan-600 dark:text-cyan-400 font-medium&quot; style&#x3D;&quot;margin: 4px 0 0 0;&quot;&gt;${carsText}&lt;/p&gt;
        &lt;/div&gt;

        &lt;div class&#x3D;&quot;user-location-popup-actions&quot; style&#x3D;&quot;display: flex; gap: 8px; margin-top: 8px;&quot;&gt;
          &lt;button class&#x3D;&quot;user-location-cta&quot; data-action&#x3D;&quot;search-nearby&quot;
            style&#x3D;&quot;flex: 1; background: var(--cta-default, #06b6d4); color: white; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 500; cursor: pointer; transition: all 0.2s;&quot;&gt;
            Buscar aqu
          &lt;/button&gt;
          &lt;button class&#x3D;&quot;user-location-cta&quot; data-action&#x3D;&quot;view-routes&quot;
            style&#x3D;&quot;flex: 1; background: var(--cta-alpha-10, rgba(6, 182, 212, 0.1)); color: var(--cta-default, #06b6d4); border: 1px solid var(--cta-alpha-20, rgba(6, 182, 212, 0.2)); padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 500; cursor: pointer; transition: all 0.2s;&quot;&gt;
            Ver rutas
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &#x60;;

    return popupHTML;
  }

  /**
   * Calculate distance between two points in km
   */
  private calculateDistanceKm(lat1: number, lon1: number, lat2: number, lon2: number): number {
    const R &#x3D; 6371; // Radius of the earth in km
    const dLat &#x3D; this.deg2rad(lat2 - lat1);
    const dLon &#x3D; this.deg2rad(lon2 - lon1);
    const a &#x3D;
      Math.sin(dLat / 2) * Math.sin(dLat / 2) +
      Math.cos(this.deg2rad(lat1)) *
        Math.cos(this.deg2rad(lat2)) *
        Math.sin(dLon / 2) *
        Math.sin(dLon / 2);
    const c &#x3D; 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    const d &#x3D; R * c; // Distance in km
    return d;
  }

  private deg2rad(deg: number): number {
    return deg * (Math.PI / 180);
  }

  /**
   * Get count of cars near user location
   */
  /**
   * Get count of cars near user location
   */
  private getNearbyCarsCount(): number {
    const userLoc &#x3D; this.userLocation;
    if (!userLoc) return 0;

    const radius &#x3D; this.searchRadiusKm || 5; // Default 5km if not set

    return this.cars.filter((car) &#x3D;&gt; {
      if (!car.lat || !car.lng) return false;

      const dist &#x3D; this.calculateDistanceKm(userLoc.lat, userLoc.lng, car.lat, car.lng);

      return dist &lt;&#x3D; radius;
    }).length;
  }

  /**
   * Format update time for display
   */
  private formatUpdateTime(date: Date): string {
    const now &#x3D; new Date();
    const diffMs &#x3D; now.getTime() - date.getTime();
    const diffSec &#x3D; Math.floor(diffMs / 1000);
    const diffMin &#x3D; Math.floor(diffSec / 60);

    if (diffSec &lt; 10) return &#x27;Actualizado ahora&#x27;;
    if (diffSec &lt; 60) return &#x60;Actualizado hace ${diffSec}s&#x60;;
    if (diffMin &lt; 60) return &#x60;Actualizado hace ${diffMin}min&#x60;;
    return &#x60;Actualizado ${date.toLocaleTimeString(&#x27;es-AR&#x27;, { hour: &#x27;2-digit&#x27;, minute: &#x27;2-digit&#x27; })}&#x60;;
  }

  /**
   * Get location update text for info layer
   */
  public getLocationUpdateText(): string {
    if (!this.lastLocationUpdate) return &#x27;Desconocido&#x27;;
    return this.formatUpdateTime(this.lastLocationUpdate);
  }

  /**
   * Get count of available cars
   */
  public getAvailableCarsCount(): number {
    return this.cars.filter((car) &#x3D;&gt; car.availabilityStatus &#x3D;&#x3D;&#x3D; &#x27;available&#x27;).length;
  }

  /**
   * Get count of cars in use
   */
  public getInUseCarsCount(): number {
    return this.cars.filter((car) &#x3D;&gt; car.availabilityStatus &#x3D;&#x3D;&#x3D; &#x27;in_use&#x27;).length;
  }

  /**
   * Get count of soon available cars
   */
  public getSoonAvailableCarsCount(): number {
    return this.cars.filter((car) &#x3D;&gt; car.availabilityStatus &#x3D;&#x3D;&#x3D; &#x27;soon_available&#x27;).length;
  }

  /**
   * Get count of unavailable cars
   */
  public getUnavailableCarsCount(): number {
    return this.cars.filter((car) &#x3D;&gt; car.availabilityStatus &#x3D;&#x3D;&#x3D; &#x27;unavailable&#x27;).length;
  }

  /**
   * Animate marker update with smooth transitions
   */
  private animateMarkerUpdate(): void {
    if (!this.map || !this.userLocation) return;

    // Smooth camera transition
    this.map.easeTo({
      center: [this.userLocation.lng, this.userLocation.lat],
      duration: 800,
      easing: (t: number) &#x3D;&gt; t * (2 - t), // ease-out
    });

    // Add pulse animation to marker
    this.triggerLocationPulse();
  }

  /**
   * Trigger pulse animation on location update
   */
  private triggerLocationPulse(): void {
    if (!this.userLocationMarker) return;

    const element &#x3D; this.userLocationMarker.getElement();
    if (element) {
      element.classList.add(&#x27;user-location-marker--pulse&#x27;);
      setTimeout(() &#x3D;&gt; {
        element.classList.remove(&#x27;user-location-marker--pulse&#x27;);
      }, 1000);
    }
  }

  /**
   * Calculate distance between two coordinates (Haversine formula)
   */
  private calculateDistance(lat1: number, lon1: number, lat2: number, lon2: number): number {
    const R &#x3D; 6371e3; // Earth radius in meters
    const 1 &#x3D; (lat1 * Math.PI) / 180;
    const 2 &#x3D; (lat2 * Math.PI) / 180;
    const  &#x3D; ((lat2 - lat1) * Math.PI) / 180;
    const  &#x3D; ((lon2 - lon1) * Math.PI) / 180;

    const a &#x3D;
      Math.sin( / 2) * Math.sin( / 2) +
      Math.cos(1) * Math.cos(2) * Math.sin( / 2) * Math.sin( / 2);
    const c &#x3D; 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

    return R * c;
  }

  /**
   * Update marker styles based on mode and theme
   */
  private updateMarkerStyles(): void {
    if (!this.userLocationMarker) return;

    const element &#x3D; this.userLocationMarker.getElement();
    if (element) {
      element.className &#x3D; &#x60;user-location-marker user-location-marker--${this.locationMode}&#x60;;
      if (this.isDarkMode()) {
        element.classList.add(&#x27;user-location-marker--dark&#x27;);
      } else {
        element.classList.remove(&#x27;user-location-marker--dark&#x27;);
      }
    }
  }

  /**
   * Add search radius layer (circle around user location)
   */
  private addSearchRadiusLayer(): void {
    if (!this.map || !this.mapboxgl || !this.userLocation) return;

    // Check if style is loaded before adding layers
    if (!this.map.isStyleLoaded()) {
      // Wait for style to load, then add layer
      this.map.once(&#x27;styledata&#x27;, () &#x3D;&gt; {
        this.addSearchRadiusLayer();
      });
      return;
    }

    // Convert radius from km to meters
    const radiusMeters &#x3D; this.searchRadiusKm * 1000;

    // Create circle geometry
    const circle &#x3D; this.createCircleGeometry(
      this.userLocation.lat,
      this.userLocation.lng,
      radiusMeters,
    );

    // Add or update source
    const feature: GeoJSON.Feature&lt;GeoJSON.Polygon&gt; &#x3D; {
      type: &#x27;Feature&#x27;,
      geometry: circle,
      properties: {},
    };

    const source &#x3D; this.map.getSource(this.searchRadiusSourceId) as MapboxGeoJSONSource | undefined;
    if (source) {
      source.setData(feature);
    } else {
      this.map.addSource(this.searchRadiusSourceId, {
        type: &#x27;geojson&#x27;,
        data: feature,
      });
    }

    // Add or update layer
    const fillColor &#x3D; this.isDarkMode() ? &#x27;rgba(167, 216, 244, 0.1)&#x27; : &#x27;rgba(167, 216, 244, 0.15)&#x27;;
    const outlineColor &#x3D; this.isDarkMode()
      ? &#x27;rgba(167, 216, 244, 0.4)&#x27;
      : &#x27;rgba(167, 216, 244, 0.5)&#x27;;

    if (!this.map.getLayer(this.searchRadiusLayerId)) {
      this.map.addLayer({
        id: this.searchRadiusLayerId,
        type: &#x27;fill&#x27;,
        source: this.searchRadiusSourceId,
        paint: {
          &#x27;fill-color&#x27;: fillColor,
          &#x27;fill-outline-color&#x27;: outlineColor,
        },
      });
    } else {
      // Update paint properties with smooth transitions
      // Mapbox GL JS handles transitions automatically when properties change
      this.map.setPaintProperty(this.searchRadiusLayerId, &#x27;fill-color&#x27;, fillColor);
      this.map.setPaintProperty(this.searchRadiusLayerId, &#x27;fill-outline-color&#x27;, outlineColor);
    }
  }

  /**
   * Create circle geometry for search radius
   */
  private createCircleGeometry(lat: number, lng: number, radiusMeters: number): GeoJSON.Polygon {
    const points &#x3D; 64;
    const coordinates: [number, number][] &#x3D; [];

    for (let i &#x3D; 0; i &lt;&#x3D; points; i++) {
      const angle &#x3D; (i * 360) / points;
      const point &#x3D; this.destinationPoint(lat, lng, radiusMeters, angle);
      coordinates.push([point.lng, point.lat]);
    }

    return {
      type: &#x27;Polygon&#x27;,
      coordinates: [coordinates],
    };
  }

  /**
   * Calculate destination point given start point, distance and bearing
   */
  private destinationPoint(
    lat: number,
    lng: number,
    distanceMeters: number,
    bearingDegrees: number,
  ): { lat: number; lng: number } {
    const R &#x3D; 6371e3; // Earth radius in meters
    const bearing &#x3D; (bearingDegrees * Math.PI) / 180;
    const lat1 &#x3D; (lat * Math.PI) / 180;
    const lng1 &#x3D; (lng * Math.PI) / 180;

    const lat2 &#x3D; Math.asin(
      Math.sin(lat1) * Math.cos(distanceMeters / R) +
        Math.cos(lat1) * Math.sin(distanceMeters / R) * Math.cos(bearing),
    );

    const lng2 &#x3D;
      lng1 +
      Math.atan2(
        Math.sin(bearing) * Math.sin(distanceMeters / R) * Math.cos(lat1),
        Math.cos(distanceMeters / R) - Math.sin(lat1) * Math.sin(lat2),
      );

    return {
      lat: (lat2 * 180) / Math.PI,
      lng: (lng2 * 180) / Math.PI,
    };
  }

  /**
   * Setup follow user location functionality
   */
  private setupFollowLocation(): void {
    if (this.followUserLocation) {
      this.startFollowingLocation();
    }
  }

  /**
   * Start following user location
   */
  startFollowingLocation(): void {
    if (!this.map || !this.userLocation || this.followLocationInterval) return;

    this.followUserLocation &#x3D; true;
    this.followLocationToggle.emit(true);

    // Fly to user location initially with reduced zoom and padding
    this.map.flyTo({
      center: [this.userLocation.lng, this.userLocation.lat],
      zoom: 13, // Reduced from 14 to prevent marker overlap/duplication
      duration: 1000,
      padding: { top: 50, bottom: 50, left: 50, right: 50 }, // Add padding for better positioning
    });

    // Update position periodically with debounce to prevent animation overlap
    let lastEaseToTime &#x3D; 0;
    const easeToDebounceMs &#x3D; 1000; // Prevent animations from stacking
    this.followLocationInterval &#x3D; setInterval(() &#x3D;&gt; {
      if (this.userLocation &amp;&amp; this.map) {
        const now &#x3D; Date.now();
        // Only execute if enough time has passed since last animation
        if (now - lastEaseToTime &gt; easeToDebounceMs) {
          lastEaseToTime &#x3D; now;
          this.map.easeTo({
            center: [this.userLocation.lng, this.userLocation.lat],
            duration: 500,
          });
        }
      }
    }, 3000); // Update every 3 seconds (increased from 2s to reduce animation frequency)
  }

  /**
   * Stop following user location
   */
  stopFollowingLocation(): void {
    if (this.followLocationInterval) {
      clearInterval(this.followLocationInterval);
      this.followLocationInterval &#x3D; null;
    }
    this.followUserLocation &#x3D; false;
    this.followLocationToggle.emit(false);
  }

  /**
   * Setup lock controls for zoom and rotation
   */
  private setupLockControls(): void {
    if (!this.map) return;

    if (this.lockZoomRotation) {
      // Disable zoom and rotation
      this.map.boxZoom.disable();
      this.map.scrollZoom.disable();
      this.map.dragRotate.disable();
      this.map.touchZoomRotate.disable();
    } else {
      // Enable zoom and rotation
      this.map.boxZoom.enable();
      this.map.scrollZoom.enable();
      this.map.dragRotate.enable();
      this.map.touchZoomRotate.enable();
    }
  }

  /**
   * Toggle lock state
   */
  public toggleLock(): void {
    this.lockZoomRotation &#x3D; !this.lockZoomRotation;
    this.lockToggle.emit(this.lockZoomRotation);
    this.setupLockControls();
  }

  /**
   * Toggle follow location
   */
  public toggleFollowLocation(): void {
    if (this.followUserLocation) {
      this.stopFollowingLocation();
    } else {
      this.startFollowingLocation();
    }
  }

  /**
   * Toggle delivery zone (isochrone)
   */
  public toggleDeliveryZone(): void {
    this.showDeliveryIsochrone &#x3D; !this.showDeliveryIsochrone;
    if (this.showDeliveryIsochrone) {
      this.addDeliveryIsochrone();
    } else {
      this.removeDeliveryIsochrone();
    }
  }

  /**
   * Toggle directions route
   */
  public toggleDirections(): void {
    this.showDirectionsRoute &#x3D; !this.showDirectionsRoute;
    if (this.showDirectionsRoute) {
      this.addDirectionsRoute();
    } else {
      this.removeDirectionsRoute();
    }
  }

  /**
   * Handle search radius slider change
   */
  public onSearchRadiusChange(event: Event): void {
    const target &#x3D; event.target as HTMLInputElement;
    const value &#x3D; parseFloat(target.value);
    this.searchRadiusKm &#x3D; value;
    this.searchRadiusChange.emit(value);

    // Update radius layer with animation
    if (this.showSearchRadius &amp;&amp; this.map) {
      this.addSearchRadiusLayer();
    }

    // Note: The parent component (marketplace.page.ts) should handle
    // refetching cars with the new radius filter via searchRadiusChange output
  }

  /**
   * Highlight selected car marker
   */
  private highlightSelectedCar(carId: string): void {
    const markerData &#x3D; this.carMarkers.get(carId);
    if (!markerData) return;

    markerData.componentRef.instance.isSelected &#x3D; true;

    // Fly to selected car
    const car &#x3D; this.cars.find((c) &#x3D;&gt; c.carId &#x3D;&#x3D;&#x3D; carId);
    if (car &amp;&amp; this.map) {
      this.map.flyTo({
        center: [car.lng, car.lat],
        zoom: 14,
        duration: 1000,
      });
    }

    // Update tooltip component
    const componentRef &#x3D; this.tooltipComponents.get(carId);
    if (componentRef) {
      componentRef.setInput(&#x27;selected&#x27;, true);
    }
  }

  /**
   * Remove highlight from car marker
   */
  private removeHighlightFromCar(carId: string): void {
    const markerData &#x3D; this.carMarkers.get(carId);
    if (!markerData) return;

    markerData.componentRef.instance.isSelected &#x3D; false;

    // Update tooltip component
    const componentRef &#x3D; this.tooltipComponents.get(carId);
    if (componentRef) {
      componentRef.setInput(&#x27;selected&#x27;, false);
    }
  }

  /**
   * Clear all markers and related resources
   */
  private clearMarkers(): void {
    // Clear hover timeouts
    this.hoverTimeouts.forEach((timeout) &#x3D;&gt; clearTimeout(timeout));
    this.hoverTimeouts.clear();

    // Detach Angular components
    this.tooltipComponents.forEach((componentRef) &#x3D;&gt; {
      this.applicationRef.detachView(componentRef.hostView);
      componentRef.destroy();
    });
    this.tooltipComponents.clear();

    // Remove popups
    this.tooltipPopups.forEach((popup) &#x3D;&gt; {
      popup.remove();
    });
    this.tooltipPopups.clear();

    // Remove markers and return components to pool
    this.carMarkers.forEach((markerData) &#x3D;&gt; {
      markerData.marker.remove();
      this.returnMarkerComponentToPool(markerData.componentRef);
    });
    this.carMarkers.clear();
    this.visibleCarIds.clear();
  }

  /**
   * Remove search radius layer
   */
  private removeSearchRadiusLayer(): void {
    if (!this.map) return;

    try {
      if (this.map.getLayer(this.searchRadiusLayerId)) {
        this.map.removeLayer(this.searchRadiusLayerId);
      }
      if (this.map.getSource(this.searchRadiusSourceId)) {
        this.map.removeSource(this.searchRadiusSourceId);
      }
    } catch {
      // Layers may not exist
    }
  }

  /**
   * Add delivery isochrone layer for selected car
   * Shows the area reachable from the car&#x27;s location within deliveryTimeMinutes
   */
  private async addDeliveryIsochrone(): Promise&lt;void&gt; {
    if (!this.map || !this.mapboxgl) return;

    const selectedCar &#x3D; this.selectedCar();
    if (!selectedCar) return;

    // Check if style is loaded
    if (!this.map.isStyleLoaded()) {
      this.map.once(&#x27;styledata&#x27;, () &#x3D;&gt; {
        this.addDeliveryIsochrone();
      });
      return;
    }

    try {
      // Fetch isochrone from Mapbox API
      const lng &#x3D; selectedCar.lng;
      const lat &#x3D; selectedCar.lat;
      const profile &#x3D; &#x27;driving&#x27;; // Options: driving, walking, cycling
      const minutes &#x3D; this.deliveryTimeMinutes;

      const url &#x3D; &#x60;https://api.mapbox.com/isochrone/v1/mapbox/${profile}/${lng},${lat}?contours_minutes&#x3D;${minutes}&amp;polygons&#x3D;true&amp;access_token&#x3D;${environment.mapboxAccessToken}&#x60;;

      const response &#x3D; await fetch(url);
      if (!response.ok) {
        console.warn(&#x27;[CarsMap] Failed to fetch isochrone:&#x27;, response.statusText);
        return;
      }

      const data &#x3D; (await response.json()) as GeoJSON.FeatureCollection;

      // Add or update source
      const source &#x3D; this.map.getSource(this.isochroneSourceId) as MapboxGeoJSONSource | undefined;
      if (source) {
        source.setData(data);
      } else {
        this.map.addSource(this.isochroneSourceId, {
          type: &#x27;geojson&#x27;,
          data: data,
        });
      }

      // Add fill layer
      const fillColor &#x3D; this.isDarkMode() ? &#x27;rgba(16, 185, 129, 0.2)&#x27; : &#x27;rgba(16, 185, 129, 0.25)&#x27;;
      if (!this.map.getLayer(this.isochroneLayerId)) {
        this.map.addLayer({
          id: this.isochroneLayerId,
          type: &#x27;fill&#x27;,
          source: this.isochroneSourceId,
          paint: {
            &#x27;fill-color&#x27;: fillColor,
            &#x27;fill-opacity&#x27;: 0.8,
          },
        });
      } else {
        this.map.setPaintProperty(this.isochroneLayerId, &#x27;fill-color&#x27;, fillColor);
      }

      // Add outline layer for better visibility
      const outlineColor &#x3D; this.isDarkMode()
        ? &#x27;rgba(16, 185, 129, 0.8)&#x27;
        : &#x27;rgba(16, 185, 129, 0.9)&#x27;;
      if (!this.map.getLayer(this.isochroneOutlineLayerId)) {
        this.map.addLayer({
          id: this.isochroneOutlineLayerId,
          type: &#x27;line&#x27;,
          source: this.isochroneSourceId,
          paint: {
            &#x27;line-color&#x27;: outlineColor,
            &#x27;line-width&#x27;: 2,
            &#x27;line-dasharray&#x27;: [2, 2],
          },
        });
      } else {
        this.map.setPaintProperty(this.isochroneOutlineLayerId, &#x27;line-color&#x27;, outlineColor);
      }

      console.log(
        &#x60;[CarsMap] Added delivery isochrone: ${minutes} min driving radius from car location&#x60;,
      );
    } catch (error) {
      console.error(&#x27;[CarsMap] Error adding delivery isochrone:&#x27;, error);
    }
  }

  /**
   * Remove delivery isochrone layer
   */
  private removeDeliveryIsochrone(): void {
    if (!this.map) return;

    try {
      if (this.map.getLayer(this.isochroneOutlineLayerId)) {
        this.map.removeLayer(this.isochroneOutlineLayerId);
      }
      if (this.map.getLayer(this.isochroneLayerId)) {
        this.map.removeLayer(this.isochroneLayerId);
      }
      if (this.map.getSource(this.isochroneSourceId)) {
        this.map.removeSource(this.isochroneSourceId);
      }
    } catch {
      // Layers may not exist
    }
  }

  /**
   * Add directions route layer from user location to selected car
   * Shows turn-by-turn directions with estimated time and distance
   */
  private async addDirectionsRoute(): Promise&lt;void&gt; {
    if (!this.map || !this.mapboxgl || !this.userLocation) {
      console.warn(&#x27;[CarsMap] Cannot show directions: missing map or user location&#x27;);
      return;
    }

    const selectedCar &#x3D; this.selectedCar();
    if (!selectedCar) {
      console.warn(&#x27;[CarsMap] Cannot show directions: no selected car&#x27;);
      return;
    }

    // Check if style is loaded
    if (!this.map.isStyleLoaded()) {
      this.map.once(&#x27;styledata&#x27;, () &#x3D;&gt; {
        this.addDirectionsRoute();
      });
      return;
    }

    try {
      const origin: [number, number] &#x3D; [this.userLocation.lng, this.userLocation.lat];
      const destination: [number, number] &#x3D; [selectedCar.lng, selectedCar.lat];

      // Fetch directions from API
      const directions &#x3D; await this.directionsService.getDirections(origin, destination, &#x27;driving&#x27;);

      if (!directions || !directions.routes || directions.routes.length &#x3D;&#x3D;&#x3D; 0) {
        console.warn(&#x27;[CarsMap] No route found&#x27;);
        return;
      }

      const route &#x3D; directions.routes[0];
      const routeGeometry &#x3D; route.geometry;

      // Create GeoJSON for the route
      const routeGeoJSON: GeoJSON.Feature&lt;GeoJSON.LineString&gt; &#x3D; {
        type: &#x27;Feature&#x27;,
        geometry: routeGeometry,
        properties: {
          duration: route.duration,
          distance: route.distance,
        },
      };

      // Add or update source
      const source &#x3D; this.map.getSource(this.routeSourceId) as MapboxGeoJSONSource | undefined;
      if (source) {
        source.setData(routeGeoJSON);
      } else {
        this.map.addSource(this.routeSourceId, {
          type: &#x27;geojson&#x27;,
          data: routeGeoJSON,
        });
      }

      // Add outline layer (casing) - THICK 3D styling to occupy street
      if (!this.map.getLayer(this.routeOutlineLayerId)) {
        this.map.addLayer({
          id: this.routeOutlineLayerId,
          type: &#x27;line&#x27;,
          source: this.routeSourceId,
          paint: {
            &#x27;line-color&#x27;: &#x27;var(--surface-primary, var(--surface-primary, #ffffff)fff)&#x27;,
            &#x27;line-width&#x27;: 20, // THICK outline to occupy whole street
            &#x27;line-opacity&#x27;: 0.8, // High visibility for 3D effect
          },
          layout: {
            &#x27;line-cap&#x27;: &#x27;round&#x27;, // Rounded ends for smooth appearance
            &#x27;line-join&#x27;: &#x27;round&#x27;, // Rounded corners for smooth turns
          },
        });
      }

      // Add main route layer - THICK 3D styling to occupy street
      const routeColor &#x3D; this.getCssVariableValue(&#x27;--cta-default&#x27;, &#x27;#A7D8F4&#x27;); // AutoRenta brand color
      if (!this.map.getLayer(this.routeLayerId)) {
        this.map.addLayer({
          id: this.routeLayerId,
          type: &#x27;line&#x27;,
          source: this.routeSourceId,
          paint: {
            &#x27;line-color&#x27;: routeColor,
            &#x27;line-width&#x27;: 16, // THICK main line to occupy whole street
            &#x27;line-opacity&#x27;: 0.9, // High visibility for 3D effect
          },
          layout: {
            &#x27;line-cap&#x27;: &#x27;round&#x27;, // Rounded ends for smooth appearance
            &#x27;line-join&#x27;: &#x27;round&#x27;, // Rounded corners for smooth turns
          },
        });
      } else {
        this.map.setPaintProperty(this.routeLayerId, &#x27;line-color&#x27;, routeColor);
      }

      // Fit map to show entire route
      const coordinates &#x3D; routeGeometry.coordinates as [number, number][];
      const bounds &#x3D; coordinates.reduce(
        (bounds, coord) &#x3D;&gt; {
          return bounds.extend(coord as [number, number]);
        },
        new this.mapboxgl.LngLatBounds(coordinates[0], coordinates[0]),
      );

      this.map.fitBounds(bounds, {
        padding: { top: 100, bottom: 100, left: 100, right: 100 },
        maxZoom: 15,
        duration: 1000,
        pitch: 60, // Maintain 3D perspective while showing route
      });

      console.log(&#x27;[CarsMap] Directions route added:&#x27;, {
        duration: this.directionsService.formatDuration(route.duration),
        distance: this.directionsService.formatDistance(route.distance),
      });
    } catch (error) {
      console.error(&#x27;[CarsMap] Error adding directions route:&#x27;, error);
    }
  }

  /**
   * Remove directions route layer
   */
  private removeDirectionsRoute(): void {
    if (!this.map) return;

    try {
      if (this.map.getLayer(this.routeLayerId)) {
        this.map.removeLayer(this.routeLayerId);
      }
      if (this.map.getLayer(this.routeOutlineLayerId)) {
        this.map.removeLayer(this.routeOutlineLayerId);
      }
      if (this.map.getSource(this.routeSourceId)) {
        this.map.removeSource(this.routeSourceId);
      }
    } catch {
      // Layers may not exist
    }
  }

  /**
   * Cleanup on destroy
   */
  private cleanup(): void {
    // Cancel any pending updates
    if (this.pendingUpdate) {
      cancelAnimationFrame(this.pendingUpdate);
      this.pendingUpdate &#x3D; null;
    }

    this.clearMarkers();
    this.stopFollowingLocation();

    // Remove clustering layers
    if (this.map) {
      try {
        if (this.map.getLayer(this.clusterLayerId)) {
          this.map.removeLayer(this.clusterLayerId);
        }
        if (this.map.getLayer(this.clusterCountLayerId)) {
          this.map.removeLayer(this.clusterCountLayerId);
        }
        if (this.map.getLayer(&#x27;cars-unclustered&#x27;)) {
          this.map.removeLayer(&#x27;cars-unclustered&#x27;);
        }
        if (this.map.getSource(this.clusterSourceId)) {
          this.map.removeSource(this.clusterSourceId);
        }
        this.removeSearchRadiusLayer();
        this.removeDeliveryIsochrone();
        this.removeDirectionsRoute();
      } catch {
        // Layers may not exist
      }
    }

    if (this.userLocationMarker) {
      this.userLocationMarker.remove();
      this.userLocationMarker &#x3D; null;
    }

    if (this.map) {
      this.map.remove();
      this.map &#x3D; null;
    }

    // Clear component pools
    this.clearComponentPools();
  }

  /**
   * Public method to fly to car location with smooth 3D animation
   */
  flyToCarLocation(carId: string): void {
    const car &#x3D; this.cars.find((c) &#x3D;&gt; c.carId &#x3D;&#x3D;&#x3D; carId);
    if (car &amp;&amp; this.map &amp;&amp; car.lat &amp;&amp; car.lng) {
      this.map.flyTo({
        center: [car.lng, car.lat],
        zoom: 16, // Closer zoom for better focus
        pitch: 45, // 3D tilt effect
        bearing: -15, // Slight rotation for dramatic effect
        duration: 1500, // Smooth animation
        essential: true,
      });
      this.highlightSelectedCar(carId);
    }
  }

  /**
   * Public method to fly to a specific location (lat/lng)
   */
  flyToLocation(lat: number, lng: number, zoom &#x3D; 14): void {
    if (this.map) {
      this.map.flyTo({
        center: [lng, lat],
        zoom,
        essential: true,
        duration: 1200,
      });
    }
  }

  /**
   * Handle booking panel close
   */
  onBookingPanelClose(): void {
    this.bookingPanelOpen.set(false);
    this.selectedCarForBooking.set(null);
  }

  onDetailsPanelClose(): void {
    this.selectedCar.set(null);
    if (this.selectedCarId) {
      this.removeHighlightFromCar(this.selectedCarId);
    }
  }

  /**
   * Handle booking confirmed
   */
  onBookingConfirmed(bookingData: BookingFormData): void {
    const carId &#x3D; this.selectedCarForBooking()?.carId;
    if (carId) {
      this.bookingConfirmed.emit({ carId, bookingData });
    }
    this.bookingPanelOpen.set(false);
    this.selectedCarForBooking.set(null);
  }

  /**
   * Update markers when cars input changes
   */
  ngOnChanges(changes: SimpleChanges): void {
    if (changes[&#x27;cars&#x27;] &amp;&amp; !changes[&#x27;cars&#x27;].firstChange &amp;&amp; this.map) {
      // Update spatial index first, then markers
      this.updateSpatialIndex();
      this.scheduleDebouncedUpdate(() &#x3D;&gt; this.updateMarkersBasedOnCount());
    }
    if (changes[&#x27;selectedCarId&#x27;] &amp;&amp; !changes[&#x27;selectedCarId&#x27;].firstChange &amp;&amp; this.map) {
      const previousId &#x3D; changes[&#x27;selectedCarId&#x27;].previousValue;
      const currentId &#x3D; changes[&#x27;selectedCarId&#x27;].currentValue;

      // Remove highlight from previous
      if (previousId) {
        this.removeHighlightFromCar(previousId);
      }

      // Highlight current
      if (currentId) {
        this.highlightSelectedCar(currentId);
        const car &#x3D; this.cars.find((c) &#x3D;&gt; c.carId &#x3D;&#x3D;&#x3D; currentId);
        if (car) {
          this.selectedCar.set(car);
        }
      } else {
        this.selectedCar.set(null);
      }
    }
    if (changes[&#x27;userLocation&#x27;] &amp;&amp; !changes[&#x27;userLocation&#x27;].firstChange &amp;&amp; this.map) {
      this.addUserLocationMarker();
      if (this.showSearchRadius) {
        this.addSearchRadiusLayer();
      }
    }
    if (changes[&#x27;locationMode&#x27;] &amp;&amp; !changes[&#x27;locationMode&#x27;].firstChange) {
      this.updateMarkerStyles();
    }
    if (changes[&#x27;markerVariant&#x27;] &amp;&amp; !changes[&#x27;markerVariant&#x27;].firstChange) {
      this.updateMapTheme();
      // Re-render markers with new variant
      if (this.map) {
        this.scheduleDebouncedUpdate(() &#x3D;&gt; this.updateMarkersBasedOnCount());
      }
    }
    if (changes[&#x27;searchRadiusKm&#x27;] &amp;&amp; !changes[&#x27;searchRadiusKm&#x27;].firstChange &amp;&amp; this.map) {
      if (this.showSearchRadius) {
        this.addSearchRadiusLayer();
      }
      this.searchRadiusChange.emit(this.searchRadiusKm);
    }
    if (changes[&#x27;showSearchRadius&#x27;] &amp;&amp; !changes[&#x27;showSearchRadius&#x27;].firstChange &amp;&amp; this.map) {
      if (this.showSearchRadius) {
        this.addSearchRadiusLayer();
      } else {
        this.removeSearchRadiusLayer();
      }
    }
    if (changes[&#x27;followUserLocation&#x27;] &amp;&amp; !changes[&#x27;followUserLocation&#x27;].firstChange) {
      if (this.followUserLocation) {
        this.startFollowingLocation();
      } else {
        this.stopFollowingLocation();
      }
    }
    if (changes[&#x27;lockZoomRotation&#x27;] &amp;&amp; !changes[&#x27;lockZoomRotation&#x27;].firstChange) {
      this.setupLockControls();
    }
    if (
      changes[&#x27;showDeliveryIsochrone&#x27;] ||
      changes[&#x27;selectedCarId&#x27;] ||
      changes[&#x27;deliveryTimeMinutes&#x27;]
    ) {
      if (this.showDeliveryIsochrone &amp;&amp; this.selectedCarId &amp;&amp; this.map) {
        this.addDeliveryIsochrone();
      } else {
        this.removeDeliveryIsochrone();
      }
    }
    if (changes[&#x27;showDirectionsRoute&#x27;] || changes[&#x27;selectedCarId&#x27;] || changes[&#x27;userLocation&#x27;]) {
      if (this.showDirectionsRoute &amp;&amp; this.selectedCarId &amp;&amp; this.userLocation &amp;&amp; this.map) {
        this.addDirectionsRoute();
      } else {
        this.removeDirectionsRoute();
      }
    }
  }

  /**
   * Maneja el toggle de capas del mapa
   */
  onLayerToggle(event: { layerId: string; visible: boolean }): void {
    switch (event.layerId) {
      case &#x27;base-map&#x27;:
        this.showBaseMap.set(event.visible);
        // Ocultar/mostrar el mapa base (si es necesario)
        if (this.map) {
          const container &#x3D; this.map.getContainer();
          container.style.opacity &#x3D; event.visible ? &#x27;1&#x27; : &#x27;0.3&#x27;;
        }
        break;
      case &#x27;user-location&#x27;:
        this.showUserLocation.set(event.visible);
        if (event.visible) {
          this.addUserLocationMarker();
        } else {
          if (this.userLocationMarker) {
            this.userLocationMarker.remove();
            this.userLocationMarker &#x3D; null;
          }
        }
        break;
      case &#x27;marketplace-cars&#x27;:
        this.showMarketplaceCars.set(event.visible);
        if (event.visible) {
          this.renderCarMarkers();
        } else {
          this.clearMarkers();
        }
        break;
      default:
        console.warn(&#x60;[CarsMap] Unhandled layer toggle: ${event.layerId}&#x60;);
        break;
    }
  }
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="templateData">
        <pre class="line-numbers"><code class="language-html">&lt;div
  class&#x3D;&quot;cars-map-container&quot;
  [class.map-variant-photo]&#x3D;&quot;markerVariant &#x3D;&#x3D;&#x3D; &#x27;photo&#x27;&quot;
  [class.map-variant-price]&#x3D;&quot;markerVariant &#x3D;&#x3D;&#x3D; &#x27;price&#x27;&quot;
  data-testid&#x3D;&quot;cars-map&quot;
&gt;
  &lt;div *ngIf&#x3D;&quot;loading()&quot; class&#x3D;&quot;cars-map-overlay cars-map-loading-overlay&quot;&gt;
    &lt;div class&#x3D;&quot;cars-map-spinner&quot;&gt;&lt;/div&gt;
    &lt;p&gt;Cargando mapa de autos disponibles...&lt;/p&gt;
  &lt;/div&gt;

  &lt;div *ngIf&#x3D;&quot;error() &amp;&amp; !loading()&quot; class&#x3D;&quot;cars-map-overlay cars-map-error-overlay&quot;&gt;
    &lt;div class&#x3D;&quot;error-content&quot;&gt;
      &lt;svg class&#x3D;&quot;cars-map-error-icon&quot; fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot;&gt;
        &lt;path
          stroke-linecap&#x3D;&quot;round&quot;
          stroke-linejoin&#x3D;&quot;round&quot;
          stroke-width&#x3D;&quot;2&quot;
          d&#x3D;&quot;M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;
        /&gt;
      &lt;/svg&gt;
      &lt;p class&#x3D;&quot;error-message&quot;&gt;{{ error() }}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;div #mapContainer class&#x3D;&quot;cars-map-canvas&quot; id&#x3D;&quot;map-container&quot; data-testid&#x3D;&quot;map-container&quot;&gt;&lt;/div&gt;

  &lt;!-- Map Layers Control --&gt;
  &lt;app-map-layers-control
    [layers]&#x3D;&quot;mapLayers()&quot;
    (layerToggle)&#x3D;&quot;onLayerToggle($event)&quot;
    *ngIf&#x3D;&quot;!loading() &amp;&amp; !error()&quot;
  /&gt;

  &lt;!-- Map Feature Controls - All map controls in one place --&gt;
  &lt;div class&#x3D;&quot;cars-map-feature-controls&quot; *ngIf&#x3D;&quot;!loading() &amp;&amp; !error()&quot;&gt;
    &lt;!-- Seguir ubicacin button --&gt;
    &lt;button
      *ngIf&#x3D;&quot;userLocation&quot;
      class&#x3D;&quot;cars-map-feature-button&quot;
      [class.active]&#x3D;&quot;followUserLocation&quot;
      (click)&#x3D;&quot;toggleFollowLocation()&quot;
      title&#x3D;&quot;Seguir mi ubicacin en tiempo real&quot;
      type&#x3D;&quot;button&quot;
    &gt;
      &lt;svg fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot; class&#x3D;&quot;cars-map-feature-icon&quot;&gt;
        &lt;path
          stroke-linecap&#x3D;&quot;round&quot;
          stroke-linejoin&#x3D;&quot;round&quot;
          stroke-width&#x3D;&quot;2&quot;
          d&#x3D;&quot;M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z&quot;
        /&gt;
        &lt;path
          stroke-linecap&#x3D;&quot;round&quot;
          stroke-linejoin&#x3D;&quot;round&quot;
          stroke-width&#x3D;&quot;2&quot;
          d&#x3D;&quot;M15 11a3 3 0 11-6 0 3 3 0 016 0z&quot;
        /&gt;
      &lt;/svg&gt;
      &lt;span class&#x3D;&quot;cars-map-feature-label&quot;&gt;{{
        followUserLocation ? &#x27;Dejar de seguir&#x27; : &#x27;Seguir ubicacin&#x27;
      }}&lt;/span&gt;
    &lt;/button&gt;

    &lt;!-- Bloquear zoom button (lock icon) --&gt;
    &lt;button
      class&#x3D;&quot;cars-map-feature-button&quot;
      [class.active]&#x3D;&quot;lockZoomRotation&quot;
      (click)&#x3D;&quot;toggleLock()&quot;
      [title]&#x3D;&quot;lockZoomRotation ? &#x27;Desbloquear zoom y rotacin&#x27; : &#x27;Bloquear zoom y rotacin&#x27;&quot;
      type&#x3D;&quot;button&quot;
    &gt;
      &lt;svg fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot; class&#x3D;&quot;cars-map-feature-icon&quot;&gt;
        &lt;ng-container *ngIf&#x3D;&quot;!lockZoomRotation&quot;&gt;
          &lt;!-- Unlocked icon --&gt;
          &lt;path
            stroke-linecap&#x3D;&quot;round&quot;
            stroke-linejoin&#x3D;&quot;round&quot;
            stroke-width&#x3D;&quot;2&quot;
            d&#x3D;&quot;M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z&quot;
          /&gt;
        &lt;/ng-container&gt;
        &lt;ng-container *ngIf&#x3D;&quot;lockZoomRotation&quot;&gt;
          &lt;!-- Locked icon --&gt;
          &lt;path
            stroke-linecap&#x3D;&quot;round&quot;
            stroke-linejoin&#x3D;&quot;round&quot;
            stroke-width&#x3D;&quot;2&quot;
            d&#x3D;&quot;M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z&quot;
          /&gt;
        &lt;/ng-container&gt;
      &lt;/svg&gt;
      &lt;span class&#x3D;&quot;cars-map-feature-label&quot;&gt;{{
        lockZoomRotation ? &#x27;Desbloquear&#x27; : &#x27;Bloquear zoom&#x27;
      }}&lt;/span&gt;
    &lt;/button&gt;

    &lt;!-- Zona de entrega button (only when car selected) --&gt;
    &lt;button
      *ngIf&#x3D;&quot;selectedCar()&quot;
      class&#x3D;&quot;cars-map-feature-button&quot;
      [class.active]&#x3D;&quot;showDeliveryIsochrone&quot;
      (click)&#x3D;&quot;toggleDeliveryZone()&quot;
      title&#x3D;&quot;Ver zona de entrega del auto&quot;
      type&#x3D;&quot;button&quot;
    &gt;
      &lt;svg fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot; class&#x3D;&quot;cars-map-feature-icon&quot;&gt;
        &lt;path
          stroke-linecap&#x3D;&quot;round&quot;
          stroke-linejoin&#x3D;&quot;round&quot;
          stroke-width&#x3D;&quot;2&quot;
          d&#x3D;&quot;M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7&quot;
        /&gt;
      &lt;/svg&gt;
      &lt;span class&#x3D;&quot;cars-map-feature-label&quot;&gt;{{
        showDeliveryIsochrone ? &#x27;Ocultar zona&#x27; : &#x27;Zona de entrega&#x27;
      }}&lt;/span&gt;
    &lt;/button&gt;

    &lt;!-- Cmo llegar button (only if user location available and car selected) --&gt;
    &lt;button
      *ngIf&#x3D;&quot;userLocation &amp;&amp; selectedCar()&quot;
      class&#x3D;&quot;cars-map-feature-button&quot;
      [class.active]&#x3D;&quot;showDirectionsRoute&quot;
      (click)&#x3D;&quot;toggleDirections()&quot;
      title&#x3D;&quot;Ver cmo llegar a este auto&quot;
      type&#x3D;&quot;button&quot;
    &gt;
      &lt;svg fill&#x3D;&quot;none&quot; viewBox&#x3D;&quot;0 0 24 24&quot; stroke&#x3D;&quot;currentColor&quot; class&#x3D;&quot;cars-map-feature-icon&quot;&gt;
        &lt;path
          stroke-linecap&#x3D;&quot;round&quot;
          stroke-linejoin&#x3D;&quot;round&quot;
          stroke-width&#x3D;&quot;2&quot;
          d&#x3D;&quot;M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7&quot;
        /&gt;
      &lt;/svg&gt;
      &lt;span class&#x3D;&quot;cars-map-feature-label&quot;&gt;{{
        showDirectionsRoute ? &#x27;Ocultar ruta&#x27; : &#x27;Cmo llegar&#x27;
      }}&lt;/span&gt;
    &lt;/button&gt;
  &lt;/div&gt;

  &lt;!-- Details Panel --&gt;
  &lt;div
    class&#x3D;&quot;absolute top-0 left-0 h-full w-96 p-4 z-10 transition-transform duration-300 ease-in-out&quot;
    [class.translate-x-0]&#x3D;&quot;selectedCar()&quot;
    [class.-translate-x-full]&#x3D;&quot;!selectedCar()&quot;
  &gt;
    &lt;app-map-details-panel
      [carLocation]&#x3D;&quot;selectedCar()&quot;
      (closePanel)&#x3D;&quot;onDetailsPanelClose()&quot;
    &gt;&lt;/app-map-details-panel&gt;
  &lt;/div&gt;

  &lt;!-- Booking Panel --&gt;
  &lt;app-map-booking-panel
    [car]&#x3D;&quot;selectedCarForBooking()&quot;
    [isOpen]&#x3D;&quot;bookingPanelOpen&quot;
    [userLocation]&#x3D;&quot;userLocation || undefined&quot;
    (bookingConfirmed)&#x3D;&quot;onBookingConfirmed($event)&quot;
    (close)&#x3D;&quot;onBookingPanelClose()&quot;
  /&gt;
&lt;/div&gt;
</code></pre>
    </div>

    <div class="tab-pane fade " id="styleData">
                <p class="comment">
                    <code>./cars-map.component.css</code>
                </p>
                <pre class="line-numbers"><code class="language-scss">@import &#x27;mapbox-gl/dist/mapbox-gl.css&#x27;;

:host {
  display: block;
  width: 100%;
  height: 100%;
  position: relative;
}

.cars-map-container {
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.cars-map-canvas {
  width: 100%;
  height: 100%;
}

.cars-map-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  background: var(--surface-primary-alpha-80, rgba(255, 255, 255, 0.8));
}

.cars-map-loading-overlay {
  flex-direction: column;
  gap: 1rem;
}

.cars-map-spinner {
  width: 3rem;
  height: 3rem;
  border: 0.25rem solid var(--surface-muted, var(--surface-muted, #eee));
  border-top-color: var(--text-primary, #333);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.cars-map-error-overlay {
  flex-direction: column;
  gap: 1rem;
}

.cars-map-error-icon {
  width: 3rem;
  height: 3rem;
  color: var(--error-default, var(--error-default, #f00));
}

/*  MAP MARKERS */

.car-marker {
  position: relative;
  transform-origin: center bottom;
  transition: transform 0.25s ease;
  --marker-width: clamp(120px, 24vw, 180px);
  --avatar-size: clamp(34px, 14vw, 48px);
  --title-size: clamp(0.72rem, 2vw, 0.9rem);
  --meta-size: clamp(0.6rem, 1.6vw, 0.75rem);
  --pill-font: clamp(0.7rem, 1.8vw, 0.85rem);
  --pill-height: clamp(24px, 6vw, 34px);
}

/* Availability Status Styles - Using Tokens */
.marker-availability--available {
  border: 2px solid var(--map-marker-available-color, var(--success-default, #10b981));
  box-shadow: 0 0 0 2px var(--map-marker-available-shadow, rgba(16, 185, 129, 0.2));
}

.marker-availability--soon_available {
  border: 2px solid var(--map-marker-soon-available-color, var(--warning-default, #f59e0b));
  box-shadow: 0 0 0 2px var(--map-marker-soon-available-shadow, rgba(245, 158, 11, 0.2));
  animation: pulse-amber 2s ease-in-out infinite;
}

.marker-availability--in_use {
  border: 2px solid var(--map-marker-in-use-color, var(--info-default, #6366f1));
  box-shadow: 0 0 0 2px var(--map-marker-in-use-shadow, rgba(99, 102, 241, 0.2));
  opacity: 0.7;
}

.marker-availability--unavailable {
  border: 2px solid var(--map-marker-unavailable-color, var(--error-default, #ef4444));
  box-shadow: 0 0 0 2px var(--map-marker-unavailable-shadow, rgba(239, 68, 68, 0.2));
  opacity: 0.5;
  filter: grayscale(0.5);
}

/* Availability Badges - Enhanced for Marketplace */
.marker-badge {
  position: absolute;
  top: -8px;
  right: -8px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 700;
  color: white;
  box-shadow: 0 3px 8px var(--shadow-dark-alpha-40, rgba(0, 0, 0, 0.4));
  z-index: 15;
  animation: badge-appear 0.3s ease-out;
  border: 2px solid white;
}

.marker-badge--available {
  background: var(--map-marker-available-color, var(--success-default, #10b981));
}

.marker-badge--soon {
  background: var(--map-marker-soon-available-color, var(--warning-default, #f59e0b));
  font-size: 9px;
}

.marker-badge--in-use {
  background: var(--map-marker-in-use-color, var(--info-default, #6366f1));
  font-size: 12px;
}

.marker-badge--unavailable {
  background: var(--map-marker-unavailable-color, var(--error-default, #ef4444));
}

/* Instant Booking Visual Indicator - Using Tokens */
.marker-instant-booking {
  position: relative;
}

.marker-instant-booking::before {
  content: &#x27;&#x27;;
  position: absolute;
  inset: -4px;
  border: var(--map-marker-instant-booking-border, 3px) solid
    var(--map-marker-instant-booking-color, var(--success-default, #10b981));
  border-radius: 50%;
  animation: instant-booking-pulse 2s ease-in-out infinite;
  z-index: -1;
  box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
}

.marker-instant-booking-indicator {
  position: absolute;
  top: -4px;
  right: -4px;
  width: var(--map-marker-instant-booking-indicator-size, 18px);
  height: var(--map-marker-instant-booking-indicator-size, 18px);
  background: var(--map-marker-instant-booking-color, var(--success-default, #10b981));
  border: 3px solid white;
  border-radius: 50%;
  box-shadow: 0 2px 8px var(--shadow-dark-alpha-40, rgba(0, 0, 0, 0.4));
  z-index: 20;
  animation: instant-booking-glow 1.5s ease-in-out infinite;
  display: flex;
  align-items: center;
  justify-content: center;
}

.marker-instant-booking-indicator::after {
  content: &#x27;&#x27;;
  font-size: 10px;
  line-height: 1;
}

@keyframes instant-booking-pulse {
  0%,
  100% {
    opacity: var(--map-marker-instant-booking-pulse-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: calc(var(--map-marker-instant-booking-pulse-opacity, 0.4) * 1.75);
    transform: scale(1.05);
  }
}

@keyframes instant-booking-glow {
  0%,
  100% {
    box-shadow: 0 0 0 0 var(--map-marker-instant-booking-color, var(--success-default, #10b981));
    opacity: 0.7;
  }
  50% {
    box-shadow: 0 0 0 4px transparent;
    opacity: 0;
  }
}

@keyframes badge-appear {
  from {
    transform: scale(0);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes pulse-amber {
  0%,
  100% {
    box-shadow: 0 0 0 2px var(--map-marker-soon-available-shadow, rgba(245, 158, 11, 0.2));
  }
  50% {
    box-shadow: 0 0 0 4px var(--map-marker-soon-available-shadow, rgba(245, 158, 11, 0.4));
  }
}

.car-marker:hover {
  transform: translateY(-4px);
  z-index: 2000 !important;
}

.car-marker::after {
  content: attr(data-title);
  position: absolute;
  left: 50%;
  bottom: calc(100% + 6px);
  transform: translateX(-50%) scale(0.9);
  transform-origin: center bottom;
  background: var(--surface-overlay-dark, var(--surface-overlay-dark, rgba(20, 23, 24, 0.95)));
  color: var(--text-white, #fefefe);
  padding: 6px 10px;
  border-radius: 10px;
  font-size: 0.72rem;
  letter-spacing: -0.15px;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
  transition:
    opacity 0.2s ease,
    transform 0.2s ease;
}

.car-marker:hover::after,
.car-marker--selected::after {
  opacity: 1;
  transform: translateX(-50%) scale(1);
}

.car-marker--dark::after {
  background: var(--surface-overlay-light, var(--surface-overlay-light, rgba(255, 255, 255, 0.92)));
  color: var(--text-primary-dark, var(--text-primary-dark, #0f172a));
  box-shadow: var(--shadow-lg-dark, 0 14px 34px rgba(15, 23, 42, 0.25));
}

/* Bounce animation on load */
@keyframes markerBounce {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.car-marker.bounce {
  animation: markerBounce 0.6s ease;
}

/* Enhanced active states */
.car-marker.active.nearby .car-marker-content {
  background-color: var(--error-default); /* Replaced gradient with solid color token */
  border-color: var(--error-default, var(--error-dark, #dc2626));
  transform: scale(1.2);
  box-shadow:
    0 0 0 4px var(--error-alpha-30, rgba(220, 38, 38, 0.3)),
    0 8px 24px var(--error-alpha-40, rgba(220, 38, 38, 0.4));
}

/* User location marker */
.user-location-marker {
  width: 20px;
  height: 20px;
  background: var(--surface-primary, var(--surface-primary, var(--surface-primary, #ffffff) fff));
  border: 3px solid var(--system-blue-default, var(--system-blue-default, #4285f4));
  border-radius: 50%;
  box-shadow: 0 2px 8px
    var(--system-blue-alpha-40, var(--system-blue-alpha-40, rgba(66, 133, 244, 0.4)));
  position: relative;
}

.user-location-marker::after {
  content: &#x27;&#x27;;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 8px;
  height: 8px;
  background: var(--system-blue-default, var(--system-blue-default, #4285f4));
  border-radius: 50%;
}

/* Pulse effect for user location */
@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0
      var(--system-blue-alpha-70, var(--system-blue-alpha-70, rgba(66, 133, 244, 0.7)));
  }
  70% {
    box-shadow: 0 0 0 15px var(--system-blue-alpha-0, rgba(66, 133, 244, 0));
  }
  100% {
    box-shadow: 0 0 0 0 var(--system-blue-alpha-0, rgba(66, 133, 244, 0));
  }
}

.user-location-marker {
  animation: pulse 2s infinite;
}

/* Surge badge for demand-based pricing */
.surge-badge {
  position: absolute;
  top: -4px;
  right: -4px;
  background: var(--warning-default, var(--warning-default, #ffb400));
  border-radius: 50%;
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  color: var(--text-dark, #1a1a1a);
  box-shadow: 0 2px 4px var(--shadow-dark-alpha-20, rgba(0, 0, 0, 0.2));
}

/* Popup styles */
.car-popup {
  z-index: 1000 !important; /* Asegurar que est por encima de otros elementos */
}

.car-popup .mapboxgl-popup-content {
  padding: 3px 4px !important; /* Reducido 4x (antes 12px 16px) */
  border-radius: 4px !important; /* Reducido 4x (antes 16px) */
  -webkit-border-radius: 4px !important;
  background-color: var(
    --surface-primary,
    var(--surface-primary, var(--surface-primary, #ffffff) fff)
  ) !important; /* Fondo blanco en light mode */
  color: var(--text-dark, #1a1a1a) !important; /* Texto oscuro para contraste */
  box-shadow: var(
    --shadow-sm-dark,
    0 1px 3px var(--shadow-dark-alpha-40, rgba(0, 0, 0, 0.4))
  ) !important; /* Reducido 4x */
  z-index: 1000 !important; /* Asegurar que est por encima */
  border: none !important; /* Eliminar cualquier borde que pueda interferir */
  overflow: hidden !important; /* Asegurar que el contenido respete los bordes redondeados */
  max-width: 75px !important; /* Reducido 4x (antes 300px) */
  box-sizing: border-box !important; /* Incluir padding en el ancho */
  width: auto !important; /* Ancho automtico */
}

/* Dark mode para popup */
.dark .car-popup .mapboxgl-popup-content {
  background-color: var(--surface-dark, #1e1e1e) !important; /* Fondo gris oscuro en dark mode */
  color: var(--text-white, #ffffff) !important; /* Texto blanco para contraste */
  box-shadow: var(
    --shadow-lg-dark,
    0 6px 20px var(--shadow-dark-alpha-80, rgba(0, 0, 0, 0.8))
  ) !important; /* Sombra ms intensa */
  border: 1px solid
    var(--border-light-alpha-15, var(--border-light-alpha-15, rgba(255, 255, 255, 0.15))) !important; /* Borde sutil */
}

.car-popup-content {
  display: flex;
  gap: 3px; /* Reducido 4x (antes 12px) */
  min-width: 55px; /* Reducido 4x (antes 220px) */
  align-items: center;
}

.car-popup-image-wrapper {
  width: 22px; /* Reducido 4x (antes 88px) */
  height: 16px; /* Reducido 4x (antes 66px) */
  border-radius: 2.5px; /* Reducido 4x (antes 10px) */
  -webkit-border-radius: 2.5px;
  overflow: hidden !important;
  flex-shrink: 0;
  background: var(--surface-light-muted, var(--surface-light-muted, #e5e7eb));
  position: relative;
  isolation: isolate;
  /* Forzar el recorte visual */
  contain: layout style paint;
}

/* Aplicar redondeo a TODAS las imgenes de popups, estn donde estn - REDUCIDO 4x */
.car-popup img.car-popup-image,
.car-popup .car-popup-image-wrapper img,
.car-popup-content img.car-popup-image,
.car-popup-image,
img.car-popup-image {
  width: 22px !important; /* Reducido 4x (antes 88px) */
  height: 16px !important; /* Reducido 4x (antes 66px) */
  min-width: 22px !important;
  min-height: 16px !important;
  max-width: 22px !important;
  max-height: 16px !important;
  object-fit: cover !important;
  display: block !important;
  border-radius: 2.5px !important; /* Reducido 4x (antes 10px) */
  -webkit-border-radius: 2.5px !important;
  /* Clip-path como mtodo principal de recorte - FORZAR redondeo */
  clip-path: inset(0 round 2.5px) !important;
  -webkit-clip-path: inset(0 round 2.5px) !important;
  /* Asegurar que no haya mrgenes o padding que interfieran */
  margin: 0 !important;
  padding: 0 !important;
  /* Forzar rendering en GPU para mejor compatibilidad */
  transform: translateZ(0) !important;
  -webkit-transform: translateZ(0) !important;
  will-change: transform !important;
  backface-visibility: hidden !important;
  -webkit-backface-visibility: hidden !important;
  /* Asegurar que la imagen nunca exceda el contenedor */
  box-sizing: border-box !important;
}

.car-popup-info {
  color: var(--text-dark, #1a1a1a) !important; /* Color base oscuro para light mode */
}

.dark .car-popup-info {
  color: var(--text-white, #ffffff) !important; /* Color base blanco para dark mode */
}

/* Selectores especficos para sobrescribir estilos globales de map-theme.css - REDUCIDO 4x */
.car-popup .mapboxgl-popup-content .car-popup-info h4,
.car-popup-info h4,
.car-popup .mapboxgl-popup-content h4,
.mapboxgl-popup-content.car-popup-content h4,
.car-popup-content h4,
.car-popup-title {
  margin: 0 0 1px 0 !important; /* Reducido 4x (antes 0 0 4px 0) */
  font-size: 3.5px !important; /* Reducido 4x (antes 14px) */
  font-weight: 600 !important;
  color: var(--text-dark, #1a1a1a) !important; /* Oscuro para light mode */
  line-height: 1.3 !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Dark mode para ttulos */
.dark .car-popup .mapboxgl-popup-content .car-popup-info h4,
.dark .car-popup-info h4,
.dark .car-popup .mapboxgl-popup-content h4,
.dark .mapboxgl-popup-content.car-popup-content h4,
.dark .car-popup-content h4,
.dark .car-popup-title {
  color: var(--text-white, #ffffff) !important; /* Blanco para contraste en dark mode */
}

.car-popup-info p:not(.car-popup-price) {
  color: var(--text-muted, #4b4b4b) !important; /* Gris medio para texto secundario en light mode */
  margin: 0;
  font-size: 3.25px; /* Reducido 4x (antes 13px) */
  line-height: 1.4;
}

.dark .car-popup-info p:not(.car-popup-price) {
  color: var(
    --text-light-muted,
    #e5e3dd
  ) !important; /* Gris claro para texto secundario en dark mode */
}

.car-popup-price {
  margin: 0;
  font-size: 4px; /* Reducido 4x (antes 16px) */
  font-weight: 700;
  color: var(--cta-default) !important; /* Azul pastel del sistema */
  line-height: 1.4;
}

.dark .car-popup-price {
  color: var(--cta-light, #60a5fa) !important; /* Azul claro para precio en dark mode */
}

/* Responsive: Mejorar contraste y tamao en mvil - REDUCCIN AL 1/8 (8x ms pequeo) */
@media (max-width: 640px) {
  /* Limitar el ancho mximo del popup en mvil - 1/8 del tamao original */
  .car-popup .mapboxgl-popup-content {
    max-width: calc(100vw - 12px) !important; /* Dejar 6px de margen a cada lado */
    width: auto !important;
    padding: 1.5px 2px !important; /* Reducido 8x (antes 12px 16px) */
    box-sizing: border-box !important;
  }

  /* Ajustar el contenido del popup en mvil - 1/8 del tamao original */
  .car-popup-content {
    min-width: auto !important;
    max-width: 100% !important;
    gap: 1.5px !important; /* Reducido 8x (antes 12px) */
    flex-wrap: nowrap !important;
    box-sizing: border-box !important;
  }

  /* Reducir tamao de imagen en mvil - 1/8 del tamao original */
  .car-popup-image-wrapper {
    width: 11px !important; /* Reducido 8x (antes 88px) */
    height: 8px !important; /* Reducido 8x (antes 66px) */
    flex-shrink: 0 !important;
    max-width: 11px !important;
    max-height: 8px !important;
    box-sizing: border-box !important;
    border-radius: 1.25px !important; /* Reducido 8x (antes 10px) */
  }

  /* Aplicar tamao reducido a todas las imgenes del popup en mvil - 1/8 */
  .car-popup .mapboxgl-popup-content img.car-popup-image,
  .car-popup .mapboxgl-popup-content .car-popup-image-wrapper img,
  .car-popup img.car-popup-image,
  .car-popup .car-popup-image-wrapper img,
  .car-popup-content img.car-popup-image,
  .car-popup-image,
  img.car-popup-image {
    width: 11px !important;
    height: 8px !important;
    min-width: 11px !important;
    min-height: 8px !important;
    max-width: 11px !important;
    max-height: 8px !important;
    box-sizing: border-box !important;
    object-fit: cover !important;
    border-radius: 1.25px !important; /* Reducido 8x */
    clip-path: inset(0 round 1.25px) !important;
  }

  /* Ajustar informacin del popup en mvil - 1/8 del tamao original */
  .car-popup-info {
    flex: 1 !important;
    min-width: 0 !important; /* Permite que el texto se ajuste */
    max-width: calc(100% - 12.5px) !important; /* 11px imagen + 1.5px gap */
    overflow: hidden !important;
    box-sizing: border-box !important;
  }

  .car-popup-info h4 {
    font-size: 1.75px !important; /* Reducido 8x (antes 14px) */
    font-weight: 700 !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    max-width: 100% !important;
    margin: 0 0 0.5px 0 !important; /* Reducido 8x */
    line-height: 1.2 !important;
  }

  .car-popup-price {
    font-size: 2px !important; /* Reducido 8x (antes 16px) */
    margin: 0 !important;
    line-height: 1.3 !important;
  }

  .car-popup-info p:not(.car-popup-price) {
    font-size: 1.625px !important; /* Reducido 8x (antes 13px) */
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    max-width: 100% !important;
    margin: 0 !important;
    line-height: 1.2 !important;
  }
}

/* Tip del popup - Light mode */
.car-popup .mapboxgl-popup-tip {
  border-top-color: var(
    --surface-primary,
    var(--surface-primary, var(--surface-primary, #ffffff) fff)
  ) !important;
  border-bottom-color: var(
    --surface-primary,
    var(--surface-primary, var(--surface-primary, #ffffff) fff)
  ) !important;
}

/* Tip del popup - Dark mode */
.dark .car-popup .mapboxgl-popup-tip {
  border-top-color: var(--surface-dark, #1e1e1e) !important;
  border-bottom-color: var(--surface-dark, #1e1e1e) !important;
}

/* Desktop: Asegurar visibilidad en pantallas grandes - REDUCIDO 4x */
@media (min-width: 641px) {
  .car-popup .mapboxgl-popup-content {
    padding: 3.5px 4.5px !important; /* Reducido 4x (antes 14px 18px) */
    border-radius: 4.5px !important; /* Reducido 4x (antes 18px) */
    -webkit-border-radius: 4.5px !important;
  }

  .dark .car-popup .mapboxgl-popup-content {
    background-color: var(--surface-dark, #1e1e1e) !important;
    box-shadow: var(
      --shadow-md-dark,
      0 2px 6px var(--shadow-dark-alpha-90, rgba(0, 0, 0, 0.9))
    ) !important; /* Reducido 4x */
  }

  .car-popup-info h4,
  .car-popup-title {
    font-size: 3.75px; /* Reducido 4x (antes 15px) */
    font-weight: 700;
  }

  .dark .car-popup-info h4,
  .dark .car-popup-title {
    font-size: 3.75px; /* Reducido 4x (antes 15px) */
    font-weight: 700;
    color: var(--text-white, #ffffff) !important;
  }

  .car-popup-price {
    font-size: 4.25px; /* Reducido 4x (antes 17px) */
  }

  .dark .car-popup-price {
    color: var(--cta-light, #60a5fa) !important;
  }
}

/* Botn de geolocalizacin */
.mapbox-ctrl-geolocate {
  position: absolute;
  right: 10px;
  top: 10px;
  z-index: 10;
  width: 36px;
  height: 36px;
  border-radius: 6px;
  border: 1px solid var(--border-dark-alpha-10, var(--shadow-dark-alpha-10, rgba(0, 0, 0, 0.1)));
  background: var(--surface-primary, var(--surface-primary, var(--surface-primary, #ffffff) fff));
  color: var(--text-dark-muted, var(--text-dark-muted, #222));
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: var(--shadow-md-light, 0 2px 8px var(--shadow-dark-alpha-15, rgba(0, 0, 0, 0.15)));
  display: flex;
  align-items: center;
  justify-content: center;
}

.mapbox-ctrl-geolocate:hover {
  transform: scale(1.05);
  background: var(--surface-hover-light, var(--surface-hover-light, #f8f9fa));
  box-shadow: var(--shadow-lg-light, 0 4px 12px var(--shadow-dark-alpha-20, rgba(0, 0, 0, 0.2)));
}

.mapbox-ctrl-geolocate:active {
  transform: scale(0.95);
}

/* Dark mode para botn de geolocalizacin */
.dark .mapbox-ctrl-geolocate {
  background: var(--surface-dark, #1e1e1e) !important;
  border-color: var(
    --border-light-alpha-20,
    var(--border-light-alpha-20, rgba(255, 255, 255, 0.2))
  ) !important;
  color: var(--text-white, #ffffff) !important;
  box-shadow: var(
    --shadow-md-dark,
    0 2px 8px var(--shadow-dark-alpha-40, rgba(0, 0, 0, 0.4))
  ) !important;
}

.dark .mapbox-ctrl-geolocate:hover {
  background: var(--surface-hover-dark, #2a2a2a) !important;
  box-shadow: var(
    --shadow-lg-dark,
    0 4px 12px var(--shadow-dark-alpha-60, rgba(0, 0, 0, 0.6))
  ) !important;
}

.mapbox-ctrl-geolocate svg {
  width: 20px;
  height: 20px;
  display: block;
}

/*  Simple Car Markers (Neutral Style) */
.car-marker-simple {
  cursor: pointer;
  transition: all 0.2s ease;
}

.car-marker-simple:hover {
  transform: scale(1.15);
  z-index: 10;
}

.car-marker-simple.car-marker--selected .marker-circle {
  transform: scale(1.2);
  box-shadow:
    0 0 0 4px var(--cta-alpha-30, var(--cta-alpha-30, rgba(167, 216, 244, 0.3))),
    /* cta-default con opacidad */ 0 4px 12px
      var(--cta-alpha-60, var(--cta-alpha-60, rgba(167, 216, 244, 0.6))),
    /* cta-default con opacidad */ 0 8px 24px
      var(--shadow-dark-alpha-30, var(--shadow-dark-alpha-30, rgba(0, 0, 0, 0.3)));
  animation: pulse-marker 2s ease-in-out infinite;
}

@keyframes pulse-marker {
  0%,
  100% {
    transform: scale(1.2);
    opacity: 1;
  }
  50% {
    transform: scale(1.25);
    opacity: 0.9;
  }
}

/*  Photo Circular Marker - Enhanced for Marketplace */
.marker-circle-photo {
  width: var(--map-marker-photo-size, 80px);
  height: var(--map-marker-photo-size, 80px);
  border-radius: 50%;
  border: var(--map-marker-photo-border, 3px) solid var(--map-marker-photo-border-color, white);
  box-shadow: var(
    --map-marker-photo-shadow,
    0 6px 20px var(--shadow-dark-alpha-30, rgba(0, 0, 0, 0.3))
  );
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: visible;
  z-index: 10;
  transition: all var(--duration-normal, 300ms) var(--easing-standard, cubic-bezier(0.4, 0, 0.2, 1));
  background: var(--cta-default); /* Reemplazado gradiente con color slido */
  background-clip: padding-box;
}

.marker-circle-photo--has-image {
  background: transparent;
}

.marker-circle-photo--no-image {
  background: var(--cta-default); /* Reemplazado gradiente con color slido */
}

.marker-photo-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
  display: block;
  transition: transform 0.3s ease;
}

.marker-photo-fallback {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 18px;
  font-weight: 700;
  letter-spacing: 0.5px;
  text-shadow: 0 1px 2px var(--shadow-dark-alpha-20, rgba(0, 0, 0, 0.2));
  z-index: 1;
  user-select: none;
}

.marker-circle-photo--has-image .marker-photo-fallback {
  display: none;
}

.marker-circle-photo--no-image .marker-photo-fallback {
  display: flex;
}

/* Price badge on photo marker - Marketplace style */
.marker-photo-price-badge {
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--cta-default); /* Reemplazado gradiente con color slido */
  color: white;
  font-size: 10px;
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 12px;
  white-space: nowrap;
  box-shadow: 0 2px 8px var(--shadow-dark-alpha-30, rgba(0, 0, 0, 0.3));
  border: 2px solid white;
  z-index: 15;
  pointer-events: none;
  letter-spacing: 0.3px;
}
.car-marker-simple:hover .marker-photo-price-badge {
  transform: translateX(-50%) scale(1.1);
  box-shadow: 0 4px 12px var(--shadow-dark-alpha-40, rgba(0, 0, 0, 0.4));
}

/* Hover effects for photo marker - Using Tokens */
.car-marker-simple:hover .marker-circle-photo {
  transform: scale(var(--map-marker-photo-hover-scale, 1.12));
  box-shadow: var(
    --map-marker-photo-hover-shadow,
    0 8px 16px var(--shadow-dark-alpha-30, rgba(0, 0, 0, 0.3))
  );
  border-width: calc(var(--map-marker-photo-border, 2.5px) * 1.6);
}

.car-marker-simple:hover .marker-photo-image {
  transform: scale(1.05);
}

.car-marker-simple.car-marker--selected .marker-circle-photo {
  transform: scale(1.2);
  box-shadow:
    0 0 0 4px var(--cta-alpha-30, rgba(167, 216, 244, 0.3)),
    0 4px 12px var(--cta-alpha-60, rgba(167, 216, 244, 0.6)),
    0 8px 24px var(--shadow-dark-alpha-30, rgba(0, 0, 0, 0.3));
  animation: pulse-marker-photo 2s ease-in-out infinite;
  border-color: var(--cta-default);
}

.car-marker-simple.car-marker--selected .marker-photo-image {
  transform: scale(1.1);
}

@keyframes pulse-marker-photo {
  0%,
  100% {
    transform: scale(1.2);
    opacity: 1;
  }
  50% {
    transform: scale(1.25);
    opacity: 0.95;
  }
}

/* Gradient border effect for photo marker */
.marker-circle-photo::before {
  content: &#x27;&#x27;;
  position: absolute;
  inset: -3px;
  border-radius: 50%;
  padding: 3px;
  background: var(--cta-default); /* Reemplazado gradiente con color slido */
  -webkit-mask:
    var(--surface-primary) content-box,
    var(--surface-primary); /* Reemplazado gradiente con color slido */
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  z-index: -1;
  opacity: 0;
  transition: opacity 0.3s ease;
}
.car-marker-simple:hover .marker-circle-photo::before,
.car-marker-simple.car-marker--selected .marker-circle-photo::before {
  opacity: 1;
}

/*  User Location Marker */
.user-location-marker {
  position: relative;
  width: var(--circle-size, 20px);
  height: var(--circle-size, 20px);
  transition: all 0.3s ease;
}

.user-marker-avatar {
  width: var(--circle-size, 40px);
  height: var(--circle-size, 40px);
  border-radius: 50%;
  border: 3px solid white;
  box-shadow: 0 2px 8px var(--shadow-dark-alpha-30, rgba(0, 0, 0, 0.3));
  position: relative;
  z-index: 2;
  transition: all 0.3s ease;
  object-fit: cover; /* Asegura que la imagen se vea bien */
  background: var(--cta-default); /* Fallback color si no carga la imagen */
}

.user-marker-halo {
  position: absolute;
  top: calc(-1 * var(--circle-size, 20px) * 0.5);
  left: calc(-1 * var(--circle-size, 20px) * 0.5);
  width: calc(var(--circle-size, 20px) * 2);
  height: calc(var(--circle-size, 20px) * 2);
  border-radius: 50%;
  background: rgba(167, 216, 244, 0.2); /* cta-default con opacidad */
  animation: pulse-halo 2s ease-in-out infinite;
  transition: all 0.3s ease;
}

/* Estados contextuales */
.user-location-marker--searching .user-marker-avatar {
  border-color: var(--success-default, #10b981); /* Verde para bsqueda activa */
  box-shadow: 0 2px 12px rgba(16, 185, 129, 0.4);
}

.user-location-marker--searching .user-marker-halo {
  background: rgba(16, 185, 129, 0.25);
}

.user-location-marker--booking-confirmed .user-marker-avatar {
  border-color: var(--warning-default, #f59e0b); /* Naranja para reserva confirmada */
  box-shadow: 0 2px 12px rgba(245, 158, 11, 0.4);
}

.user-location-marker--booking-confirmed .user-marker-halo {
  background: rgba(245, 158, 11, 0.25);
}

/* Modo oscuro */
.user-location-marker--dark .user-marker-avatar {
  border-color: var(--surface-raised);
  box-shadow: 0 2px 12px rgba(167, 216, 244, 0.5);
}

.user-location-marker--dark.user-location-marker--searching .user-marker-avatar {
  box-shadow: 0 2px 12px rgba(16, 185, 129, 0.6);
}

.user-location-marker--dark.user-location-marker--booking-confirmed .user-marker-avatar {
  box-shadow: 0 2px 12px rgba(245, 158, 11, 0.6);
}

/* Animacin de pulso al actualizar */
.user-location-marker--pulse .user-marker-avatar {
  animation: location-pulse-update 1s ease-out;
}

.user-location-marker--pulse .user-marker-halo {
  animation: location-pulse-halo-update 1s ease-out;
}

@keyframes pulse-halo {
  0%,
  100% {
    transform: scale(1);
    opacity: 0.7;
  }
  50% {
    transform: scale(1.2);
    opacity: 0.3;
  }
}

@keyframes location-pulse-update {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.3);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes location-pulse-halo-update {
  0% {
    transform: scale(1);
    opacity: 0.7;
  }
  50% {
    transform: scale(1.5);
    opacity: 0.1;
  }
  100% {
    transform: scale(1);
    opacity: 0.7;
  }
}

/* Popup mejorado */
.user-location-popup {
  padding: 12px 16px;
  min-width: 200px;
}

.user-location-popup p {
  margin: 0;
  line-height: 1.5;
}

.user-location-popup .text-text-primary {
  font-weight: 600;
  font-size: 14px;
  color: var(--text-primary-dark, #0f172a);
  margin-bottom: 4px;
}

.user-location-popup .text-text-secondary {
  font-size: 12px;
  color: var(--text-secondary, #64748b);
  margin-bottom: 2px;
}

.user-location-popup .text-text-tertiary {
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: 8px;
}

.user-location-popup-actions {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: 8px;
}

.user-location-cta {
  padding: 6px 12px;
  border-radius: 6px;
  border: none;
  background: var(--cta-default);
  color: white;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: center;
}

.user-location-cta:hover {
  background: var(--cta-hover);
  transform: translateY(-1px);
  box-shadow: 0 2px 8px var(--cta-alpha-30, rgba(167, 216, 244, 0.3));
}

.user-location-cta:active {
  transform: translateY(0);
}

/* Modo oscuro para popup */
.dark .user-location-popup .text-text-primary {
  color: #f8fafc;
}

.dark .user-location-popup .text-text-secondary {
  color: var(--text-secondary);
}

.dark .user-location-popup .text-text-tertiary {
  color: var(--text-muted);
}

.dark .user-location-cta {
  background: rgba(167, 216, 244, 0.2);
  color: var(--text-primary);
}

.dark .user-location-cta:hover {
  background: var(--cta-alpha-30, rgba(167, 216, 244, 0.3));
}

/*  Tooltip Container */
.map-tooltip-container {
  width: 100%;
}

/* Controles de mapa personalizados */
.map-controls-container {
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.map-control-button {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  border: 1px solid var(--shadow-dark-alpha-10, rgba(0, 0, 0, 0.1));
  background: white;
  color: var(--text-primary-dark, #0f172a);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px var(--shadow-dark-alpha-15, rgba(0, 0, 0, 0.15));
  transition: all 0.2s ease;
}

.map-control-button:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px var(--shadow-dark-alpha-20, rgba(0, 0, 0, 0.2));
}

.map-control-button:active {
  transform: scale(0.95);
}

.map-control-button.active {
  background: var(--cta-default);
  color: white;
  border-color: var(--cta-default);
}

.map-control-button svg {
  width: 20px;
  height: 20px;
}

/* Modo oscuro para controles */
.dark .map-control-button {
  background: var(--surface-secondary);
  border-color: var(--border-light-alpha-20, rgba(255, 255, 255, 0.2));
  color: #f8fafc;
}

.dark .map-control-button:hover {
  background: var(--surface-raised);
}

.dark .map-control-button.active {
  background: var(--cta-default);
  color: white;
}

/* Map Feature Controls - All controls unified */
.cars-map-feature-controls {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  max-width: 95%;
  padding: 0 10px;
}

.cars-map-feature-button {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 20px;
  background: white;
  border: 1px solid var(--shadow-dark-alpha-10, rgba(0, 0, 0, 0.1));
  border-radius: 12px;
  box-shadow: 0 4px 16px var(--shadow-dark-alpha-15, rgba(0, 0, 0, 0.15));
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary-dark, #0f172a);
}

.feature-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px var(--shadow-dark-alpha-20, rgba(0, 0, 0, 0.2));
  background: #f8fafc;
}

.feature-button:active {
  transform: translateY(0);
}

.feature-button.active {
  background: var(--cta-default, #805ad5);
  color: white;
  border-color: var(--cta-default, #805ad5);
  box-shadow: 0 4px 16px rgba(128, 90, 213, 0.4);
}

.feature-button.active:hover {
  background: var(--cta-hover, #6b46c1);
  border-color: var(--cta-hover, #6b46c1);
}

.cars-map-feature-icon {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
}

.cars-map-feature-label {
  white-space: nowrap;
}

/* Dark mode for feature buttons */
.dark .cars-map-feature-button {
  background: var(--surface-secondary);
  border-color: var(--border-light-alpha-20, rgba(255, 255, 255, 0.2));
  color: #f8fafc;
}

.dark .feature-button:hover {
  background: var(--surface-raised);
}

.dark .feature-button.active {
  background: var(--cta-default, #805ad5);
  color: white;
  border-color: var(--cta-default, #805ad5);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .cars-map-feature-controls {
    bottom: 10px;
    gap: 6px;
    max-width: 98%;
    padding: 0 5px;
  }

  .cars-map-feature-button {
    padding: 10px 12px;
    font-size: 12px;
    gap: 6px;
  }

  .cars-map-feature-icon {
    width: 18px;
    height: 18px;
  }
}

/* Very small screens - icon only */
@media (max-width: 480px) {
  .cars-map-feature-controls {
    gap: 4px;
  }

  .cars-map-feature-label {
    display: none; /* Hide labels on mobile, show only icons */
  }

  .cars-map-feature-button {
    width: 44px;
    height: 44px;
    padding: 0;
    justify-content: center;
    min-width: 44px;
  }

  .cars-map-feature-icon {
    width: 20px;
    height: 20px;
  }
}

/* MAP INFO LAYER */
.map-info-layer {
  position: absolute;
  top: 16px;
  right: 16px;
  z-index: 5;
  display: flex;
  flex-direction: column;
  gap: 12px;
  max-width: 320px;
  pointer-events: auto;
}

.info-card {
  background: var(--surface-primary, var(--surface-primary, #ffffff));
  border: 1px solid var(--border-default, #e2e8f0);
  border-radius: 12px;
  padding: 16px;
  box-shadow:
    0 4px 6px -1px var(--shadow-dark-alpha-10, rgba(0, 0, 0, 0.1)),
    0 2px 4px -1px rgba(0, 0, 0, 0.06);
  backdrop-filter: blur(8px);
  transition: all 0.3s ease;
}

.dark .info-card {
  background: var(--surface-dark-alpha-95, rgba(30, 41, 59, 0.95));
  border-color: var(--border-default);
}

.info-card:hover {
  box-shadow:
    0 10px 15px -3px var(--shadow-dark-alpha-10, rgba(0, 0, 0, 0.1)),
    0 4px 6px -2px rgba(0, 0, 0, 0.05);
  transform: translateY(-2px);
}

.info-card-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--surface-muted, #f1f5f9);
}

.dark .info-card-header {
  border-bottom-color: var(--border-default);
}

.info-icon {
  width: 20px;
  height: 20px;
  color: var(--cta-default, #0284c7);
  flex-shrink: 0;
}

.info-title {
  font-size: 0.875rem;
  font-weight: 650;
  color: var(--text-primary, #0f172a);
  margin: 0;
  letter-spacing: -0.01em;
}

.dark .info-title {
  color: var(--text-primary, #f1f5f9);
}

.info-content {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.8125rem;
  line-height: 1.4;
  padding: 4px 0;
}

.info-row-highlight {
  background: var(--surface-hover, #f8fafc);
  border-radius: 6px;
  padding: 8px;
  margin: -4px -8px 4px;
}

.dark .info-row-highlight {
  background: rgba(71, 85, 105, 0.3);
}

.info-label {
  color: var(--text-secondary, var(--text-secondary, #64748b));
  font-weight: 450;
  display: flex;
  align-items: center;
  gap: 6px;
}

.dark .info-label {
  color: var(--text-secondary, #94a3b8);
}

.info-value {
  color: var(--text-primary, #0f172a);
  font-weight: 550;
}

.dark .info-value {
  color: var(--text-primary, #f1f5f9);
}

.info-badge {
  background: var(--cta-default, #0284c7);
  color: var(--surface-primary, #ffffff);
  font-size: 0.75rem;
  font-weight: 550;
  padding: 2px 8px;
  border-radius: 4px;
  letter-spacing: 0.01em;
}

.status-indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  display: inline-block;
  flex-shrink: 0;
}

.status-available {
  background: var(--map-marker-available-color, var(--success-default, #10b981));
  box-shadow: 0 0 4px rgba(16, 185, 129, 0.4);
}

.status-in-use {
  background: var(--map-marker-in-use-color, var(--info-default, #6366f1));
  box-shadow: 0 0 4px rgba(99, 102, 241, 0.4);
}

.status-soon {
  background: var(--map-marker-soon-available-color, var(--warning-default, #f59e0b));
  box-shadow: 0 0 4px rgba(245, 158, 11, 0.4);
  animation: pulse-subtle 2s ease-in-out infinite;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 4px 0;
}

.legend-marker {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  flex-shrink: 0;
  border: 2px solid transparent;
}

.legend-marker.user-marker {
  background: var(--cta-default, #0284c7);
  border-color: var(--surface-primary, #ffffff);
  box-shadow:
    0 0 0 2px var(--cta-default, #0284c7),
    0 0 8px rgba(2, 132, 199, 0.4);
}

.dark .legend-marker.user-marker {
  border-color: var(--surface-primary);
}

.legend-marker.car-available {
  background: var(--map-marker-available-color, var(--success-default, #10b981));
  border-color: var(--surface-primary);
  box-shadow: 0 0 0 1px var(--map-marker-available-color, var(--success-default, #10b981));
}

.dark .legend-marker.car-available {
  border-color: var(--surface-primary);
}

.legend-marker.car-soon {
  background: var(--map-marker-soon-available-color, var(--warning-default, #f59e0b));
  border-color: var(--surface-primary);
  box-shadow: 0 0 0 1px var(--map-marker-soon-available-color, var(--warning-default, #f59e0b));
  animation: pulse-subtle 2s ease-in-out infinite;
}

.dark .legend-marker.car-soon {
  border-color: var(--surface-primary);
}

.legend-marker.car-in-use {
  background: var(--map-marker-in-use-color, var(--info-default, #6366f1));
  border-color: var(--surface-primary);
  box-shadow: 0 0 0 1px var(--map-marker-in-use-color, var(--info-default, #6366f1));
  opacity: 0.7;
}

.dark .legend-marker.car-in-use {
  background: var(--map-marker-in-use-color, var(--info-default, #6366f1));
  border-color: var(--surface-primary);
  box-shadow: 0 0 0 1px var(--map-marker-in-use-color, var(--info-default, #6366f1));
  opacity: 0.7;
}

.legend-marker.search-radius {
  background: var(--cta-alpha-30, rgba(167, 216, 244, 0.3));
  border: 2px dashed var(--cta-alpha-60, rgba(167, 216, 244, 0.6));
  border-radius: 4px;
}

.legend-label {
  font-size: 0.8125rem;
  color: var(--text-secondary, var(--text-secondary, #64748b));
  font-weight: 450;
}

.dark .legend-label {
  color: var(--text-secondary, #94a3b8);
}

@keyframes pulse-subtle {
  0%,
  100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(0.95);
  }
}

@media (max-width: 768px) {
  .map-info-layer {
    top: 8px;
    right: 8px;
    max-width: 280px;
  }
  .info-card {
    padding: 12px;
  }
  .info-card-header {
    margin-bottom: 8px;
  }
  .info-title {
    font-size: 0.8125rem;
  }
  .info-row {
    font-size: 0.75rem;
  }
  .info-icon {
    width: 18px;
    height: 18px;
  }
  .legend-card {
    display: none;
  }
}

@media (min-width: 769px) and (max-width: 1024px) {
  .map-info-layer {
    max-width: 300px;
  }
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="tree">
        <div id="tree-container"></div>
        <div class="tree-legend">
            <div class="title">
                <b>Legend</b>
            </div>
            <div>
                <div class="color htmlelement"></div><span>Html element</span>
            </div>
            <div>
                <div class="color component"></div><span>Component</span>
            </div>
            <div>
                <div class="color directive"></div><span>Html element with directive</span>
            </div>
        </div>
    </div>

    
</div>

<script src="../js/libs/vis-network.min.js"></script>
<script src="../js/libs/htmlparser.js"></script>
<script src="../js/libs/deep-iterator.js"></script>
<script>
        var COMPONENT_TEMPLATE = '<div><div  class="cars-map-container"  [class.map-variant-photo]="markerVariant === \'photo\'"  [class.map-variant-price]="markerVariant === \'price\'"  data-testid="cars-map">  <div *ngIf="loading()" class="cars-map-overlay cars-map-loading-overlay">    <div class="cars-map-spinner"></div>    <p>Cargando mapa de autos disponibles...</p>  </div>  <div *ngIf="error() && !loading()" class="cars-map-overlay cars-map-error-overlay">    <div class="error-content">      <svg class="cars-map-error-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">        <path          stroke-linecap="round"          stroke-linejoin="round"          stroke-width="2"          d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"        />      </svg>      <p class="error-message">{{ error() }}</p>    </div>  </div>  <div #mapContainer class="cars-map-canvas" id="map-container" data-testid="map-container"></div>  <!-- Map Layers Control -->  <app-map-layers-control    [layers]="mapLayers()"    (layerToggle)="onLayerToggle($event)"    *ngIf="!loading() && !error()"  />  <!-- Map Feature Controls - All map controls in one place -->  <div class="cars-map-feature-controls" *ngIf="!loading() && !error()">    <!-- Seguir ubicacin button -->    <button      *ngIf="userLocation"      class="cars-map-feature-button"      [class.active]="followUserLocation"      (click)="toggleFollowLocation()"      title="Seguir mi ubicacin en tiempo real"      type="button"    >      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="cars-map-feature-icon">        <path          stroke-linecap="round"          stroke-linejoin="round"          stroke-width="2"          d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"        />        <path          stroke-linecap="round"          stroke-linejoin="round"          stroke-width="2"          d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"        />      </svg>      <span class="cars-map-feature-label">{{        followUserLocation ? \'Dejar de seguir\' : \'Seguir ubicacin\'      }}</span>    </button>    <!-- Bloquear zoom button (lock icon) -->    <button      class="cars-map-feature-button"      [class.active]="lockZoomRotation"      (click)="toggleLock()"      [title]="lockZoomRotation ? \'Desbloquear zoom y rotacin\' : \'Bloquear zoom y rotacin\'"      type="button"    >      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="cars-map-feature-icon">        <ng-container *ngIf="!lockZoomRotation">          <!-- Unlocked icon -->          <path            stroke-linecap="round"            stroke-linejoin="round"            stroke-width="2"            d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"          />        </ng-container>        <ng-container *ngIf="lockZoomRotation">          <!-- Locked icon -->          <path            stroke-linecap="round"            stroke-linejoin="round"            stroke-width="2"            d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"          />        </ng-container>      </svg>      <span class="cars-map-feature-label">{{        lockZoomRotation ? \'Desbloquear\' : \'Bloquear zoom\'      }}</span>    </button>    <!-- Zona de entrega button (only when car selected) -->    <button      *ngIf="selectedCar()"      class="cars-map-feature-button"      [class.active]="showDeliveryIsochrone"      (click)="toggleDeliveryZone()"      title="Ver zona de entrega del auto"      type="button"    >      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="cars-map-feature-icon">        <path          stroke-linecap="round"          stroke-linejoin="round"          stroke-width="2"          d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"        />      </svg>      <span class="cars-map-feature-label">{{        showDeliveryIsochrone ? \'Ocultar zona\' : \'Zona de entrega\'      }}</span>    </button>    <!-- Cmo llegar button (only if user location available and car selected) -->    <button      *ngIf="userLocation && selectedCar()"      class="cars-map-feature-button"      [class.active]="showDirectionsRoute"      (click)="toggleDirections()"      title="Ver cmo llegar a este auto"      type="button"    >      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="cars-map-feature-icon">        <path          stroke-linecap="round"          stroke-linejoin="round"          stroke-width="2"          d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"        />      </svg>      <span class="cars-map-feature-label">{{        showDirectionsRoute ? \'Ocultar ruta\' : \'Cmo llegar\'      }}</span>    </button>  </div>  <!-- Details Panel -->  <div    class="absolute top-0 left-0 h-full w-96 p-4 z-10 transition-transform duration-300 ease-in-out"    [class.translate-x-0]="selectedCar()"    [class.-translate-x-full]="!selectedCar()"  >    <app-map-details-panel      [carLocation]="selectedCar()"      (closePanel)="onDetailsPanelClose()"    ></app-map-details-panel>  </div>  <!-- Booking Panel -->  <app-map-booking-panel    [car]="selectedCarForBooking()"    [isOpen]="bookingPanelOpen"    [userLocation]="userLocation || undefined"    (bookingConfirmed)="onBookingConfirmed($event)"    (close)="onBookingPanelClose()"  /></div></div>'
    var COMPONENTS = [{'name': 'AccordionComponent', 'selector': 'app-accordion'},{'name': 'AccountingAdminPage', 'selector': 'autorenta-accounting-admin-page'},{'name': 'AccountingDashboardComponent', 'selector': 'app-accounting-dashboard'},{'name': 'AccountingDashboardPage', 'selector': 'app-accounting-dashboard'},{'name': 'AdminAnalyticsPage', 'selector': 'app-admin-analytics-page'},{'name': 'AdminClaimDetailPage', 'selector': 'app-admin-claim-detail'},{'name': 'AdminClaimsPage', 'selector': 'app-admin-claims'},{'name': 'AdminDashboardPage', 'selector': 'autorenta-admin-dashboard-page'},{'name': 'AdminDisputesPage', 'selector': 'app-admin-disputes'},{'name': 'AdminFeatureFlagsPage', 'selector': 'app-admin-feature-flags'},{'name': 'AdminPricingPage', 'selector': 'app-admin-pricing-page'},{'name': 'AdminRefundsPage', 'selector': 'autorenta-admin-refunds-page'},{'name': 'AdminReviewsPage', 'selector': 'app-admin-reviews'},{'name': 'AdminSettlementsPage', 'selector': 'app-admin-settlements-page'},{'name': 'AdminVerificationsPage', 'selector': 'autorenta-admin-verifications-page'},{'name': 'AdminWithdrawalsPage', 'selector': 'autorenta-admin-withdrawals-page'},{'name': 'AiPhotoGeneratorComponent', 'selector': 'app-ai-photo-generator'},{'name': 'AnalyticsDemoComponent', 'selector': 'app-analytics-demo'},{'name': 'AppComponent', 'selector': 'app-root'},{'name': 'AppHeaderComponent', 'selector': 'app-app-header'},{'name': 'AuditLogsPage', 'selector': 'app-audit-logs'},{'name': 'AuthCallbackPage', 'selector': 'app-auth-callback-page'},{'name': 'AutorentarCreditCardComponent', 'selector': 'app-autorentar-credit-card'},{'name': 'AvailabilityAlertComponent', 'selector': 'app-availability-alert'},{'name': 'AvailabilityCalendarPage', 'selector': 'app-availability-calendar'},{'name': 'BadgeComponent', 'selector': 'app-badge'},{'name': 'BalanceSheetPage', 'selector': 'app-balance-sheet'},{'name': 'BankAccountFormComponent', 'selector': 'app-bank-account-form'},{'name': 'BankAccountsComponent', 'selector': 'app-bank-accounts'},{'name': 'BankAccountsListComponent', 'selector': 'app-bank-accounts-list'},{'name': 'BaseChatComponent', 'selector': 'app-base-chat'},{'name': 'BecomeRenterPage', 'selector': 'app-become-renter'},{'name': 'BirthDateModalComponent', 'selector': 'app-birth-date-modal'},{'name': 'BlockDateModalComponent', 'selector': 'app-block-date-modal'},{'name': 'BonusProtectorPurchaseComponent', 'selector': 'app-bonus-protector-purchase'},{'name': 'BonusProtectorSimulatorComponent', 'selector': 'app-bonus-protector-simulator'},{'name': 'BookingBenefitsComponent', 'selector': 'app-booking-benefits'},{'name': 'BookingChatComponent', 'selector': 'app-booking-chat'},{'name': 'BookingChatWrapperComponent', 'selector': 'app-booking-chat'},{'name': 'BookingCheckoutPage', 'selector': 'app-booking-checkout'},{'name': 'BookingConfirmationPage', 'selector': 'app-booking-confirmation'},{'name': 'BookingConfirmationStepComponent', 'selector': 'app-booking-confirmation-step'},{'name': 'BookingConfirmationTimelineComponent', 'selector': 'app-booking-confirmation-timeline'},{'name': 'BookingContractComponent', 'selector': 'app-booking-contract'},{'name': 'BookingContractPage', 'selector': 'app-booking-contract-page'},{'name': 'BookingDatesLocationStepComponent', 'selector': 'app-booking-dates-location-step'},{'name': 'BookingDatesStepComponent', 'selector': 'app-booking-dates-step'},{'name': 'BookingDetailPage', 'selector': 'app-booking-detail'},{'name': 'BookingDetailPaymentPage', 'selector': 'app-booking-detail-payment'},{'name': 'BookingDriverStepComponent', 'selector': 'app-booking-driver-step'},{'name': 'BookingExtrasStepComponent', 'selector': 'app-booking-extras-step'},{'name': 'BookingFlowMetricsComponent', 'selector': 'app-booking-flow-metrics'},{'name': 'BookingInsuranceStepComponent', 'selector': 'app-booking-insurance-step'},{'name': 'BookingInsuranceSummaryComponent', 'selector': 'app-booking-insurance-summary'},{'name': 'BookingLocationFormComponent', 'selector': 'app-booking-location-form'},{'name': 'BookingLocationFormComponent', 'selector': 'app-booking-location-form'},{'name': 'BookingOpsTimelineComponent', 'selector': 'app-booking-ops-timeline'},{'name': 'BookingPaymentCoverageStepComponent', 'selector': 'app-booking-payment-coverage-step'},{'name': 'BookingPaymentPage', 'selector': 'app-booking-payment'},{'name': 'BookingPaymentStepComponent', 'selector': 'app-booking-payment-step'},{'name': 'BookingPendingPage', 'selector': 'app-booking-pending'},{'name': 'BookingPickerPage', 'selector': 'app-booking-picker'},{'name': 'BookingPricingBreakdownComponent', 'selector': 'app-booking-pricing-breakdown'},{'name': 'BookingPricingBreakdownComponent', 'selector': 'app-booking-pricing-breakdown'},{'name': 'BookingReviewStepComponent', 'selector': 'app-booking-review-step'},{'name': 'BookingStatusComponent', 'selector': 'app-booking-status'},{'name': 'BookingStepIndicatorComponent', 'selector': 'app-booking-step-indicator'},{'name': 'BookingSuccessPage', 'selector': 'app-booking-success'},{'name': 'BookingSummaryCardComponent', 'selector': 'app-booking-summary-card'},{'name': 'BookingTrackingComponent', 'selector': 'app-booking-tracking'},{'name': 'BookingWizardPage', 'selector': 'app-booking-wizard'},{'name': 'BottomSheetComponent', 'selector': 'app-bottom-sheet'},{'name': 'BottomSheetComponent', 'selector': 'app-bottom-sheet'},{'name': 'BottomSheetFiltersComponent', 'selector': 'app-bottom-sheet-filters'},{'name': 'BulkBlockingPage', 'selector': 'app-bulk-blocking'},{'name': 'ButtonComponent', 'selector': 'app-button'},{'name': 'ButtonV2Component', 'selector': 'app-button-v2'},{'name': 'CalendarComponent', 'selector': 'app-calendar'},{'name': 'CalendarEventsListComponent', 'selector': 'app-calendar-events-list'},{'name': 'CalendarPage', 'selector': 'app-calendar'},{'name': 'CalendarWidgetComponent', 'selector': 'app-calendar-widget'},{'name': 'Car3dViewerComponent', 'selector': 'app-car-3d-viewer'},{'name': 'CarBookingPage', 'selector': 'app-car-booking'},{'name': 'CarCard', 'selector': 'app-car-card'},{'name': 'CarCardComponent', 'selector': 'app-car-card'},{'name': 'CarChatComponent', 'selector': 'app-car-chat'},{'name': 'CardComponent', 'selector': 'app-card'},{'name': 'CardComponent', 'selector': 'app-card'},{'name': 'CarDetailPage', 'selector': 'app-car-detail-page'},{'name': 'CardHoldPanelComponent', 'selector': 'app-card-hold-panel'},{'name': 'CarReviewsSectionComponent', 'selector': 'app-car-reviews-section'},{'name': 'CarsConversionPage', 'selector': 'app-cars-conversion'},{'name': 'CarsDrawerComponent', 'selector': 'app-cars-drawer'},{'name': 'CarsListComponent', 'selector': 'app-cars-list'},{'name': 'CarsListPage', 'selector': 'app-cars-list-page'},{'name': 'CarsMapComponent', 'selector': 'app-cars-map'},{'name': 'CashFlowPage', 'selector': 'app-cash-flow'},{'name': 'ChatShellComponent', 'selector': 'app-chat-shell'},{'name': 'CheckInPage', 'selector': 'app-check-in'},{'name': 'CheckOutPage', 'selector': 'app-check-out'},{'name': 'ChipComponent', 'selector': 'app-chip'},{'name': 'CitySelectComponent', 'selector': 'app-city-select'},{'name': 'ClaimFormComponent', 'selector': 'app-claim-form'},{'name': 'ClassBenefitsModalComponent', 'selector': 'app-class-benefits-modal'},{'name': 'ComparePage', 'selector': 'app-compare-page'},{'name': 'ContractPdfViewerComponent', 'selector': 'app-contract-pdf-viewer'},{'name': 'ContractSignModalComponent', 'selector': 'app-contract-sign-modal'},{'name': 'ContractsManagementPage', 'selector': 'app-contracts-management'},{'name': 'CoverageFundDashboardComponent', 'selector': 'app-coverage-fund-dashboard'},{'name': 'CoverageUpgradeSelectorComponent', 'selector': 'app-coverage-upgrade-selector'},{'name': 'CreditSecurityPanelComponent', 'selector': 'app-credit-security-panel'},{'name': 'CustomFeatureComponent', 'selector': 'app-custom-feature'},{'name': 'DamageComparisonComponent', 'selector': 'app-damage-comparison'},{'name': 'DarkModeToggleComponent', 'selector': 'app-dark-mode-toggle'},{'name': 'DashboardCalendarPage', 'selector': 'app-dashboard-calendar-page'},{'name': 'DashboardPage', 'selector': 'app-dashboard-page'},{'name': 'DatabaseExportPage', 'selector': 'app-database-export'},{'name': 'DateRangePickerComponent', 'selector': 'app-date-range-picker'},{'name': 'DateSearchComponent', 'selector': 'app-date-search'},{'name': 'DepositPage', 'selector': 'app-deposit'},{'name': 'DepositsMonitoringPage', 'selector': 'app-deposits-monitoring'},{'name': 'DepositStatusBadgeComponent', 'selector': 'app-deposit-status-badge'},{'name': 'DepositWarningComponent', 'selector': 'app-deposit-warning'},{'name': 'DevToolsComponent', 'selector': 'app-dev-tools'},{'name': 'DismissibleTourComponent', 'selector': 'app-dismissible-tour'},{'name': 'DisputeDetailPage', 'selector': 'app-dispute-detail-page'},{'name': 'DisputeFormComponent', 'selector': 'app-dispute-form'},{'name': 'DisputesListComponent', 'selector': 'app-disputes-list'},{'name': 'DisputesManagementPage', 'selector': 'app-disputes-management'},{'name': 'DistanceBadgeComponent', 'selector': 'app-distance-badge'},{'name': 'DistanceRiskTierBadgeComponent', 'selector': 'app-distance-risk-tier-badge'},{'name': 'DistanceSummaryComponent', 'selector': 'app-distance-summary'},{'name': 'DniUploaderComponent', 'selector': 'app-dni-uploader'},{'name': 'DriverProfileAdvancedComponent', 'selector': 'app-driver-profile-advanced'},{'name': 'DriverProfileCardComponent', 'selector': 'app-driver-profile-card'},{'name': 'DriverProfilePage', 'selector': 'app-driver-profile-page'},{'name': 'DrivingStatsPage', 'selector': 'app-driving-stats'},{'name': 'DynamicPriceBreakdownModalComponent', 'selector': 'app-dynamic-price-breakdown-modal'},{'name': 'DynamicPriceDisplayComponent', 'selector': 'app-dynamic-price-display'},{'name': 'DynamicPriceLockPanelComponent', 'selector': 'app-dynamic-price-lock-panel'},{'name': 'DynamicPricingBadgeComponent', 'selector': 'app-dynamic-pricing-badge'},{'name': 'EarningsCardComponent', 'selector': 'app-earnings-card'},{'name': 'EarningsPage', 'selector': 'app-earnings-page'},{'name': 'EmailVerificationComponent', 'selector': 'app-email-verification'},{'name': 'EmptyStateComponent', 'selector': 'app-empty-state'},{'name': 'EnhancedMapTooltipComponent', 'selector': 'app-enhanced-map-tooltip'},{'name': 'ErrorStateComponent', 'selector': 'app-error-state'},{'name': 'EvidenceUploaderComponent', 'selector': 'app-evidence-uploader'},{'name': 'ExchangeRatesPage', 'selector': 'app-exchange-rates'},{'name': 'ExplorePage', 'selector': 'app-explore'},{'name': 'FABComponent', 'selector': 'app-fab'},{'name': 'FacebookSidebarComponent', 'selector': 'app-facebook-sidebar'},{'name': 'FAQSectionComponent', 'selector': 'app-faq-section'},{'name': 'FavoriteButtonComponent', 'selector': 'app-favorite-button'},{'name': 'FavoritesPage', 'selector': 'app-favorites-page'},{'name': 'FgoManagementComponent', 'selector': 'app-fgo-management'},{'name': 'FgoOverviewPage', 'selector': 'app-fgo-overview'},{'name': 'FinancialHealthPage', 'selector': 'app-financial-health'},{'name': 'FipeAutocompleteComponent', 'selector': 'app-fipe-autocomplete'},{'name': 'FlagReviewModalComponent', 'selector': 'app-flag-review-modal'},{'name': 'FloatingActionFabComponent', 'selector': 'app-floating-action-fab'},{'name': 'FooterComponent', 'selector': 'app-footer'},{'name': 'GuaranteeOptionsInfoComponent', 'selector': 'app-guarantee-options-info'},{'name': 'HelpButtonComponent', 'selector': 'app-help-button'},{'name': 'HelpMenuComponent', 'selector': 'app-help-menu'},{'name': 'HostSupportInfoPanelComponent', 'selector': 'app-host-support-info-panel'},{'name': 'IconComponent', 'selector': 'app-icon'},{'name': 'InboxPage', 'selector': 'app-inbox'},{'name': 'IncomeStatementPage', 'selector': 'app-income-statement'},{'name': 'InfoBannerComponent', 'selector': 'app-info-banner'},{'name': 'InitialGoalModalComponent', 'selector': 'app-initial-goal-modal'},{'name': 'InputComponent', 'selector': 'app-input'},{'name': 'InspectionUploaderComponent', 'selector': 'app-inspection-uploader'},{'name': 'InsurancePage', 'selector': 'app-insurance-page'},{'name': 'InsurancePolicyPage', 'selector': 'app-insurance-policy'},{'name': 'InsuranceSelectorComponent', 'selector': 'app-insurance-selector'},{'name': 'InsuranceSummaryCardComponent', 'selector': 'app-insurance-summary-card'},{'name': 'JournalEntriesPage', 'selector': 'app-journal-entries'},{'name': 'KpiCardComponent', 'selector': 'app-kpi-card'},{'name': 'LanguageSelectorComponent', 'selector': 'app-language-selector'},{'name': 'LayoutComponent', 'selector': 'app-layout'},{'name': 'LedgerHistoryComponent', 'selector': 'app-ledger-history'},{'name': 'LedgerPage', 'selector': 'app-ledger'},{'name': 'LicenseUploaderComponent', 'selector': 'app-license-uploader'},{'name': 'LiveTrackingMapComponent', 'selector': 'app-live-tracking-map'},{'name': 'LoadingStateComponent', 'selector': 'app-loading-state'},{'name': 'LocationMapPickerComponent', 'selector': 'app-location-map-picker'},{'name': 'LocationPickerComponent', 'selector': 'app-location-picker'},{'name': 'LocationSettingsPage', 'selector': 'app-location-settings-page'},{'name': 'LoginPage', 'selector': 'app-login-page'},{'name': 'MakeCalendarPublicButtonComponent', 'selector': 'app-make-calendar-public-button'},{'name': 'ManualJournalEntryPage', 'selector': 'app-manual-journal-entry'},{'name': 'MapBookingPanelComponent', 'selector': 'app-map-booking-panel'},{'name': 'MapCardTooltipComponent', 'selector': 'app-map-card-tooltip'},{'name': 'MapControlsComponent', 'selector': 'app-map-controls'},{'name': 'MapDetailsPanelComponent', 'selector': 'app-map-details-panel'},{'name': 'MapDrawerComponent', 'selector': 'app-map-drawer'},{'name': 'MapFiltersComponent', 'selector': 'app-map-filters'},{'name': 'MapLayersControlComponent', 'selector': 'app-map-layers-control'},{'name': 'MapMarkerComponent', 'selector': 'app-map-marker'},{'name': 'MarketplaceV2Page', 'selector': 'app-marketplace-v2-page'},{'name': 'MercadoPagoCallbackPage', 'selector': 'app-mercadopago-callback'},{'name': 'MercadopagoCardFormComponent', 'selector': 'app-mercadopago-card-form'},{'name': 'MercadoPagoConnectComponent', 'selector': 'app-mercadopago-connect'},{'name': 'MercadopagoPaymentBrickComponent', 'selector': 'app-mercadopago-payment-brick'},{'name': 'MessagesPage', 'selector': 'app-messages'},{'name': 'MissingDocumentsWidgetComponent', 'selector': 'app-missing-documents-widget'},{'name': 'MobileBottomNavComponent', 'selector': 'app-mobile-bottom-nav'},{'name': 'ModalComponent', 'selector': 'app-modal'},{'name': 'ModerateReviewsPage', 'selector': 'app-moderate-reviews'},{'name': 'MpCallbackPage', 'selector': 'app-mp-callback'},{'name': 'MpOnboardingModalComponent', 'selector': 'app-mp-onboarding-modal'},{'name': 'MultiCarCalendarComponent', 'selector': 'app-multi-car-calendar'},{'name': 'MyBookingsPage', 'selector': 'app-my-bookings-page'},{'name': 'MyCarsPage', 'selector': 'app-my-cars-page'},{'name': 'MyClaimsPage', 'selector': 'app-my-claims'},{'name': 'NotificationPreferencesPage', 'selector': 'app-notification-preferences'},{'name': 'NotificationsComponent', 'selector': 'app-notifications'},{'name': 'NotificationsPage', 'selector': 'app-notifications-page'},{'name': 'NotificationsSettingsPage', 'selector': 'app-notifications-settings'},{'name': 'OfflineBannerComponent', 'selector': 'app-offline-banner'},{'name': 'OfflineMessagesIndicatorComponent', 'selector': 'app-offline-messages-indicator'},{'name': 'OfflineMessagesPanelComponent', 'selector': 'app-offline-messages-panel'},{'name': 'OnboardingComponent', 'selector': 'app-onboarding'},{'name': 'OnboardingPage', 'selector': 'app-onboarding-page'},{'name': 'OrganizationDashboardComponent', 'selector': 'app-organization-dashboard'},{'name': 'OwnerBookingsPage', 'selector': 'app-owner-bookings-page'},{'name': 'OwnerCheckInPage', 'selector': 'app-owner-check-in'},{'name': 'OwnerCheckOutPage', 'selector': 'app-owner-check-out'},{'name': 'OwnerConfirmationComponent', 'selector': 'app-owner-confirmation'},{'name': 'OwnerDamageReportPage', 'selector': 'app-owner-damage-report'},{'name': 'OwnerDashboardPage', 'selector': 'app-owner-dashboard'},{'name': 'PaymentActionsComponent', 'selector': 'app-payment-actions'},{'name': 'PaymentMethodButtonsComponent', 'selector': 'app-payment-method-buttons'},{'name': 'PaymentMethodComparisonModalComponent', 'selector': 'app-payment-method-comparison-modal'},{'name': 'PaymentMethodSelectorComponent', 'selector': 'app-payment-method-selector'},{'name': 'PaymentModeAlertComponent', 'selector': 'app-payment-mode-alert'},{'name': 'PaymentModeToggleComponent', 'selector': 'app-payment-mode-toggle'},{'name': 'PaymentProviderSelectorComponent', 'selector': 'app-payment-provider-selector'},{'name': 'PaymentSummaryPanelComponent', 'selector': 'app-payment-summary-panel'},{'name': 'PayoutHistoryComponent', 'selector': 'app-payout-history'},{'name': 'PayoutsHistoryComponent', 'selector': 'app-payouts-history'},{'name': 'PayoutsPage', 'selector': 'app-payouts-page'},{'name': 'PayoutStatsComponent', 'selector': 'app-payout-stats'},{'name': 'PayoutsWidgetComponent', 'selector': 'app-payouts-widget'},{'name': 'PayPalButtonComponent', 'selector': 'app-paypal-button'},{'name': 'PendingApprovalPage', 'selector': 'app-pending-approval'},{'name': 'PendingReviewsBannerComponent', 'selector': 'app-pending-reviews-banner'},{'name': 'PendingReviewsListComponent', 'selector': 'app-pending-reviews-list'},{'name': 'PendingReviewsPage', 'selector': 'app-pending-reviews'},{'name': 'PeriodClosuresPage', 'selector': 'app-period-closures'},{'name': 'PersonalizedDashboardComponent', 'selector': 'app-personalized-dashboard'},{'name': 'PersonalizedLocationComponent', 'selector': 'app-personalized-location'},{'name': 'PhoneVerificationComponent', 'selector': 'app-phone-verification'},{'name': 'PickupLocationSelectorComponent', 'selector': 'app-pickup-location-selector'},{'name': 'PremiumFeatureComponent', 'selector': 'app-premium-feature'},{'name': 'ProfessionalDateInputComponent', 'selector': 'app-professional-date-input'},{'name': 'ProfileContactPage', 'selector': 'app-profile-contact'},{'name': 'ProfileContactSectionComponent', 'selector': 'app-profile-contact-section'},{'name': 'ProfileExpandedPage', 'selector': 'app-profile-expanded-page'},{'name': 'ProfileHeaderComponent', 'selector': 'app-profile-header'},{'name': 'ProfileIdentitySectionComponent', 'selector': 'app-profile-identity-section'},{'name': 'ProfileKpisComponent', 'selector': 'app-profile-kpis'},{'name': 'ProfilePage', 'selector': 'app-profile-page'},{'name': 'ProfilePreferencesPage', 'selector': 'app-profile-preferences'},{'name': 'ProfileSecurityPage', 'selector': 'app-profile-security'},{'name': 'ProfileVerificationPage', 'selector': 'app-profile-verification'},{'name': 'ProfileWizardComponent', 'selector': 'app-profile-wizard'},{'name': 'PromoCodeInputComponent', 'selector': 'app-promo-code-input'},{'name': 'ProtectionCreditCardComponent', 'selector': 'app-protection-credit-card'},{'name': 'ProtectionCreditExplanationModalComponent', 'selector': 'app-protection-credit-explanation-modal'},{'name': 'ProtectionsPage', 'selector': 'app-protections-page'},{'name': 'ProvisionsPage', 'selector': 'app-provisions'},{'name': 'PublicProfilePage', 'selector': 'app-public-profile'},{'name': 'PublishCarV2Page', 'selector': 'app-publish-car-v2'},{'name': 'PullToRefreshComponent', 'selector': 'app-pull-to-refresh'},{'name': 'PwaCapabilitiesComponent', 'selector': 'app-pwa-capabilities'},{'name': 'PwaInstallBannerComponent', 'selector': 'app-pwa-install-banner'},{'name': 'PwaInstallPromptComponent', 'selector': 'app-pwa-install-prompt'},{'name': 'PwaTitlebarComponent', 'selector': 'app-pwa-titlebar'},{'name': 'PwaUpdatePromptComponent', 'selector': 'app-pwa-update-prompt'},{'name': 'QuickBookingModalComponent', 'selector': 'app-quick-booking-modal'},{'name': 'QuickBookPage', 'selector': 'app-quick-book-page'},{'name': 'ReconciliationPage', 'selector': 'app-reconciliation'},{'name': 'ReembolsabilityBadgeComponent', 'selector': 'app-reembolsability-badge'},{'name': 'ReferralLandingPage', 'selector': 'app-referral-landing'},{'name': 'ReferralsPage', 'selector': 'app-referrals'},{'name': 'RefundRequestComponent', 'selector': 'app-refund-request'},{'name': 'RefundStatusComponent', 'selector': 'app-refund-status'},{'name': 'RegisterPage', 'selector': 'app-register-page'},{'name': 'RenterConfirmationComponent', 'selector': 'app-renter-confirmation'},{'name': 'ReportClaimPage', 'selector': 'app-report-claim'},{'name': 'RequestPayoutModalComponent', 'selector': 'app-request-payout-modal'},{'name': 'ResetPasswordPage', 'selector': 'app-reset-password-page'},{'name': 'ResponsiveFeatureComponent', 'selector': 'app-responsive-feature'},{'name': 'RevenueRecognitionPage', 'selector': 'app-revenue-recognition'},{'name': 'ReviewCardComponent', 'selector': 'app-review-card'},{'name': 'ReviewFormComponent', 'selector': 'app-review-form'},{'name': 'ReviewManagementComponent', 'selector': 'app-review-management'},{'name': 'ReviewRadarChartComponent', 'selector': 'app-review-radar-chart'},{'name': 'ReviewsPage', 'selector': 'app-reviews-page'},{'name': 'ReviewSummaryComponent', 'selector': 'app-review-summary'},{'name': 'RiskCalculatorViewerComponent', 'selector': 'app-risk-calculator-viewer'},{'name': 'RiskPolicyTableComponent', 'selector': 'app-risk-policy-table'},{'name': 'SectionCardComponent', 'selector': 'app-section-card'},{'name': 'SelfieCaptureComponent', 'selector': 'app-selfie-capture'},{'name': 'SettlementSimulatorComponent', 'selector': 'app-settlement-simulator'},{'name': 'ShareButtonComponent', 'selector': 'app-share-button'},{'name': 'ShareMenuComponent', 'selector': 'app-share-menu'},{'name': 'SimpleCheckoutComponent', 'selector': 'app-simple-checkout'},{'name': 'SkeletonComponent', 'selector': 'app-skeleton'},{'name': 'SkeletonLoaderComponent', 'selector': 'app-skeleton-loader'},{'name': 'SmartOnboardingComponent', 'selector': 'app-smart-onboarding'},{'name': 'SplashComponent', 'selector': 'app-splash'},{'name': 'SplashLoaderComponent', 'selector': 'app-splash-loader'},{'name': 'StatisticsWidgetComponent', 'selector': 'app-statistics-widget'},{'name': 'StatsPage', 'selector': 'app-stats-page'},{'name': 'StatsStripComponent', 'selector': 'app-stats-strip'},{'name': 'StepperModalComponent', 'selector': 'app-stepper-modal'},{'name': 'StickyCtaMobileComponent', 'selector': 'app-sticky-cta-mobile'},{'name': 'StockPhotosSelectorComponent', 'selector': 'app-stock-photos-selector'},{'name': 'TermsAndConsentsComponent', 'selector': 'app-terms-and-consents'},{'name': 'TermsPage', 'selector': 'app-terms'},{'name': 'ThreeCanvasComponent', 'selector': 'app-three-canvas'},{'name': 'ToastComponent', 'selector': 'app-toast'},{'name': 'TooltipComponent', 'selector': 'app-tooltip'},{'name': 'TourStatusComponent', 'selector': 'app-tour-status'},{'name': 'TransactionHistoryComponent', 'selector': 'app-transaction-history'},{'name': 'TransferFundsComponent', 'selector': 'app-transfer-funds'},{'name': 'UploadImageComponent', 'selector': 'app-upload-image'},{'name': 'UrgencyBannerComponent', 'selector': 'app-urgency-banner'},{'name': 'UrgentBookingPage', 'selector': 'app-urgent-booking'},{'name': 'UrgentRentalBannerComponent', 'selector': 'app-urgent-rental-banner'},{'name': 'UserBadgesComponent', 'selector': 'app-user-badges'},{'name': 'UtilityBarComponent', 'selector': 'app-utility-bar'},{'name': 'VehicleDocumentsPage', 'selector': 'app-vehicle-documents'},{'name': 'VerificationBadgeComponent', 'selector': 'app-verification-badge'},{'name': 'VerificationBlockingModalComponent', 'selector': 'app-verification-blocking-modal'},{'name': 'VerificationPage', 'selector': 'app-verification'},{'name': 'VerificationProgressComponent', 'selector': 'app-verification-progress'},{'name': 'VerificationPromptBannerComponent', 'selector': 'app-verification-prompt-banner'},{'name': 'WaitlistCountComponent', 'selector': 'app-waitlist-count'},{'name': 'WaitlistPage', 'selector': 'app-waitlist-page'},{'name': 'WalletAccountNumberCardComponent', 'selector': 'app-wallet-account-number-card'},{'name': 'WalletBalanceCardComponent', 'selector': 'app-wallet-balance-card'},{'name': 'WalletFaqComponent', 'selector': 'app-wallet-faq'},{'name': 'WalletPage', 'selector': 'app-wallet'},{'name': 'WalletTransfersComponent', 'selector': 'app-wallet-transfers'},{'name': 'WaterfallSimulatorComponent', 'selector': 'app-waterfall-simulator'},{'name': 'WazeLiveMapComponent', 'selector': 'app-waze-live-map'},{'name': 'WithdrawalHistoryComponent', 'selector': 'app-withdrawal-history'},{'name': 'WithdrawalRequestFormComponent', 'selector': 'app-withdrawal-request-form'},{'name': 'WithdrawalsAdminPage', 'selector': 'app-withdrawals-admin'},{'name': 'WizardComponent', 'selector': 'app-wizard'},{'name': 'WizardStepComponent', 'selector': 'app-wizard-step'}];
    var DIRECTIVES = [{'name': 'AutoAltDirective', 'selector': 'img[appAutoAlt]'},{'name': 'ClickOutsideDirective', 'selector': '[appClickOutside]'},{'name': 'EscapeKeyDirective', 'selector': '[appEscapeKey]'},{'name': 'FeatureFlagDirective', 'selector': '[appFeatureFlag]'},{'name': 'FocusTrapDirective', 'selector': '[appFocusTrap]'},{'name': 'FocusTrapDirective', 'selector': '[appFocusTrap]'},{'name': 'FormErrorAriaDirective', 'selector': 'input[appFormErrorAria], textarea[appFormErrorAria], select[appFormErrorAria]'},{'name': 'ResponsiveImageDirective', 'selector': 'img[appResponsiveImage]'}];
    var ACTUAL_COMPONENT = {'name': 'CarsMapComponent'};
</script>
<script src="../js/tree.js"></script>

















                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'component';
            var COMPODOC_CURRENT_PAGE_URL = 'CarsMapComponent.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
